var ry=Object.defineProperty;var s=(Rc,gs)=>ry(Rc,"name",{value:gs,configurable:!0});(()=>{var Rc={850:(Ft,de,f)=>{"use strict";f.r(de),f.d(de,{AppInsightsCore:()=>ct,BaseCore:()=>Pt,BaseTelemetryPlugin:()=>z.i,CoreUtils:()=>Me.Tr,DiagnosticLogger:()=>A.AQ,ESPromise:()=>xt,ESPromiseScheduler:()=>Yr,EventHelper:()=>Pr.zB,EventLatency:()=>W,EventPersistence:()=>je,EventPropertyType:()=>Se,EventsDiscardedReason:()=>Wr.h,FullVersionString:()=>Me.vs,InternalAppInsightsCore:()=>_e,InternalBaseCore:()=>Lt,LoggingSeverity:()=>U,MinChannelPriorty:()=>qn,NotificationManager:()=>Z,PerfEvent:()=>j.zn,PerfManager:()=>j.Jk,ProcessTelemetryContext:()=>De.Vi,TraceLevel:()=>we,Undefined:()=>ur.jA,Utils:()=>Me.cQ,ValueKind:()=>oe,ValueSanitizer:()=>pi,Version:()=>Me.Gf,_ExtendedInternalMessageId:()=>Ae,_InternalLogMessage:()=>A.lQ,_InternalMessageId:()=>pe,__getRegisteredEvents:()=>Gn.um,_throwInternal:()=>A.kP,addEventHandler:()=>Gn.Ib,addEventListeners:()=>Gn.yw,addPageHideEventListener:()=>Gn.TJ,addPageShowEventListener:()=>Gn.nD,addPageUnloadEventListener:()=>Gn.c9,areCookiesSupported:()=>V.p7,arrForEach:()=>D.tO,arrIndexOf:()=>D.UA,arrMap:()=>D.Mr,arrReduce:()=>D.Xz,attachEvent:()=>Gn.pZ,cookieAvailable:()=>V.p7,createCookieMgr:()=>V.Nz,createEnumStyle:()=>M.By,createGuid:()=>Me.cm,createProcessTelemetryContext:()=>De.CD,createTraceParent:()=>Tn.SU,createUniqueNamespace:()=>I.J,createUnloadHandlerContainer:()=>$.Y,dateNow:()=>D.m6,deleteCookie:()=>Me.kT,detachEvent:()=>Gn.pD,disableCookies:()=>Me.oF,disallowsSameSiteNone:()=>V.UY,doPerf:()=>j.Lm,dumpObj:()=>Q.eU,eventOff:()=>Gn.QY,eventOn:()=>Gn.XO,extend:()=>Me.l7,findW3cTraceParent:()=>Tn.lq,formatTraceParent:()=>Tn.aR,generateW3CId:()=>Pr.DO,getCommonSchemaMetaData:()=>Me.Vv,getConsole:()=>Q.dr,getCookie:()=>Me.ej,getCookieValue:()=>Me.Do,getCrypto:()=>Q.MX,getDocument:()=>Q.Me,getExceptionName:()=>D.jj,getFieldValueType:()=>Me.Sy,getGlobal:()=>re.Rd,getGlobalInst:()=>Q.a8,getHistory:()=>Q.s1,getIEVersion:()=>Q.sA,getISOString:()=>D.Y6,getJSON:()=>Q.xA,getLocation:()=>Q.k$,getMsCrypto:()=>Q.gz,getNavigator:()=>Q.jW,getPerformance:()=>Q.r,getSetValue:()=>D.qK,getTenantId:()=>Me.jM,getTime:()=>Me.hK,getWindow:()=>Q.Jj,hasDocument:()=>Q.Nv,hasHistory:()=>Q.fE,hasJSON:()=>Q.nS,hasNavigator:()=>Q.d6,hasOwnProperty:()=>D.nr,hasWindow:()=>Q.Ym,isArray:()=>D.kJ,isArrayValid:()=>Me.JT,isBeaconsSupported:()=>Q.MF,isBoolean:()=>D.jn,isChromium:()=>Me.mJ,isDate:()=>D.J_,isDocumentObjectAvailable:()=>Me.x9,isError:()=>D.VZ,isFetchSupported:()=>Q.JO,isFunction:()=>D.mf,isIE:()=>Q.w1,isLatency:()=>Me.r7,isNotTruthy:()=>D.F,isNullOrUndefined:()=>D.le,isNumber:()=>D.hj,isObject:()=>D.Kn,isReactNative:()=>Q.b$,isSampledFlag:()=>Tn.Pn,isString:()=>D.HD,isTruthy:()=>D.fQ,isTypeof:()=>D.Ym,isUint8ArrayAvailable:()=>Me.IZ,isUndefined:()=>D.o8,isValidSpanId:()=>Tn.Lc,isValidTraceId:()=>Tn.jN,isValidTraceParent:()=>Tn.J6,isValueAssigned:()=>Me.Sn,isValueKind:()=>Me.oS,isWindowObjectAvailable:()=>Me.dH,isXhrSupported:()=>Q.Z3,mergeEvtNamespace:()=>Gn.jU,newGuid:()=>Pr.GW,newId:()=>$r.pZ,normalizeJsName:()=>D.Gf,objCreate:()=>re.pu,objDefineAccessors:()=>D.l_,objForEachKey:()=>D.rW,objFreeze:()=>D.FL,objKeys:()=>D.FY,objSeal:()=>D.Xi,openXhr:()=>Me.ot,optimizeObject:()=>D.Ax,parseTraceParent:()=>Tn.j_,perfNow:()=>Pr.Jj,proxyAssign:()=>D.cf,proxyFunctionAs:()=>D.Oi,proxyFunctions:()=>D.Vb,random32:()=>$r._l,randomValue:()=>$r.az,removeEventHandler:()=>Gn.C1,removeEventListeners:()=>Gn.nJ,removePageHideEventListener:()=>Gn.C9,removePageShowEventListener:()=>Gn.Yl,removePageUnloadEventListener:()=>Gn.JA,safeGetCookieMgr:()=>V.JP,safeGetLogger:()=>A.vH,sanitizeProperty:()=>Me.yj,setCookie:()=>Me.d8,setEnableEnvMocks:()=>Q.dI,setProcessTelemetryTimings:()=>Me.if,setValue:()=>D.sO,strContains:()=>D._Q,strEndsWith:()=>D.Id,strFunction:()=>ur.cb,strObject:()=>ur.fK,strPrototype:()=>ur.hB,strStartsWith:()=>D.xe,strTrim:()=>D.nd,strUndefined:()=>ur.jA,throwError:()=>D._y,toISOString:()=>D.Y6,useXDomainRequest:()=>Q.cp});var K=f(88),M=f(873),D=f(708),U=(0,M.By)({CRITICAL:1,WARNING:2}),pe=(0,M.By)({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),oe=(0,M.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),W=(0,M.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Se=(0,M.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),je=(0,M.By)({Normal:1,Critical:2}),we=(0,M.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Ae=(0,D.FL)((0,K.uc)((0,K.uc)({},pe),(0,M.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),A=f(18),j=f(288),Q=f(630),re=f(91),Ee=f(679),De=f(589),Pe=f(833),V=f(242),X=f(171),G=f(158),k=f(41),xe=500,H="Channel has invalid priority - ";function We(ut,ot,$e,ve){ot&&(0,D.kJ)(ot)&&ot.length>0&&(ot=ot.sort(function(Ye,Ve){return Ye.priority-Ve.priority}),(0,D.tO)(ot,function(Ye){Ye.priority<xe&&(0,D._y)(H+Ye.identifier)}),ut.push({queue:(0,D.FL)(ot),chain:(0,De.jV)(ot,$e,ve)}))}s(We,"_addChannelQueue");function Ct(ut,ot){var $e;function ve(){return(0,De.CD)(null,ot.config,ot,null)}s(ve,"_getTelCtx");function Ye(Te,et,Oe,dt){var O=Te?Te.length+1:1;function un(){O--,O===0&&(dt&&dt(),dt=null)}s(un,"_runChainOnComplete"),O>0&&(0,D.tO)(Te,function(_){if(_&&_.queue.length>0){var ue=_.chain,ke=et.createNew(ue);ke.onComplete(un),Oe(ke)}else O--}),un()}s(Ye,"_processChannelQueue");function Ve(Te,et){var Oe=et||{reason:0};return Ye(ut,Te,function(dt){dt[k.Z_](Oe)},function(){Te[k.Z_](Oe)}),!0}s(Ve,"_doUpdate");function Ge(Te,et){var Oe=et||{reason:0,isAsync:!1};return Ye(ut,Te,function(dt){dt[k.Z_](Oe)},function(){Te[k.Z_](Oe),Nt=!1}),!0}s(Ge,"_doTeardown");function _t(Te){var et=null;return ut&&ut.length>0&&(0,D.tO)(ut,function(Oe){if(Oe&&Oe.queue.length>0&&((0,D.tO)(Oe.queue,function(dt){if(dt.identifier===Te)return et=dt,-1}),et))return-1}),et}s(_t,"_getChannel");var Nt=!1,Ut=($e={identifier:"ChannelControllerPlugin",priority:xe,initialize:function(Te,et,Oe,dt){Nt=!0,(0,D.tO)(ut,function(O){O&&O.queue.length>0&&(0,Pe.bP)((0,De.CD)(O.chain,Te,et),Oe)})},isInitialized:function(){return Nt},processTelemetry:function(Te,et){Ye(ut,et||ve(),function(Oe){Oe[k.Z_](Te)},function(){et[k.Z_](Te)})},update:Ve},$e[k.nE]=function(){Ye(ut,ve(),function(Te){Te.iterate(function(et){et[k.nE]&&et[k.nE]()})},null)},$e[k.Mf]=function(){Ye(ut,ve(),function(Te){Te.iterate(function(et){et[k.Mf]&&et[k.Mf]()})},null)},$e[k.vE]=Ge,$e.getChannel=_t,$e.flush=function(Te,et,Oe,dt){var O=1,un=!1,_=null;dt=dt||5e3;function ue(){O--,un&&O===0&&(_&&(clearTimeout(_),_=null),et&&et(un),et=null)}return s(ue,"doCallback"),Ye(ut,ve(),function(ke){ke.iterate(function(Qe){if(Qe.flush){O++;var yt=!1;Qe.flush(Te,function(){yt=!0,ue()},Oe)||yt||(Te&&_==null?_=setTimeout(function(){_=null,ue()},dt):ue())}})},function(){un=!0,ue()}),!0},$e._setQueue=function(Te){ut=Te},$e);return Ut}s(Ct,"createChannelControllerPlugin");function Re(ut,ot,$e,ve){var Ye=[];if(ut&&(0,D.tO)(ut,function(Ge){return We(Ye,Ge,$e,ve)}),ot){var Ve=[];(0,D.tO)(ot,function(Ge){Ge.priority>xe&&Ve.push(Ge)}),We(Ye,Ve,$e,ve)}return Ye}s(Re,"createChannelQueues");var z=f(63),qe=function(ut){(0,K.ne)(ot,ut);function ot(){var $e=ut.call(this)||this;$e.identifier="TelemetryInitializerPlugin",$e.priority=199;var ve,Ye;Ve(),(0,Ee.Z)(ot,$e,function(Ge,_t){Ge.addTelemetryInitializer=function(Nt){var Ut={id:ve++,fn:Nt};Ye.push(Ut);var Te={remove:function(){(0,D.tO)(Ye,function(et,Oe){if(et.id===Ut.id)return Ye.splice(Oe,1),-1})}};return Te},Ge.processTelemetry=function(Nt,Ut){for(var Te=!1,et=Ye.length,Oe=0;Oe<et;++Oe){var dt=Ye[Oe];if(dt)try{if(dt.fn.apply(null,[Nt])===!1){Te=!0;break}}catch(O){(0,A.kP)(Ut.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,D.jj)(O),{exception:(0,Q.eU)(O)},!0)}}Te||Ge.processNext(Nt,Ut)},Ge[k.Ho]=function(){Ve()}});function Ve(){ve=0,Ye=[]}return s(Ve,"_initDefaults"),$e}return s(ot,"TelemetryInitializerPlugin"),ot}(z.i),I=f(883),$=f(310),N="Plugins must provide initialize method",ae="_notificationManager",lt="SDK is still unloading...",Je="SDK is not initialized",Qt={loggingLevelConsole:1};function Yt(ut,ot){return new j.Jk(ot)}s(Yt,"_createPerfManager");function ne(ut,ot,$e){var ve=[],Ye={};return(0,D.tO)($e,function(Ve){((0,D.le)(Ve)||(0,D.le)(Ve.initialize))&&(0,D._y)(N);var Ge=Ve.priority,_t=Ve.identifier;Ve&&Ge&&((0,D.le)(Ye[Ge])?Ye[Ge]=_t:(0,A.jV)(ut,"Two extensions have same priority #"+Ge+" - "+Ye[Ge]+", "+_t)),(!Ge||Ge<ot)&&ve.push(Ve)}),{all:$e,core:ve}}s(ne,"_validateExtensions");function be(ut,ot){var $e=!1;return(0,D.tO)(ot,function(ve){if(ve===ut)return $e=!0,-1}),$e}s(be,"_isPluginPresent");function Ne(){var ut;return(0,re.pu)((ut={},ut[k.dV]=function(ot){},ut[k.XP]=function(ot){},ut[k.eO]=function(ot){},ut[k.H4]=function(ot,$e){},ut[k.rX]=function(ot,$e){},ut))}s(Ne,"_createDummyNotificationManager");var Lt=function(){function ut(){var ot,$e,ve,Ye,Ve,Ge,_t,Nt,Ut,Te,et,Oe,dt,O,un,_,ue,ke,Qe,yt=0;(0,Ee.Z)(ut,this,function(J){He(),J.isInitialized=function(){return ot},J.initialize=function(ee,At,bt,it){dt&&(0,D._y)(lt),J.isInitialized()&&(0,D._y)("Core should not be initialized more than once"),(!ee||(0,D.le)(ee.instrumentationKey))&&(0,D._y)("Please provide instrumentation key"),ve=it,J[ae]=it,J.config=ee||{},qt(ee),nn(ee),ee.extensions=(0,D.le)(ee.extensions)?[]:ee.extensions,En(ee),bt&&(J.logger=bt),Nt=[],Nt.push.apply(Nt,(0,K.$h)((0,K.$h)([],At,!1),ee.extensions,!1)),et=(ee||{}).channels,Ue(ee,null),(!Oe||Oe.length===0)&&(0,D._y)("No channels available"),ot=!0,J.releaseQueue()},J.getTransmissionControls=function(){var ee=[];return Oe&&(0,D.tO)(Oe,function(At){ee.push(At.queue)}),(0,D.FL)(ee)},J.track=function(ee){(0,D.sO)(ee,X.z,J.config.instrumentationKey,null,D.F),(0,D.sO)(ee,"time",(0,D.Y6)(new Date),null,D.F),(0,D.sO)(ee,"ver","4.0",null,D.le),!dt&&J.isInitialized()?St().processNext(ee):$e.push(ee)},J.getProcessTelContext=St,J.getNotifyMgr=function(){return ve||(ve=Ne(),J[ae]=ve),ve},J[k.dV]=function(ee){ve&&ve[k.dV](ee)},J[k.XP]=function(ee){ve&&ve[k.XP](ee)},J.getCookieMgr=function(){return Ge||(Ge=(0,V.Nz)(J.config,J.logger)),Ge},J.setCookieMgr=function(ee){Ge=ee},J.getPerfMgr=function(){return!Ye&&!Ve&&J.config&&J.config.enablePerfMgr&&(0,D.mf)(J.config.createPerfMgr)&&(Ve=J.config.createPerfMgr(J,J.getNotifyMgr())),Ye||Ve||(0,j.j5)()},J.setPerfMgr=function(ee){Ye=ee},J.eventCnt=function(){return $e.length},J.releaseQueue=function(){if(ot&&$e.length>0){var ee=$e;$e=[],(0,D.tO)(ee,function(At){St().processNext(At)})}},J.pollInternalLogs=function(ee){un=ee||null;var At=J.config.diagnosticLogInterval;return(!At||!(At>0))&&(At=1e4),yt&&clearInterval(yt),yt=setInterval(function(){tt()},At),yt},J.stopPollingInternalLogs=function(){yt&&(clearInterval(yt),yt=0,tt())},(0,D.Vb)(J,function(){return O},["addTelemetryInitializer"]),J.unload=function(ee,At,bt){ee===void 0&&(ee=!0),ot||(0,D._y)(Je),dt&&(0,D._y)(lt);var it={reason:50,isAsync:ee,flushComplete:!1},zt=(0,De.Bt)(Dt(),J);zt.onComplete(function(){He(),At&&At(it)},J);function Kt(Vt){it.flushComplete=Vt,dt=!0,ue.run(zt,it),J.stopPollingInternalLogs(),zt.processNext(it)}s(Kt,"_doUnload"),$t(ee,Kt,6,bt)||Kt(!1)},J.getPlugin=Ie,J.addPlugin=function(ee,At,bt,it){if(!ee){it&&it(!1),pn(N);return}var zt=Ie(ee.identifier);if(zt&&!At){it&&it(!1),pn("Plugin ["+ee.identifier+"] is already loaded!");return}var Kt={reason:16};function Vt(rn){Nt.push(ee),Kt.added=[ee],Ue(J.config,Kt),it&&it(!0)}if(s(Vt,"_addPlugin"),zt){var dn=[zt.plugin],Bt={reason:2,isAsync:!!bt};It(dn,Bt,function(rn){rn?(Kt.removed=dn,Kt.reason|=32,Vt(!0)):it&&it(!1)})}else Vt(!1)},J.evtNamespace=function(){return _},J.flush=$t,J.getTraceCtx=function(ee){return Qe||(Qe=(0,Pe.Yn)()),Qe},J.setTraceCtx=function(ee){Qe=ee||null},(0,D.Oi)(J,"addUnloadCb",function(){return ue},"add");function He(){ot=!1,J.config=(0,D.mm)(!0,{},Qt),J.logger=new A.AQ(J.config),J._extensions=[],O=new qe,$e=[],ve=null,Ye=null,Ve=null,Ge=null,_t=null,Ut=null,Nt=[],Te=null,et=null,Oe=null,dt=!1,un=null,_=(0,I.J)("AIBaseCore",!0),ue=(0,$.Y)(),Qe=null}s(He,"_initDefaults");function St(){return(0,De.CD)(Dt(),J.config,J)}s(St,"_createTelCtx");function Ue(ee,At){var bt=ne(J.logger,xe,Nt);Ut=bt.core,_t=null;var it=bt.all;if(Oe=(0,D.FL)(Re(et,it,ee,J)),Te){var zt=(0,D.UA)(it,Te);zt!==-1&&it.splice(zt,1),zt=(0,D.UA)(Ut,Te),zt!==-1&&Ut.splice(zt,1),Te._setQueue(Oe)}else Te=Ct(Oe,J);it.push(Te),Ut.push(Te),J._extensions=(0,Pe.AA)(it),Te.initialize(ee,J,it),(0,Pe.bP)(St(),it),J._extensions=(0,D.FL)((0,Pe.AA)(Ut||[])).slice(),At&&$n(At)}s(Ue,"_initPluginChain");function Ie(ee){var At=null,bt=null;return(0,D.tO)(J._extensions,function(it){if(it.identifier===ee&&it!==Te&&it!==O)return bt=it,-1}),!bt&&Te&&(bt=Te.getChannel(ee)),bt&&(At={plugin:bt,setEnabled:function(it){(0,Pe.OY)(bt)[k.C0]=!it},isEnabled:function(){var it=(0,Pe.OY)(bt);return!it[k.vE]&&!it[k.C0]},remove:function(it,zt){it===void 0&&(it=!0);var Kt=[bt],Vt={reason:1,isAsync:it};It(Kt,Vt,function(dn){dn&&Ue(J.config,{reason:32,removed:Kt}),zt&&zt(dn)})}}),At}s(Ie,"_getPlugin");function Dt(){if(!_t){var ee=(Ut||[]).slice();(0,D.UA)(ee,O)===-1&&ee.push(O),_t=(0,De.jV)((0,Pe.AA)(ee),J.config,J)}return _t}s(Dt,"_getPluginChain");function It(ee,At,bt){if(ee&&ee.length>0){var it=(0,De.jV)(ee,J.config,J),zt=(0,De.Bt)(it,J);zt.onComplete(function(){var Kt=!1,Vt=[];(0,D.tO)(Nt,function(Bt,rn){be(Bt,ee)?Kt=!0:Vt.push(Bt)}),Nt=Vt;var dn=[];et&&((0,D.tO)(et,function(Bt,rn){var yn=[];(0,D.tO)(Bt,function(Ln){be(Ln,ee)?Kt=!0:yn.push(Ln)}),dn.push(yn)}),et=dn),bt&&bt(Kt)}),zt.processNext(At)}else bt(!1)}s(It,"_removePlugins");function tt(){var ee=J.logger?J.logger.queue:[];ee&&((0,D.tO)(ee,function(At){var bt={name:un||"InternalMessageId: "+At.messageId,iKey:J.config.instrumentationKey,time:(0,D.Y6)(new Date),baseType:A.lQ.dataType,baseData:{message:At.message}};J.track(bt)}),ee.length=0)}s(tt,"_flushInternalLogs");function $t(ee,At,bt,it){return Te?Te.flush(ee,At,bt||6,it):(At&&At(!1),!0)}s($t,"_flushChannels");function qt(ee){ee.disableDbgExt===!0&&ke&&(ve[k.XP](ke),ke=null),ve&&!ke&&ee.disableDbgExt!==!0&&(ke=(0,G.p)(ee),ve[k.dV](ke))}s(qt,"_initDebugListener");function nn(ee){!ee.enablePerfMgr&&Ve&&(Ve=null),ee.enablePerfMgr&&(0,D.sO)(J.config,"createPerfMgr",Yt)}s(nn,"_initPerfManager");function En(ee){var At=(0,D.qK)(ee,X.F);At.NotificationManager=ve}s(En,"_initExtConfig");function $n(ee){var At=(0,De.xy)(Dt(),J);(!J._updateHook||J._updateHook(At,ee)!==!0)&&At.processNext(ee)}s($n,"_doUpdate");function pn(ee){var At=J.logger;At?(0,A.kP)(At,2,73,ee):(0,D._y)(ee)}s(pn,"_logOrThrowError")})}return s(ut,"BaseCore"),ut}();function rt(ut,ot,$e,ve){(0,D.tO)(ut,function(Ye){if(Ye&&Ye[ot])if($e)setTimeout(function(){return ve(Ye)},0);else try{ve(Ye)}catch(Ve){}})}s(rt,"_runListeners");var Z=function(){function ut(ot){this.listeners=[];var $e=!!(ot||{}).perfEvtsSendAll;(0,Ee.Z)(ut,this,function(ve){ve[k.dV]=function(Ye){ve.listeners.push(Ye)},ve[k.XP]=function(Ye){for(var Ve=(0,D.UA)(ve.listeners,Ye);Ve>-1;)ve.listeners.splice(Ve,1),Ve=(0,D.UA)(ve.listeners,Ye)},ve[k.eO]=function(Ye){rt(ve.listeners,k.eO,!0,function(Ve){Ve[k.eO](Ye)})},ve[k.H4]=function(Ye,Ve){rt(ve.listeners,k.H4,!0,function(Ge){Ge[k.H4](Ye,Ve)})},ve[k.rX]=function(Ye,Ve){rt(ve.listeners,k.rX,Ve,function(Ge){Ge[k.rX](Ye,Ve)})},ve[k.SN]=function(Ye){Ye&&($e||!Ye.isChildEvt())&&rt(ve.listeners,k.SN,!1,function(Ve){Ye.isAsync?setTimeout(function(){return Ve[k.SN](Ye)},0):Ve[k.SN](Ye)})}})}return s(ut,"NotificationManager"),ut}(),_e=function(ut){(0,K.ne)(ot,ut);function ot(){var $e=ut.call(this)||this;return(0,Ee.Z)(ot,$e,function(ve,Ye){ve.initialize=function(_t,Nt,Ut,Te){Ye.initialize(_t,Nt,Ut||new A.AQ(_t),Te||new Z(_t))},ve.track=function(_t){(0,j.Lm)(ve.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){_t===null&&(Ge(_t),(0,D._y)("Invalid telemetry item")),Ve(_t),Ye.track(_t)},function(){return{item:_t}},!_t.sync)};function Ve(_t){(0,D.le)(_t.name)&&(Ge(_t),(0,D._y)("telemetry name required"))}s(Ve,"_validateTelemetryItem");function Ge(_t){var Nt=ve.getNotifyMgr();Nt&&Nt.eventsDiscarded([_t],2)}s(Ge,"_notifyInvalidEvent")}),$e}return s(ot,"AppInsightsCore"),ot}(Lt),Me=f(599),B="version",me="properties",ye=function(ut){(0,K.ne)(ot,ut);function ot(){var $e=ut.call(this)||this;return $e.pluginVersionStringArr=[],$e.pluginVersionString="",(0,Ee.Z)(ot,$e,function(ve,Ye){(!ve.logger||!ve.logger.queue)&&(ve.logger=new A.AQ({loggingLevelConsole:1})),ve.initialize=function(Ve,Ge,_t,Nt){(0,j.Lm)(ve,function(){return"AppInsightsCore.initialize"},function(){if(Ve){Ve.endpointUrl||(Ve.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var Ut=Ve.propertyStorageOverride;if(Ut&&(!Ut.getProperty||!Ut.setProperty))throw new Error("Invalid property storage override passed.");Ve.channels&&(0,D.tO)(Ve.channels,function(Oe){Oe&&(0,D.tO)(Oe,function(dt){if(dt.identifier&&dt.version){var O=dt.identifier+"="+dt.version;ve.pluginVersionStringArr.push(O)}})})}ve.getWParam=function(){return typeof document!="undefined"?0:-1},Ge&&(0,D.tO)(Ge,function(Oe){if(Oe&&Oe.identifier&&Oe.version){var dt=Oe.identifier+"="+Oe.version;ve.pluginVersionStringArr.push(dt)}}),ve.pluginVersionString=ve.pluginVersionStringArr.join(";");try{Ye.initialize(Ve,Ge,_t,Nt),ve.pollInternalLogs("InternalLog")}catch(Oe){var Te=ve.logger,et=(0,Q.eU)(Oe);et.indexOf("channels")!==-1&&(et+=`
 - Channels must be provided through config.channels only!`),Te.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+et)}},function(){return{config:Ve,extensions:Ge,logger:_t,notificationManager:Nt}})},ve.track=function(Ve){(0,j.Lm)(ve,function(){return"AppInsightsCore.track"},function(){var Ge=Ve;if(Ge){Ge.timings=Ge.timings||{},Ge.timings.trackStart=(0,Me.hK)(),(0,Me.r7)(Ge.latency)||(Ge.latency=1);var _t=Ge.ext=Ge.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=Me.vs;var Nt=Ge.baseData=Ge.baseData||{};Nt[me]||(Nt[me]={});var Ut=Nt[me];Ut[B]||(Ut[B]=""),ve.pluginVersionString!==""&&(Ut[B]=ve.pluginVersionString)}Ye.track(Ge)},function(){return{item:Ve}},!Ve.sync)}}),$e}return s(ot,"AppInsightsCore"),ot}(_e);const ct=ye;var at=function(ut){(0,K.ne)(ot,ut);function ot(){var $e=ut.call(this)||this;return(0,Ee.Z)(ot,$e,function(ve,Ye){ve.initialize=function(Ve,Ge,_t,Nt){Ve&&!Ve.endpointUrl&&(Ve.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),ve.getWParam=function(){return Me.x9?0:-1};try{Ye.initialize(Ve,Ge,_t,Nt)}catch(Ut){(0,A.kP)(ve.logger,1,514,"Initialization Failed: "+(0,Q.eU)(Ut)+`
 - Note: Channels must be provided through config.channels only`)}},ve.track=function(Ve){var Ge=Ve;if(Ge){var _t=Ge.ext=Ge.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=Me.vs}Ye.track(Ge)}}),$e}return s(ot,"BaseCore"),ot}(Lt);const Pt=at;var mt=D.mf;function cn(ut,ot,$e){return function(ve){ut[ot]=ve,$e()}}s(cn,"_createPromiseAllOnResolvedFunction");var mn=function(){function ut(ot){var $e=0,ve=null,Ye=[];(0,Ee.Z)(ut,this,function(Ut){Ut.then=function(Te,et){return new ut(function(Oe,dt){Ve(Te,et,Oe,dt)})},Ut.catch=function(Te){return Ut.then(null,Te)}});function Ve(Ut,Te,et,Oe){Ye.push(function(){var dt;try{$e===1?dt=mt(Ut)?Ut(ve):ve:dt=mt(Te)?Te(ve):ve,dt instanceof ut?dt.then(et,Oe):$e===2&&!mt(Te)?Oe(dt):et(dt)}catch(O){Oe(O);return}}),$e!==0&&Ge()}s(Ve,"_enqueue");function Ge(){if(Ye.length>0){var Ut=Ye.slice();Ye=[],setTimeout(function(){for(var Te=0,et=Ut.length;Te<et;++Te)try{Ut[Te]()}catch(Oe){}},0)}}s(Ge,"_processQueue");function _t(Ut){$e===0&&(ve=Ut,$e=1,Ge())}s(_t,"_resolve");function Nt(Ut){$e===0&&(ve=Ut,$e=2,Ge())}s(Nt,"_reject"),s(function(){if(!mt(ot))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ot(_t,Nt)}catch(Te){Nt(Te)}},"_initialize")()}return s(ut,"ESPromise"),ut.resolve=function(ot){return ot instanceof ut?ot:ot&&mt(ot.then)?new ut(function($e,ve){try{ot.then($e,ve)}catch(Ye){ve(Ye)}}):new ut(function($e){$e(ot)})},ut.reject=function(ot){return new ut(function($e,ve){ve(ot)})},ut.all=function(ot){if(!(!ot||!ot.length))return new ut(function($e,ve){try{for(var Ye=[],Ve=0,Ge=0;Ge<ot.length;Ge++){var _t=ot[Ge];_t&&mt(_t.then)?(Ve++,_t.then(cn(Ye,Ge,function(){--Ve==0&&$e(Ye)}),ve)):Ye[Ge]=_t}Ve===0&&setTimeout(function(){$e(Ye)},0)}catch(Nt){ve(Nt)}})},ut.race=function(ot){return new ut(function($e,ve){if(!(!ot||!ot.length))try{for(var Ye=s(function(Ge){var _t=ot[Ge];_t&&mt(_t.then)?_t.then($e,ve):setTimeout(function(){$e(_t)},0)},"_loop_1"),Ve=0;Ve<ot.length;Ve++)Ye(Ve)}catch(Ge){ve(Ge)}})},ut}();const xt=mn;var Ht=6e5,Xt=0,ce=[],tr=[],Xr=[];function cr(){return new Date().getTime()}s(cr,"_getTime");var Jr=function(){function ut(ot,$e){var ve=0,Ye=(ot||"<unnamed>")+"."+Xt;Xt++,(0,Ee.Z)(ut,this,function(_t){var Nt=null,Ut=0;_t.scheduleEvent=function(et,Oe,dt){var O=Ye+"."+Ut;Ut++,Oe&&(O+="-("+Oe+")");var un=O+"{"+ve+"}";ve++;var _={evt:null,tm:cr(),id:un,isRunning:!1,isAborted:!1};return Nt?_.evt=St(_,Nt):_.evt=He(_),Nt=_,Nt.evt._schId=un,_.evt;function ue(Ue){for(var Ie=cr(),Dt=Ie-Ht,It=Ue.length,tt=0;tt<It;){var $t=Ue[tt];if($t&&$t.tm<Dt){var qt=null;$t.abort?(qt="Aborting ["+$t.id+"] due to Excessive runtime ("+(Ie-$t.tm)+" ms)",$t.abort(qt)):qt="Removing ["+$t.id+"] due to Excessive runtime ("+(Ie-$t.tm)+" ms)",Ge(qt),Ue.splice(tt,1),It--}else tt++}}s(ue,"_abortAndRemoveOldEvents");function ke(Ue,Ie){var Dt=!1,It=Te(ce,Ue);if(It||(It=Te(Xr,Ue),Dt=!0),It){It.to&&(clearTimeout(It.to),It.to=null);var tt=cr()-It.tm;Ie?Dt?Ge("Timed out event ["+Ue+"] finally complete -- "+tt+" ms"):Ve("Promise ["+Ue+"] Complete -- "+tt+" ms"):(Xr.push(It),Ge("Event ["+Ue+"] Timed out and removed -- "+tt+" ms"))}else Ve("Failed to remove ["+Ue+"] from running queue");Nt&&Nt.id===Ue&&(Nt=null),ue(ce),ue(tr),ue(Xr)}s(ke,"_cleanup");function Qe(Ue,Ie){return function(Dt){return ke(Ue,!0),Ie&&Ie(Dt),Dt}}s(Qe,"_removeScheduledEvent");function yt(Ue,Ie,Dt,It){Ie.then(function(tt){return tt instanceof xt?(Ve("Event ["+Ue+"] returned a promise -- waiting"),yt(Ue,tt,Dt,It),tt):Qe(Ue,Dt)(tt)},Qe(Ue,It))}s(yt,"_waitForFinalResult");function J(Ue,Ie){var Dt=Ue.id;return new xt(function(It,tt){Ve("Event ["+Dt+"] Starting -- waited for "+(Ue.wTm||"--")+" ms"),Ue.isRunning=!0,Ue.abort=function(qt){Ue.abort=null,Ue.isAborted=!0,ke(Dt,!1),tt(new Error(qt))};var $t=Ie(Dt);$t instanceof xt?(dt&&(Ue.to=setTimeout(function(){ke(Dt,!1),tt(new Error("Timed out after ["+dt+"] ms"))},dt)),yt(Dt,$t,function(qt){Ve("Event ["+Dt+"] Resolving after "+(cr()-Ue.tm)+" ms"),It(qt)},tt)):(Ve("Promise ["+Dt+"] Auto completed as the start action did not return a promise"),It())})}s(J,"_createScheduledEvent");function He(Ue){var Ie=cr();return Ue.wTm=Ie-Ue.tm,Ue.tm=Ie,Ue.isAborted?xt.reject(new Error("["+O+"] was aborted")):(ce.push(Ue),J(Ue,et))}s(He,"_startWaitingEvent");function St(Ue,Ie){var Dt=new xt(function(It,tt){var $t=cr()-Ie.tm,qt=Ie.id;Ve("["+O+"] is waiting for ["+qt+":"+$t+" ms] to complete before starting -- ["+tr.length+"] waiting and ["+ce.length+"] running"),Ue.abort=function(nn){Ue.abort=null,Te(tr,O),Ue.isAborted=!0,tt(new Error(nn))},Ie.evt.then(function(nn){Te(tr,O),He(Ue).then(It,tt)},function(nn){Te(tr,O),He(Ue).then(It,tt)})});return tr.push(Ue),Dt}s(St,"_waitForPreviousEvent")};function Te(et,Oe){for(var dt=0;dt<et.length;dt++)if(et[dt].id===Oe)return et.splice(dt,1)[0];return null}s(Te,"_removeQueuedEvent")});function Ve(_t){var Nt=(0,re.Rd)();Nt&&Nt.QUnit&&console&&console.log("ESPromiseScheduler["+Ye+"] "+_t)}s(Ve,"_debugLog");function Ge(_t){$e&&$e.warnToConsole("ESPromiseScheduler["+Ye+"] "+_t)}s(Ge,"_warnLog")}return s(ut,"ESPromiseScheduler"),ut.incomplete=function(){return ce},ut.waitingToStart=function(){return tr},ut}();const Yr=Jr;var pi=function(){function ut(ot){var $e=this,ve={},Ye=[],Ve=[];ot&&Ve.push(ot);function Ge(Te,et){var Oe,dt=ve[Te];if(dt&&(Oe=dt[et]),!Oe&&Oe!==null){if((0,D.HD)(Te)&&(0,D.HD)(et))if(Ve.length>0){for(var O=0;O<Ve.length;O++)if(Ve[O].handleField(Te,et)){Oe={canHandle:!0,fieldHandler:Ve[O]};break}}else Ye.length===0&&(Oe={canHandle:!0});if(!Oe&&Oe!==null){Oe=null;for(var O=0;O<Ye.length;O++)if(Ye[O].handleField(Te,et)){Oe={canHandle:!0,handler:Ye[O],fieldHandler:null};break}}dt||(dt=ve[Te]={}),dt[et]=Oe}return Oe}s(Ge,"_getFieldSanitizer"),$e.addSanitizer=function(Te){Te&&(Ye.push(Te),ve={})},$e.addFieldSanitizer=function(Te){Te&&(Ve.push(Te),ve={})},$e.handleField=function(Te,et){var Oe=Ge(Te,et);return Oe?Oe.canHandle:!1},$e.value=function(Te,et,Oe,dt){var O=Ge(Te,et);if(O&&O.canHandle){if(!O||!O.canHandle)return null;if(O.handler)return O.handler.value(Te,et,Oe,dt);if(!(0,D.HD)(et)||(0,D.le)(Oe)||Oe==="")return null;var un=null,_=(0,Me.Sy)(Oe);if((_&8192)==8192){var ue=_&~8192;if(un=Oe,!(0,Me.Sn)(un.value)||ue!==1&&ue!==2&&ue!==3&&(ue&4096)!=4096)return null}else _===1||_===2||_===3||(_&4096)==4096?un=Nt(Te,et,Oe):_===4&&(un=Nt(Te,et,dt?JSON.stringify(Oe):Oe));if(un)return _t(O,Te,et,_,un,dt)}return null},$e.property=function(Te,et,Oe,dt){var O=Ge(Te,et);if(!O||!O.canHandle||!(0,D.HD)(et)||(0,D.le)(Oe)||!(0,Me.Sn)(Oe.value))return null;var un=(0,Me.Sy)(Oe.value);return un===0?null:_t(O,Te,et,un,Oe,dt)};function _t(Te,et,Oe,dt,O,un){if(Te.handler)return Te.handler.property(et,Oe,O,un);if(!(0,D.le)(O.kind)){if((dt&4096)==4096||!(0,Me.oS)(O.kind))return null;O.value=O.value.toString()}return Ut(Te.fieldHandler,et,Oe,dt,O)}s(_t,"_handleProperty");function Nt(Te,et,Oe){return(0,Me.Sn)(Oe)?{value:Oe}:null}s(Nt,"_convertToProperty");function Ut(Te,et,Oe,dt,O){if(O&&Te){var un=Te.getSanitizer(et,Oe,dt,O.kind,O.propertyType);if(un)if(dt===4){var _={},ue=O.value;(0,D.rW)(ue,function(Qe,yt){var J=et+"."+Oe;if((0,Me.Sn)(yt)){var He=Nt(J,Qe,yt);He=Ut(Te,J,Qe,(0,Me.Sy)(yt),He),He&&(_[Qe]=He.value)}}),O.value=_}else{var ke={path:et,name:Oe,type:dt,prop:O,sanitizer:$e};O=un.call($e,ke)}}return O}s(Ut,"_callFieldSanitizer")}return s(ut,"ValueSanitizer"),ut.getFieldType=Me.Sy,ut}(),qn=100,Wr=f(928),Pr=f(843),Gn=f(869),$r=f(878),ur=f(392),Tn=f(206)},599:(Ft,de,f)=>{"use strict";f.d(de,{Gf:()=>we,vs:()=>Ae,x9:()=>De,dH:()=>Pe,Sn:()=>V,jM:()=>X,IZ:()=>G,r7:()=>k,yj:()=>xe,Vv:()=>H,oF:()=>We,d8:()=>Ct,kT:()=>Re,ej:()=>z,Do:()=>qe,cm:()=>I,l7:()=>$,hK:()=>N,oS:()=>ae,JT:()=>Qt,if:()=>Yt,Sy:()=>ne,cQ:()=>be,Tr:()=>Ne,mJ:()=>Lt,ot:()=>rt});var K=f(392),M=f(91),D=f(630),U=f(708),pe=f(242),oe=f(843),W=f(869),Se=f(878),je,we="3.2.3",Ae="1DS-Web-JS-"+we,A="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",j="withCredentials",Q="timeout",re=(je={},je[0]=0,je[2]=6,je[1]=1,je[3]=7,je[4096|2]=6,je[4096|1]=1,je[4096|3]=7,je),Ee=null,De=Boolean((0,D.Me)()),Pe=Boolean((0,D.Jj)());function V(Z){return!(Z===""||(0,U.le)(Z))}s(V,"isValueAssigned");function X(Z){if(Z){var _e=Z.indexOf("-");if(_e>-1)return Z.substring(0,_e)}return""}s(X,"getTenantId");function G(){return Ee===null&&(Ee=!(0,U.o8)(Uint8Array)&&!Je()&&!(0,D.b$)()),Ee}s(G,"isUint8ArrayAvailable");function k(Z){return!!(Z&&(0,U.hj)(Z)&&Z>=1&&Z<=4)}s(k,"isLatency");function xe(Z,_e,Me){if(!_e&&!V(_e)||typeof Z!="string")return null;var B=typeof _e;if(B==="string"||B==="number"||B==="boolean"||(0,U.kJ)(_e))_e={value:_e};else if(B==="object"&&!_e.hasOwnProperty("value"))_e={value:Me?JSON.stringify(_e):_e};else if((0,U.le)(_e.value)||_e.value===""||!(0,U.HD)(_e.value)&&!(0,U.hj)(_e.value)&&!(0,U.jn)(_e.value)&&!(0,U.kJ)(_e.value))return null;if((0,U.kJ)(_e.value)&&!Qt(_e.value))return null;if(!(0,U.le)(_e.kind)){if((0,U.kJ)(_e.value)||!ae(_e.kind))return null;_e.value=_e.value.toString()}return _e}s(xe,"sanitizeProperty");function H(Z,_e,Me){var B=-1;if(!(0,U.o8)(Z))if(_e>0&&(_e===32?B=1<<13:_e<=13&&(B=_e<<5)),lt(Me))B===-1&&(B=0),B|=Me;else{var me=re[ne(Z)]||-1;B!==-1&&me!==-1?B|=me:me===6&&(B=me)}return B}s(H,"getCommonSchemaMetaData");function We(){(0,pe.JP)(null).setEnabled(!1)}s(We,"disableCookies");function Ct(Z,_e,Me){(0,pe.p7)(null)&&(0,pe.JP)(null).set(Z,_e,Me*86400,null,"/")}s(Ct,"setCookie");function Re(Z){(0,pe.p7)(null)&&(0,pe.JP)(null).del(Z)}s(Re,"deleteCookie");function z(Z){return(0,pe.p7)(null)?qe((0,pe.JP)(null),Z):""}s(z,"getCookie");function qe(Z,_e,Me){Me===void 0&&(Me=!0);var B;return Z&&(B=Z.get(_e),Me&&B&&decodeURIComponent&&(B=decodeURIComponent(B))),B||""}s(qe,"getCookieValue");function I(Z){Z===void 0&&(Z="D");var _e=(0,oe.GW)();return Z==="B"?_e="{"+_e+"}":Z==="P"?_e="("+_e+")":Z==="N"&&(_e=_e.replace(/-/g,"")),_e}s(I,"createGuid");function $(Z,_e,Me,B,me){var ye={},ct=!1,at=0,Pt=arguments.length,mt=Object[K.hB],cn=arguments;for(mt.toString.call(cn[0])==="[object Boolean]"&&(ct=cn[0],at++);at<Pt;at++){var Z=cn[at];(0,U.rW)(Z,function(xt,Ht){ct&&Ht&&(0,U.Kn)(Ht)?(0,U.kJ)(Ht)?(ye[xt]=ye[xt]||[],(0,U.tO)(Ht,function(Xt,ce){Xt&&(0,U.Kn)(Xt)?ye[xt][ce]=$(!0,ye[xt][ce],Xt):ye[xt][ce]=Xt})):ye[xt]=$(!0,ye[xt],Ht):ye[xt]=Ht})}return ye}s($,"extend");var N=oe.Jj;function ae(Z){return Z===0||Z>0&&Z<=13||Z===32}s(ae,"isValueKind");function lt(Z){return Z>=0&&Z<=9}s(lt,"isDataType");function Je(){var Z=(0,D.jW)();if(!(0,U.o8)(Z)&&Z.userAgent){var _e=Z.userAgent.toLowerCase();if((_e.indexOf("safari")>=0||_e.indexOf("firefox")>=0)&&_e.indexOf("chrome")<0)return!0}return!1}s(Je,"isSafariOrFirefox");function Qt(Z){return Z.length>0}s(Qt,"isArrayValid");function Yt(Z,_e){var Me=Z;Me.timings=Me.timings||{},Me.timings.processTelemetryStart=Me.timings.processTelemetryStart||{},Me.timings.processTelemetryStart[_e]=N()}s(Yt,"setProcessTelemetryTimings");function ne(Z){var _e=0;if(Z!=null){var Me=typeof Z;Me==="string"?_e=1:Me==="number"?_e=2:Me==="boolean"?_e=3:Me===K.fK&&(_e=4,(0,U.kJ)(Z)?(_e=4096,Z.length>0&&(_e|=ne(Z[0]))):(0,U.nr)(Z,"value")&&(_e=8192|ne(Z.value)))}return _e}s(ne,"getFieldValueType");var be={Version:we,FullVersionString:Ae,strUndefined:K.jA,strObject:K.fK,Undefined:K.jA,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,objKeys:U.FY,toISOString:U.Y6,isReactNative:D.b$,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,isFunction:U.mf,isArray:U.kJ,isObject:U.Kn,strTrim:U.nd,isDocumentObjectAvailable:De,isWindowObjectAvailable:Pe,isValueAssigned:V,getTenantId:X,isBeaconsSupported:D.MF,isUint8ArrayAvailable:G,isLatency:k,sanitizeProperty:xe,getISOString:U.Y6,useXDomainRequest:D.cp,getCommonSchemaMetaData:H,cookieAvailable:pe.p7,disallowsSameSiteNone:pe.UY,setCookie:Ct,deleteCookie:Re,getCookie:z,createGuid:I,extend:$,getTime:N,isValueKind:ae,isArrayValid:Qt,objDefineAccessors:U.l_,addPageUnloadEventListener:W.c9,setProcessTelemetryTimings:Yt,addEventHandler:W.Ib,getFieldValueType:ne,strEndsWith:U.Id,objForEachKey:U.rW},Ne={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:M.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:W.Ib,dateNow:U.m6,isIE:D.w1,disableCookies:We,newGuid:oe.GW,perfNow:oe.Jj,newId:Se.pZ,randomValue:Se.az,random32:Se._l,mwcRandomSeed:Se.CN,mwcRandom32:Se.F6,generateW3CId:oe.DO};function Lt(){return!!(0,D.a8)("chrome")}s(Lt,"isChromium");function rt(Z,_e,Me,B,me,ye){B===void 0&&(B=!1),me===void 0&&(me=!1);function ct(Pt,mt,cn){try{Pt[mt]=cn}catch(mn){}}s(ct,"_wrapSetXhrProp");var at=new XMLHttpRequest;return B&&ct(at,A,B),Me&&ct(at,j,Me),at.open(Z,_e,!me),Me&&ct(at,j,Me),!me&&ye&&ct(at,Q,ye),at}s(rt,"openXhr")},156:(Ft,de,f)=>{"use strict";f.r(de),f.d(de,{BE_PROFILE:()=>Q,NRT_PROFILE:()=>j,PostChannel:()=>J,RT_PROFILE:()=>A});var K=f(88),M=f(679),D=f(288),U=f(869),pe=f(883),oe=f(599),W=f(708),Se=f(630),je=f(928),we=f(18),Ae=f(63),A="REAL_TIME",j="NEAR_REAL_TIME",Q="BEST_EFFORT",re="POST",Ee="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",De="drop",Pe="send",V="requeue",X="rspFail",G="oth",k="no-cache, no-store",xe="application/x-json-stream",H="cache-control",We="content-type",Ct="kill-tokens",Re="kill-duration",z="kill-duration-seconds",qe="time-delta-millis",I="client-version",$="client-id",N="time-delta-to-apply-millis",ae="upload-time",lt="apikey",Je="AuthMsaDeviceTicket",Qt="AuthXToken",Yt="sdk-version",ne="NoResponseBody",be="msfpc";function Ne(He){var St=(He.ext||{}).intweb;return St&&(0,oe.Sn)(St[be])?St[be]:null}s(Ne,"_getEventMsfpc");function Lt(He){for(var St=null,Ue=0;St===null&&Ue<He.length;Ue++)St=Ne(He[Ue]);return St}s(Lt,"_getMsfpc");var rt=function(){function He(St,Ue){var Ie=Ue?[].concat(Ue):[],Dt=this,It=Lt(Ie);Dt.iKey=function(){return St},Dt.Msfpc=function(){return It||""},Dt.count=function(){return Ie.length},Dt.events=function(){return Ie},Dt.addEvent=function(tt){return tt?(Ie.push(tt),It||(It=Ne(tt)),!0):!1},Dt.split=function(tt,$t){var qt;if(tt<Ie.length){var nn=Ie.length-tt;(0,W.le)($t)||(nn=$t<nn?$t:nn),qt=Ie.splice(tt,nn),It=Lt(Ie)}return new He(St,qt)}}return s(He,"EventBatch"),He.create=function(St,Ue){return new He(St,Ue)},He}(),Z=f(392),_e=20,Me=3984588,B=65e3,me=2e6,ye=Math.min(me,B),ct="metadata",at="f",Pt=/\./,mt=function(){function He(St,Ue,Ie,Dt){var It="data",tt="baseData",$t="ext",qt=!!Dt,nn=!0,En=Ue,$n={};(0,M.Z)(He,this,function(pn){pn.createPayload=function(bt,it,zt,Kt,Vt,dn){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:bt,isTeardown:it,isSync:zt,isBeacon:Kt,sendType:dn,sendReason:Vt}},pn.appendPayload=function(bt,it,zt){var Kt=bt&&it&&!bt.overflow;return Kt&&(0,D.Lm)(St,function(){return"Serializer:appendPayload"},function(){for(var Vt=it.events(),dn=bt.payloadBlob,Bt=bt.numEvents,rn=!1,yn=[],Ln=[],Pn=bt.isBeacon,Zt=Pn?B:Me,Bn=Pn?ye:me,In=0,Xn=0;In<Vt.length;){var Nn=Vt[In];if(Nn){if(Bt>=zt){bt.overflow=it.split(In);break}var Gt=pn.getEventBlob(Nn);if(Gt&&Gt.length<=Bn){var Jn=Gt.length,vi=dn.length;if(vi+Jn>Zt){bt.overflow=it.split(In);break}dn&&(dn+=`
`),dn+=Gt,Xn++,Xn>_e&&(dn.substr(0,1),Xn=0),rn=!0,Bt++}else Gt?yn.push(Nn):Ln.push(Nn),Vt.splice(In,1),In--}In++}if(yn&&yn.length>0&&bt.sizeExceed.push(rt.create(it.iKey(),yn)),Ln&&Ln.length>0&&bt.failedEvts.push(rt.create(it.iKey(),Ln)),rn){bt.batches.push(it),bt.payloadBlob=dn,bt.numEvents=Bt;var nr=it.iKey();(0,W.UA)(bt.apiKeys,nr)===-1&&bt.apiKeys.push(nr)}},function(){return{payload:bt,theBatch:{iKey:it.iKey(),evts:it.events()},max:zt}}),Kt},pn.getEventBlob=function(bt){try{return(0,D.Lm)(St,function(){return"Serializer.getEventBlob"},function(){var it={};it.name=bt.name,it.time=bt.time,it.ver=bt.ver,it.iKey="o:"+(0,oe.jM)(bt.iKey);var zt={},Kt=bt[$t];Kt&&(it[$t]=zt,(0,W.rW)(Kt,function(Bt,rn){var yn=zt[Bt]={};At(rn,yn,"ext."+Bt,!0,null,null,!0)}));var Vt=it[It]={};Vt.baseType=bt.baseType;var dn=Vt[tt]={};return At(bt.baseData,dn,tt,!1,[tt],function(Bt,rn,yn){cn(zt,Bt,rn,yn)},nn),At(bt.data,Vt,It,!1,[],function(Bt,rn,yn){cn(zt,Bt,rn,yn)},nn),JSON.stringify(it)},function(){return{item:bt}})}catch(it){return null}};function ee(bt,it){var zt=$n[bt];return zt===void 0&&(bt.length>=7&&(zt=(0,W.xe)(bt,"ext.metadata")||(0,W.xe)(bt,"ext.web")),$n[bt]=zt),zt}s(ee,"_isReservedField");function At(bt,it,zt,Kt,Vt,dn,Bt){(0,W.rW)(bt,function(rn,yn){var Ln=null;if(yn||(0,oe.Sn)(yn)){var Pn=zt,Zt=rn,Bn=Vt,In=it;if(qt&&!Kt&&Pt.test(rn)){var Xn=rn.split("."),Nn=Xn.length;if(Nn>1){Bn&&(Bn=Bn.slice());for(var Gt=0;Gt<Nn-1;Gt++){var Jn=Xn[Gt];In=In[Jn]=In[Jn]||{},Pn+="."+Jn,Bn&&Bn.push(Jn)}Zt=Xn[Nn-1]}}var vi=Kt&&ee(Pn,Zt);if(!vi&&En&&En.handleField(Pn,Zt)?Ln=En.value(Pn,Zt,yn,Ie):Ln=(0,oe.yj)(Zt,yn,Ie),Ln){var nr=Ln.value;if(In[Zt]=nr,dn&&dn(Bn,Zt,Ln),Bt&&typeof nr=="object"&&!(0,W.kJ)(nr)){var Rr=Bn;Rr&&(Rr=Rr.slice(),Rr.push(Zt)),At(yn,nr,Pn+"."+Zt,Kt,Rr,dn,Bt)}}}})}s(At,"_processPathKeys")})}return s(He,"Serializer"),He}();function cn(He,St,Ue,Ie){if(Ie&&He){var Dt=(0,oe.Vv)(Ie.value,Ie.kind,Ie.propertyType);if(Dt>-1){var It=He[ct];It||(It=He[ct]={f:{}});var tt=It[at];if(tt||(tt=It[at]={}),St)for(var $t=0;$t<St.length;$t++){var qt=St[$t];tt[qt]||(tt[qt]={f:{}});var nn=tt[qt][at];nn||(nn=tt[qt][at]={}),tt=nn}tt=tt[Ue]={},(0,W.kJ)(Ie.value)?tt.a={t:Dt}:tt.t=Dt}}}s(cn,"_addJSONPropertyMetaData");var mn=.8,xt=1.2,Ht=3e3,Xt=6e5;function ce(He){return!(He>=300&&He<500&&He!=408&&He!=429||He==501||He==505)}s(ce,"retryPolicyShouldRetryForStatus");function tr(He){var St=0,Ue=Ht*mn,Ie=Ht*xt,Dt=Math.floor(Math.random()*(Ie-Ue))+Ue;return St=Math.pow(2,He)*Dt,Math.min(St,Xt)}s(tr,"retryPolicyGetMillisToBackoffForRetry");var Xr=1e3,cr=function(){function He(){var St={};function Ue(Ie){var Dt=[];return Ie&&(0,W.tO)(Ie,function(It){Dt.push((0,W.nd)(It))}),Dt}s(Ue,"_normalizeTenants"),(0,M.Z)(He,this,function(Ie){Ie.setKillSwitchTenants=function(Dt,It){if(Dt&&It)try{var tt=Ue(Dt.split(","));if(It==="this-request-only")return tt;for(var $t=parseInt(It,10)*Xr,qt=0;qt<tt.length;++qt)St[tt[qt]]=(0,W.m6)()+$t}catch(nn){return[]}return[]},Ie.isTenantKilled=function(Dt){var It=St,tt=(0,W.nd)(Dt);return It[tt]!==void 0&&It[tt]>(0,W.m6)()?!0:(delete It[tt],!1)}})}return s(He,"KillSwitch"),He}();const Jr=cr;var Yr=function(){function He(){var St=!0,Ue=!0,Ie=!0,Dt="use-collector-delta",It=!1;(0,M.Z)(He,this,function(tt){tt.allowRequestSending=function(){return St},tt.firstRequestSent=function(){Ie&&(Ie=!1,It||(St=!1))},tt.shouldAddClockSkewHeaders=function(){return Ue},tt.getClockSkewHeaderValue=function(){return Dt},tt.setClockSkew=function($t){It||($t?(Dt=$t,Ue=!0,It=!0):Ue=!1,St=!0)}})}return s(He,"ClockSkewManager"),He}();const pi=Yr;var qn,Wr="sendAttempt",Pr="&"+ne+"=true",Gn=(qn={},qn[1]=V,qn[100]=V,qn[200]="sent",qn[8004]=De,qn[8003]=De,qn),$r={},ur={};function Tn(He,St,Ue){$r[He]=St,Ue!==!1&&(ur[St]=He)}s(Tn,"_addCollectorHeaderQsMapping"),Tn(Je,Je,!1),Tn(I,I),Tn($,"Client-Id"),Tn(lt,lt),Tn(N,N),Tn(ae,ae),Tn(Qt,Qt);function ut(He){try{return He.responseText}catch(St){}return""}s(ut,"_getResponseText");function ot(He,St){var Ue=!1;if(He&&St){var Ie=(0,W.FY)(He);if(Ie&&Ie.length>0)for(var Dt=St.toLowerCase(),It=0;It<Ie.length;It++){var tt=Ie[It];if(tt&&(0,W.nr)(St,tt)&&tt.toLowerCase()===Dt){Ue=!0;break}}}return Ue}s(ot,"_hasHeader");function $e(He,St,Ue,Ie){St&&Ue&&Ue.length>0&&(Ie&&$r[St]?(He.hdrs[$r[St]]=Ue,He.useHdrs=!0):He.url+="&"+St+"="+Ue)}s($e,"_addRequestDetails");var ve=function(){function He(St,Ue,Ie,Dt,It){this._responseHandlers=[];var tt="?cors=true&"+We.toLowerCase()+"="+xe,$t=new Jr,qt=!1,nn=new pi,En=!1,$n=0,pn,ee,At,bt=!0,it=[],zt={},Kt=[],Vt=null,dn=!1,Bt,rn=!1,yn=!1,Ln,Pn;(0,M.Z)(He,this,function(Zt){var Bn=!0;Zt.initialize=function(L,Fe,Le,Ke,ht){var fe;ht||(ht={}),tt=L+tt,yn=(0,W.o8)(ht.avoidOptions)?!0:!ht.avoidOptions,At=Fe,Bt=Fe.getCookieMgr(),dn=!At.config.disableEventTimings;var Y=!!At.config.enableCompoundKey;pn=Le;var sn=ht.valueSanitizer,y=ht.stringifyObjects;(0,W.o8)(ht.enableCompoundKey)||(Y=!!ht.enableCompoundKey),Ln=ht.xhrTimeout,Pn=ht.disableXhrSync,En=!(0,Se.b$)(),Vt=new mt(At,sn,y,Y);var T=Ke,S=ht.alwaysUseXhrOverride?Ke:null,E=ht.alwaysUseXhrOverride?Ke:null;if(!Ke){bt=!1;var he=(0,Se.k$)();he&&he.protocol&&he.protocol.toLowerCase()==="file:"&&(Bn=!1);var le=[];(0,Se.b$)()?le=[2,1]:le=[1,2,3];var gt=ht.transports;gt&&((0,W.hj)(gt)?le=[gt].concat(le):(0,W.kJ)(gt)&&(le=gt.concat(le))),Ke=In(le,!1),T=In(le,!0),Ke||pn.diagLog().warnToConsole("No available transport to send events")}ee=(fe={},fe[0]=Ke,fe[1]=T||In([1,2,3],!0),fe[2]=S||In([3,2],!0)||T||In([1],!0),fe[3]=E||In([2,3],!0)||T||In([1],!0),fe)};function In(L,Fe){for(var Le=0,Ke=null,ht=0;Ke==null&&ht<L.length;)Le=L[ht],Le===1?(0,Se.cp)()?Ke=Xn:(0,Se.Z3)()&&(Ke=Gt):Le===2&&(0,Se.JO)(Fe)?Ke=Nn:En&&Le===3&&(0,Se.MF)()&&(Ke=vi),ht++;return Ke?{_transport:Le,_isSync:Fe,sendPOST:Ke}:null}s(In,"_getSenderInterface"),Zt._getDbgPlgTargets=function(){return[ee[0],$t,Vt,ee]};function Xn(L,Fe,Le){var Ke=new XDomainRequest;Ke.open(re,L.urlString),L.timeout&&(Ke.timeout=L.timeout),Ke.onload=function(){var ht=ut(Ke);Jn(Fe,200,{},ht),ti(ht)},Ke.onerror=function(){Jn(Fe,400,{})},Ke.ontimeout=function(){Jn(Fe,500,{})},Ke.onprogress=function(){},Le?Ke.send(L.data):It.set(function(){Ke.send(L.data)},0)}s(Xn,"_xdrSendPost");function Nn(L,Fe,Le){var Ke,ht=L.urlString,fe=!1,Y=!1,sn=(Ke={body:L.data,method:re},Ke[Ee]=!0,Ke);Le&&(sn.keepalive=!0,L._sendReason===2&&(fe=!0,ht+=Pr)),Bn&&(sn.credentials="include"),L.headers&&(0,W.FY)(L.headers).length>0&&(sn.headers=L.headers),fetch(ht,sn).then(function(y){var T={},S="";y.headers&&y.headers.forEach(function(E,he){T[he]=E}),y.body&&y.text().then(function(E){S=E}),Y||(Y=!0,Jn(Fe,y.status,T,S),ti(S))}).catch(function(y){Y||(Y=!0,Jn(Fe,0,{}))}),fe&&!Y&&(Y=!0,Jn(Fe,200,{})),!Y&&L.timeout>0&&It.set(function(){Y||(Y=!0,Jn(Fe,500,{}))},L.timeout)}s(Nn,"_fetchSendPost");function Gt(L,Fe,Le){var Ke=L.urlString;function ht(y,T,S){if(!y[S]&&T&&T.getResponseHeader){var E=T.getResponseHeader(S);E&&(y[S]=(0,W.nd)(E))}return y}s(ht,"_appendHeader");function fe(y){var T={};return y.getAllResponseHeaders?T=ei(y.getAllResponseHeaders()):(T=ht(T,y,qe),T=ht(T,y,Re),T=ht(T,y,z)),T}s(fe,"_getAllResponseHeaders");function Y(y,T){Jn(Fe,y.status,fe(y),T)}s(Y,"xhrComplete"),Le&&L.disableXhrSync&&(Le=!1);var sn=(0,oe.ot)(re,Ke,Bn,!0,Le,L.timeout);(0,W.rW)(L.headers,function(y,T){sn.setRequestHeader(y,T)}),sn.onload=function(){var y=ut(sn);Y(sn,y),ti(y)},sn.onerror=function(){Y(sn)},sn.ontimeout=function(){Y(sn)},sn.send(L.data)}s(Gt,"_xhrSendPost");function Jn(L,Fe,Le,Ke){try{L(Fe,Le,Ke)}catch(ht){(0,we.kP)(pn.diagLog(),2,518,(0,Se.eU)(ht))}}s(Jn,"_doOnComplete");function vi(L,Fe,Le){var Ke=L,ht=200,fe=Ke._thePayload,Y=L.urlString+Pr;try{var sn=(0,Se.jW)();if(!sn.sendBeacon(Y,L.data))if(fe){var y=[];(0,W.tO)(fe.batches,function(T){if(y&&T&&T.count()>0){for(var S=T.events(),E=0;E<S.length;E++)if(!sn.sendBeacon(Y,Vt.getEventBlob(S[E]))){y.push(T.split(E));break}}else y.push(T.split(0))}),pr(y,8003,fe.sendType,!0)}else ht=0}catch(T){pn.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+(0,Se.eU)(T)),ht=0}finally{Jn(Fe,ht,{},"")}}s(vi,"_beaconSendPost");function nr(L){return L===2||L===3}s(nr,"_isBeaconPayload");function Rr(L){return rn&&nr(L)&&(L=2),L}s(Rr,"_adjustSendType"),Zt.addQueryStringParameter=function(L,Fe){for(var Le=0;Le<it.length;Le++)if(it[Le].name===L){it[Le].value=Fe;return}it.push({name:L,value:Fe})},Zt.addHeader=function(L,Fe){zt[L]=Fe},Zt.canSendRequest=function(){return mi()&&nn.allowRequestSending()},Zt.sendQueuedRequests=function(L,Fe){(0,W.o8)(L)&&(L=0),rn&&(L=Rr(L),Fe=2),Sr(Kt,L,0)&&Ar(xn(),0,!1,L,Fe||0)},Zt.isCompletelyIdle=function(){return!qt&&$n===0&&Kt.length===0},Zt.setUnloading=function(L){rn=L},Zt.addBatch=function(L){if(L&&L.count()>0){if($t.isTenantKilled(L.iKey()))return!1;Kt.push(L)}return!0},Zt.teardown=function(){Kt.length>0&&Ar(xn(),0,!0,2,2)},Zt.pause=function(){qt=!0},Zt.resume=function(){qt=!1,Zt.sendQueuedRequests(0,4)},Zt.sendSynchronousBatch=function(L,Fe,Le){L&&L.count()>0&&((0,W.le)(Fe)&&(Fe=1),rn&&(Fe=Rr(Fe),Le=2),Ar([L],0,!1,Fe,Le||0))};function mi(){return!qt&&$n<Ue}s(mi,"_hasIdleConnection");function xn(){var L=Kt;return Kt=[],L}s(xn,"_clearQueue");function Sr(L,Fe,Le){var Ke=!1;return L&&L.length>0&&!qt&&ee[Fe]&&Vt&&(Ke=Fe!==0||mi()&&(Le>0||nn.allowRequestSending())),Ke}s(Sr,"_canSendPayload");function bn(L){var Fe={};return L&&(0,W.tO)(L,function(Le,Ke){Fe[Ke]={iKey:Le.iKey(),evts:Le.events()}}),Fe}s(bn,"_createDebugBatches");function Ar(L,Fe,Le,Ke,ht){if(!(!L||L.length===0)){if(qt){pr(L,1,Ke);return}Ke=Rr(Ke);try{var fe=L,Y=Ke!==0;(0,D.Lm)(At,function(){return"HttpManager:_sendBatches"},function(sn){sn&&(L=L.slice(0));for(var y=[],T=null,S=(0,oe.hK)(),E=ee[Ke]||(Y?ee[1]:ee[0]),he=(rn||nr(Ke)||E&&E._transport===3)&&Qn();Sr(L,Ke,Fe);){var le=L.shift();le&&le.count()>0&&($t.isTenantKilled(le.iKey())?y.push(le):(T=T||Vt.createPayload(Fe,Le,Y,he,ht,Ke),Vt.appendPayload(T,le,St)?T.overflow!==null&&(L=[T.overflow].concat(L),T.overflow=null,Ri(T,S,(0,oe.hK)(),ht),S=(0,oe.hK)(),T=null):(Ri(T,S,(0,oe.hK)(),ht),S=(0,oe.hK)(),L=[le].concat(L),T=null)))}T&&Ri(T,S,(0,oe.hK)(),ht),L.length>0&&(Kt=L.concat(Kt)),pr(y,8004,Ke)},function(){return{batches:bn(fe),retryCount:Fe,isTeardown:Le,isSynchronous:Y,sendReason:ht,useSendBeacon:nr(Ke),sendType:Ke}},!Y)}catch(sn){(0,we.kP)(pn.diagLog(),2,48,"Unexpected Exception sending batch: "+(0,Se.eU)(sn))}}}s(Ar,"_sendBatches");function kr(L,Fe){var Le={url:tt,hdrs:{},useHdrs:!1};Fe?(Le.hdrs=(0,oe.l7)(Le.hdrs,zt),Le.useHdrs=(0,W.FY)(Le.hdrs).length>0):(0,W.rW)(zt,function(sn,y){ur[sn]?$e(Le,ur[sn],y,!1):(Le.hdrs[sn]=y,Le.useHdrs=!0)}),$e(Le,$,"NO_AUTH",Fe),$e(Le,I,oe.vs,Fe);var Ke="";(0,W.tO)(L.apiKeys,function(sn){Ke.length>0&&(Ke+=","),Ke+=sn}),$e(Le,lt,Ke,Fe),$e(Le,ae,(0,W.m6)().toString(),Fe);var ht=zr(L);if((0,oe.Sn)(ht)&&(Le.url+="&ext.intweb.msfpc="+ht),nn.shouldAddClockSkewHeaders()&&$e(Le,N,nn.getClockSkewHeaderValue(),Fe),At.getWParam){var fe=At.getWParam();fe>=0&&(Le.url+="&w="+fe)}for(var Y=0;Y<it.length;Y++)Le.url+="&"+it[Y].name+"="+it[Y].value;return Le}s(kr,"_buildRequestDetails");function Qn(){return!bt&&En&&(0,Se.MF)()}s(Qn,"_canUseSendBeaconApi");function lr(L,Fe,Le){L[Fe]=L[Fe]||{},L[Fe][pn.identifier]=Le}s(lr,"_setTimingValue");function Ri(L,Fe,Le,Ke){if(L&&L.payloadBlob&&L.payloadBlob.length>0){var ht=!!Zt.sendHook,fe=ee[L.sendType];!nr(L.sendType)&&L.isBeacon&&L.sendReason===2&&(fe=ee[2]||ee[3]||fe);var Y=yn;(L.isBeacon||fe._transport===3)&&(Y=!1);var sn=kr(L,Y);Y=Y||sn.useHdrs;var y=(0,oe.hK)();(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend"},function(){for(var T=0;T<L.batches.length;T++)for(var S=L.batches[T],E=S.events(),he=0;he<E.length;he++){var le=E[he];if(dn){var gt=le.timings=le.timings||{};lr(gt,"sendEventStart",y),lr(gt,"serializationStart",Fe),lr(gt,"serializationCompleted",Le)}le[Wr]>0?le[Wr]++:le[Wr]=1}pr(L.batches,1e3+(Ke||0),L.sendType,!0);var Be={data:L.payloadBlob,urlString:sn.url,headers:sn.hdrs,_thePayload:L,_sendReason:Ke,timeout:Ln};(0,W.o8)(Pn)||(Be.disableXhrSync=!!Pn),Y&&(ot(Be.headers,H)||(Be.headers[H]=k),ot(Be.headers,We)||(Be.headers[We]=xe));var on=null;fe&&(on=s(function(ln){nn.firstRequestSent();var Mn=s(function(Zn,Rn){Zr(Zn,Rn,L,Ke)},"onComplete"),fn=L.isTeardown||L.isSync;try{fe.sendPOST(ln,Mn,fn),Zt.sendListener&&Zt.sendListener(Be,ln,fn,L.isBeacon)}catch(Zn){pn.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+(0,Se.eU)(Zn)),Jn(Mn,0,{})}},"sender")),(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(on)if(L.sendType===0&&$n++,ht&&!L.isBeacon&&fe._transport!==3){var ln={data:Be.data,urlString:Be.urlString,headers:(0,oe.l7)({},Be.headers),timeout:Be.timeout,disableXhrSync:Be.disableXhrSync},Mn=!1;(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Zt.sendHook(ln,function(fn){Mn=!0,!bt&&!fn._thePayload&&(fn._thePayload=fn._thePayload||Be._thePayload,fn._sendReason=fn._sendReason||Be._sendReason),on(fn)},L.isSync||L.isTeardown)}catch(fn){Mn||on(Be)}})}else on(Be)})},function(){return{thePayload:L,serializationStart:Fe,serializationCompleted:Le,sendReason:Ke}},L.isSync)}L.sizeExceed&&L.sizeExceed.length>0&&pr(L.sizeExceed,8003,L.sendType),L.failedEvts&&L.failedEvts.length>0&&pr(L.failedEvts,8002,L.sendType)}s(Ri,"_doPayloadSend");function yi(L,Fe){dn&&(0,W.tO)(L,function(Le){var Ke=Le.timings=Le.timings||{};lr(Ke,"sendEventCompleted",Fe)})}s(yi,"_addEventCompletedTimings");function Zr(L,Fe,Le,Ke){var ht=9e3,fe=null,Y=!1,sn=!1;try{var y=!0;if(typeof L!==Z.jA){if(Fe){nn.setClockSkew(Fe[qe]);var T=Fe[Re]||Fe["kill-duration-seconds"];(0,W.tO)($t.setKillSwitchTenants(Fe[Ct],T),function(E){(0,W.tO)(Le.batches,function(he){if(he.iKey()===E){fe=fe||[];var le=he.split(0);Le.numEvents-=le.count(),fe.push(le)}})})}if(L==200||L==204){ht=200;return}(!ce(L)||Le.numEvents<=0)&&(y=!1),ht=9e3+L%1e3}if(y){ht=100;var S=Le.retryCnt;Le.sendType===0&&(S<Ie?(Y=!0,si(function(){Le.sendType===0&&$n--,Ar(Le.batches,S+1,Le.isTeardown,rn?2:Le.sendType,5)},rn,tr(S))):(sn=!0,rn&&(ht=8001)))}}finally{Y||(nn.setClockSkew(),Ai(Le,ht,Ke,sn)),pr(fe,8004,Le.sendType)}}s(Zr,"_retryRequestIfNeeded");function Ai(L,Fe,Le,Ke){try{Ke&&pn._backOffTransmission(),Fe===200&&(!Ke&&!L.isSync&&pn._clearBackOff(),Mr(L.batches)),pr(L.batches,Fe,L.sendType,!0)}finally{L.sendType===0&&($n--,Le!==5&&Zt.sendQueuedRequests(L.sendType,Le))}}s(Ai,"_handleRequestFinished");function Mr(L){if(dn){var Fe=(0,oe.hK)();(0,W.tO)(L,function(Le){Le&&Le.count()>0&&yi(Le.events(),Fe)})}}s(Mr,"_addCompleteTimings");function si(L,Fe,Le){Fe?L():It.set(L,Le)}s(si,"_doAction");function ei(L){var Fe={};if((0,W.HD)(L)){var Le=(0,W.nd)(L).split(/[\r\n]+/);(0,W.tO)(Le,function(Ke){if(Ke){var ht=Ke.indexOf(": ");if(ht!==-1){var fe=(0,W.nd)(Ke.substring(0,ht)).toLowerCase(),Y=(0,W.nd)(Ke.substring(ht+1));Fe[fe]=Y}else Fe[(0,W.nd)(Ke)]=1}})}return Fe}s(ei,"_convertAllHeadersToMap");function zr(L){for(var Fe=0;Fe<L.batches.length;Fe++){var Le=L.batches[Fe].Msfpc();if(Le)return encodeURIComponent(Le)}return""}s(zr,"_getMsfpc");function ti(L){var Fe=Zt._responseHandlers;try{for(var Le=0;Le<Fe.length;Le++)try{Fe[Le](L)}catch(ht){(0,we.kP)(pn.diagLog(),1,519,"Response handler failed: "+ht)}if(L){var Ke=JSON.parse(L);(0,oe.Sn)(Ke.webResult)&&(0,oe.Sn)(Ke.webResult[be])&&Bt.set("MSFPC",Ke.webResult[be],365*86400)}}catch(ht){}}s(ti,"_handleCollectorResponse");function pr(L,Fe,Le,Ke){if(L&&L.length>0&&Dt){var ht=Dt[ci(Fe)];if(ht){var fe=Le!==0;(0,D.Lm)(At,function(){return"HttpManager:_sendBatchesNotification"},function(){si(function(){try{ht.call(Dt,L,Fe,fe,Le)}catch(Y){(0,we.kP)(pn.diagLog(),1,74,"send request notification failed: "+Y)}},Ke||fe,0)},function(){return{batches:bn(L),reason:Fe,isSync:fe,sendSync:Ke,sendType:Le}},!fe)}}}s(pr,"_sendBatchesNotification");function ci(L){var Fe=Gn[L];return(0,oe.Sn)(Fe)||(Fe=G,L>=9e3&&L<=9999?Fe=X:L>=8e3&&L<=8999?Fe=De:L>=1e3&&L<=1999&&(Fe=Pe)),Fe}s(ci,"_getNotificationAction")})}return s(He,"HttpManager"),He}();function Ye(He,St){for(var Ue=[],Ie=2;Ie<arguments.length;Ie++)Ue[Ie-2]=arguments[Ie];return setTimeout(He,St,Ue)}s(Ye,"defaultSetTimeout");function Ve(He){clearTimeout(He)}s(Ve,"defaultClearTimeout");function Ge(He,St){return{set:He||Ye,clear:St||Ve}}s(Ge,"createTimeoutWrapper");var _t=.25,Nt=500,Ut=20,Te=6,et=2,Oe=4,dt=2,O=1,un="eventsDiscarded",_="overrideInstrumentationKey",ue="maxEventRetryAttempts",ke="maxUnloadEventRetryAttempts",Qe="addUnloadCb",yt=function(He){(0,K.ne)(St,He);function St(){var Ue=He.call(this)||this;Ue.identifier="PostChannel",Ue.priority=1011,Ue.version="3.2.3";var Ie,Dt=!1,It=[],tt=null,$t=!1,qt=0,nn=500,En=0,$n=1e4,pn={},ee=A,At=null,bt=null,it=0,zt=0,Kt,Vt,dn={},Bt,rn,yn=-1,Ln,Pn=!0,Zt=!1,Bn=Te,In=et,Xn,Nn;return(0,M.Z)(St,Ue,function(Gt,Jn){Ar(),Gt._getDbgPlgTargets=function(){return[Vt]},Gt.initialize=function(S,E,he){(0,D.Lm)(E,function(){return"PostChannel:initialize"},function(){var le=E;Jn.initialize(S,E,he);try{var gt=!!E[Qe];Xn=(0,U.jU)((0,pe.J)(Gt.identifier),E.evtNamespace&&E.evtNamespace());var Be=Gt._getTelCtx();S.extensionConfig[Gt.identifier]=S.extensionConfig[Gt.identifier]||{},Ie=Be.getExtCfg(Gt.identifier),Nn=Ge(Ie.setTimeoutOverride,Ie.clearTimeoutOverride),Pn=!Ie.disableOptimizeObj&&(0,oe.mJ)(),vi(le),Ie.eventsLimitInMem>0&&($n=Ie.eventsLimitInMem),Ie.immediateEventLimit>0&&(nn=Ie.immediateEventLimit),Ie.autoFlushEventsLimit>0&&(Bt=Ie.autoFlushEventsLimit),(0,W.hj)(Ie[ue])&&(Bn=Ie[ue]),(0,W.hj)(Ie[ke])&&(In=Ie[ke]),T(),Ie.httpXHROverride&&Ie.httpXHROverride.sendPOST&&(Kt=Ie.httpXHROverride),(0,oe.Sn)(S.anonCookieName)&&Vt.addQueryStringParameter("anoncknm",S.anonCookieName),Vt.sendHook=Ie.payloadPreprocessor,Vt.sendListener=Ie.payloadListener;var on=Ie.overrideEndpointUrl?Ie.overrideEndpointUrl:S.endpointUrl;Gt._notificationManager=S.extensionConfig.NotificationManager,Vt.initialize(on,Gt.core,Gt,Kt,Ie);var ln=S.disablePageUnloadEvents||[];(0,U.c9)(nr,ln,Xn),(0,U.TJ)(nr,ln,Xn),(0,U.nD)(Rr,S.disablePageShowEvents,Xn)}catch(Mn){throw Gt.setInitialized(!1),Mn}},function(){return{coreConfig:S,core:E,extensions:he}})},Gt.processTelemetry=function(S,E){(0,oe.if)(S,Gt.identifier),E=Gt._getTelCtx(E);var he=E.getExtCfg(Gt.identifier),le=!!Ie.disableTelemetry;he&&(le=le||!!he.disableTelemetry);var gt=S;!le&&!Dt&&(Ie[_]&&(gt.iKey=Ie[_]),he&&he[_]&&(gt.iKey=he[_]),mi(gt,!0),Zt?lr(2,2):bn()),Gt.processNext(gt,E)},Gt._doTeardown=function(S,E){lr(2,2),Dt=!0,Vt.teardown(),(0,U.JA)(null,Xn),(0,U.C9)(null,Xn),(0,U.Yl)(null,Xn),Ar()};function vi(S){var E=S.getWParam;S.getWParam=function(){var he=0;return Ie.ignoreMc1Ms0CookieProcessing&&(he=he|2),he|E()}}s(vi,"_hookWParam");function nr(S){var E=S||(0,Se.Jj)().event;E.type!=="beforeunload"&&(Zt=!0,Vt.setUnloading(Zt)),lr(2,2)}s(nr,"_handleUnloadEvents");function Rr(S){Zt=!1,Vt.setUnloading(Zt)}s(Rr,"_handleShowEvents");function mi(S,E){if(S.sendAttempt||(S.sendAttempt=0),S.latency||(S.latency=1),S.ext&&S.ext.trace&&delete S.ext.trace,S.ext&&S.ext.user&&S.ext.user.id&&delete S.ext.user.id,Pn&&(S.ext=(0,W.Ax)(S.ext),S.baseData&&(S.baseData=(0,W.Ax)(S.baseData)),S.data&&(S.data=(0,W.Ax)(S.data))),S.sync){if(it||$t)S.latency=3,S.sync=!1;else if(Vt){Pn&&(S=(0,W.Ax)(S)),Vt.sendSynchronousBatch(rt.create(S.iKey,[S]),S.sync===!0?1:S.sync,3);return}}var he=S.latency,le=En,gt=$n;he===4&&(le=qt,gt=nn);var Be=!1;if(le<gt)Be=!Ai(S,E);else{var on=1,ln=Ut;he===4&&(on=4,ln=1),Be=!0,Mr(S.iKey,S.latency,on,ln)&&(Be=!Ai(S,E))}Be&&Le(un,[S],je.h.QueueFull)}s(mi,"_addEventToQueues"),Gt.setEventQueueLimits=function(S,E){$n=S>0?S:1e4,Bt=E>0?E:0,T();var he=En>S;if(!he&&rn>0)for(var le=1;!he&&le<=3;le++){var gt=dn[le];gt&&gt.batches&&(0,W.tO)(gt.batches,function(Be){Be&&Be.count()>=rn&&(he=!0)})}Zr(!0,he)},Gt.pause=function(){Qn(),$t=!0,Vt.pause()},Gt.resume=function(){$t=!1,Vt.resume(),bn()},Gt.addResponseHandler=function(S){Vt._responseHandlers.push(S)},Gt._loadTransmitProfiles=function(S){pr(),(0,W.rW)(S,function(E,he){var le=he.length;if(le>=2){var gt=le>2?he[2]:0;if(he.splice(0,le-2),he[1]<0&&(he[0]=-1),he[1]>0&&he[0]>0){var Be=he[0]/he[1];he[0]=Math.ceil(Be)*he[1]}gt>=0&&he[1]>=0&&gt>he[1]&&(gt=he[1]),he.push(gt),pn[E]=he}})},Gt.flush=function(S,E,he){if(S===void 0&&(S=!0),!$t)if(he=he||1,S)tt==null?(Qn(),ei(1,0,he),tt=kr(function(){tt=null,zr(E,he)},0)):It.push(E);else{var le=Qn();xn(1,1,he),E!=null&&E(),le&&bn()}},Gt.setMsaAuthTicket=function(S){Vt.addHeader(Je,S)},Gt.hasEvents=Sr,Gt._setTransmitProfile=function(S){ee!==S&&pn[S]!==void 0&&(Qn(),ee=S,bn())};function xn(S,E,he){var le=ei(S,E,he);return Vt.sendQueuedRequests(E,he),le}s(xn,"_sendEventsForLatencyAndAbove");function Sr(){return En>0}s(Sr,"_hasEvents");function bn(){if(yn>=0&&ei(yn,0,Ln)&&Vt.sendQueuedRequests(0,Ln),qt>0&&!bt&&!$t){var S=pn[ee][2];S>=0&&(bt=kr(function(){bt=null,xn(4,0,1),bn()},S))}var E=pn[ee][1];!At&&!tt&&E>=0&&!$t&&(Sr()?At=kr(function(){At=null,xn(zt===0?3:1,0,1),zt++,zt%=2,bn()},E):zt=0)}s(bn,"_scheduleTimer"),Gt._backOffTransmission=function(){it<Oe&&(it++,Qn(),bn())},Gt._clearBackOff=function(){it&&(it=0,Qn(),bn())};function Ar(){Ie=null,Dt=!1,It=[],tt=null,$t=!1,qt=0,nn=500,En=0,$n=1e4,pn={},ee=A,At=null,bt=null,it=0,zt=0,Kt=null,dn={},Bt=void 0,rn=0,yn=-1,Ln=null,Pn=!0,Zt=!1,Bn=Te,In=et,Xn=null,Nn=Ge(),Vt=new ve(Nt,dt,O,{requeue:L,send:ht,sent:fe,drop:Y,rspFail:sn,oth:y},Nn),ci(),Ri(),T()}s(Ar,"_initDefaults");function kr(S,E){E===0&&it&&(E=1);var he=1e3;return it&&(he=tr(it-1)),Nn.set(S,E*he)}s(kr,"_createTimer");function Qn(){return At!==null?(Nn.clear(At),At=null,zt=0,!0):!1}s(Qn,"_clearScheduledTimer");function lr(S,E){Qn(),tt&&(Nn.clear(tt),tt=null),$t||xn(1,S,E)}s(lr,"_releaseAllQueues");function Ri(){dn[4]={batches:[],iKeyMap:{}},dn[3]={batches:[],iKeyMap:{}},dn[2]={batches:[],iKeyMap:{}},dn[1]={batches:[],iKeyMap:{}}}s(Ri,"_clearQueues");function yi(S,E,he){var le=dn[E];le||(E=1,le=dn[E]);var gt=le.iKeyMap[S];return!gt&&he&&(gt=rt.create(S),le.batches.push(gt),le.iKeyMap[S]=gt),gt}s(yi,"_getEventBatch");function Zr(S,E){Vt.canSendRequest()&&!it&&(Bt>0&&En>Bt&&(E=!0),E&&tt==null&&Gt.flush(S,null,20))}s(Zr,"_performAutoFlush");function Ai(S,E){Pn&&(S=(0,W.Ax)(S));var he=S.latency,le=yi(S.iKey,he,!0);return le.addEvent(S)?(he!==4?(En++,E&&S.sendAttempt===0&&Zr(!S.sync,rn>0&&le.count()>=rn)):qt++,!0):!1}s(Ai,"_addEventToProperQueue");function Mr(S,E,he,le){for(;he<=E;){var gt=yi(S,E,!0);if(gt&&gt.count()>0){var Be=gt.split(0,le),on=Be.count();if(on>0)return he===4?qt-=on:En-=on,Ke(un,[Be],je.h.QueueFull),!0}he++}return si(),!1}s(Mr,"_dropEventWithLatencyOrLess");function si(){for(var S=0,E=0,he=s(function(gt){var Be=dn[gt];Be&&Be.batches&&(0,W.tO)(Be.batches,function(on){gt===4?S+=on.count():E+=on.count()})},"_loop_1"),le=1;le<=4;le++)he(le);En=E,qt=S}s(si,"_resetQueueCounts");function ei(S,E,he){var le=!1,gt=E===0;return!gt||Vt.canSendRequest()?(0,D.Lm)(Gt.core,function(){return"PostChannel._queueBatches"},function(){for(var Be=[],on=4;on>=S;){var ln=dn[on];ln&&ln.batches&&ln.batches.length>0&&((0,W.tO)(ln.batches,function(Mn){Vt.addBatch(Mn)?le=le||Mn&&Mn.count()>0:Be=Be.concat(Mn.events()),on===4?qt-=Mn.count():En-=Mn.count()}),ln.batches=[],ln.iKeyMap={}),on--}Be.length>0&&Le(un,Be,je.h.KillSwitch),le&&yn>=S&&(yn=-1,Ln=0)},function(){return{latency:S,sendType:E,sendReason:he}},!gt):(yn=yn>=0?Math.min(yn,S):S,Ln=Math.max(Ln,he)),le}s(ei,"_queueBatches");function zr(S,E){xn(1,0,E),si(),ti(function(){S&&S(),It.length>0?tt=kr(function(){tt=null,zr(It.shift(),E)},0):(tt=null,bn())})}s(zr,"_flushImpl");function ti(S){Vt.isCompletelyIdle()?S():tt=kr(function(){tt=null,ti(S)},_t)}s(ti,"_waitForIdleManager");function pr(){Qn(),ci(),ee=A,bn()}s(pr,"_resetTransmitProfiles");function ci(){pn={},pn[A]=[2,1,0],pn[j]=[6,3,0],pn[Q]=[18,9,0]}s(ci,"_initializeProfiles");function L(S,E){var he=[],le=Bn;Zt&&(le=In),(0,W.tO)(S,function(gt){gt&&gt.count()>0&&(0,W.tO)(gt.events(),function(Be){Be&&(Be.sync&&(Be.latency=4,Be.sync=!1),Be.sendAttempt<le?((0,oe.if)(Be,Gt.identifier),mi(Be,!1)):he.push(Be))})}),he.length>0&&Le(un,he,je.h.NonRetryableStatus),Zt&&lr(2,2)}s(L,"_requeueEvents");function Fe(S,E){var he=Gt._notificationManager||{},le=he[S];if(le)try{le.apply(he,E)}catch(gt){(0,we.kP)(Gt.diagLog(),1,74,S+" notification failed: "+gt)}}s(Fe,"_callNotification");function Le(S,E){for(var he=[],le=2;le<arguments.length;le++)he[le-2]=arguments[le];E&&E.length>0&&Fe(S,[E].concat(he))}s(Le,"_notifyEvents");function Ke(S,E){for(var he=[],le=2;le<arguments.length;le++)he[le-2]=arguments[le];E&&E.length>0&&(0,W.tO)(E,function(gt){gt&&gt.count()>0&&Fe(S,[gt.events()].concat(he))})}s(Ke,"_notifyBatchEvents");function ht(S,E,he){S&&S.length>0&&Fe("eventsSendRequest",[E>=1e3&&E<=1999?E-1e3:0,he!==!0])}s(ht,"_sendingEvent");function fe(S,E){Ke("eventsSent",S,E),bn()}s(fe,"_eventsSentEvent");function Y(S,E){Ke(un,S,E>=8e3&&E<=8999?E-8e3:je.h.Unknown)}s(Y,"_eventsDropped");function sn(S){Ke(un,S,je.h.NonRetryableStatus),bn()}s(sn,"_eventsResponseFail");function y(S,E){Ke(un,S,je.h.Unknown),bn()}s(y,"_otherEvent");function T(){!Ie||!Ie.disableAutoBatchFlushLimit?rn=Math.max(Nt*(dt+1),$n/6):rn=0}s(T,"_setAutoLimits"),(0,W.l_)(Gt,"_setTimeoutOverride",function(){return Nn.set},function(S){Nn=Ge(S,Nn.clear)}),(0,W.l_)(Gt,"_clearTimeoutOverride",function(){return Nn.clear},function(S){Nn=Ge(Nn.set,S)})}),Ue}return s(St,"PostChannel"),St}(Ae.i);const J=yt},873:(Ft,de,f)=>{"use strict";f.d(de,{By:()=>M});var K=f(708);function M(pe){var oe={};return(0,K.rW)(pe,function(W,Se){oe[W]=Se,oe[Se]=W}),(0,K._A)(oe)}s(M,"createEnumStyle");function D(pe){var oe={};return objForEachKey(pe,function(W,Se){oe[W]=W,oe[Se]=W}),deepFreeze(oe)}s(D,"createEnumMap");function U(pe){var oe={};return objForEachKey(pe,function(W,Se){oe[W]=Se[1],oe[Se[0]]=Se[1]}),deepFreeze(oe)}s(U,"createValueMap")},928:(Ft,de,f)=>{"use strict";f.d(de,{h:()=>M});var K=f(873),M=(0,K.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},63:(Ft,de,f)=>{"use strict";f.d(de,{i:()=>Se});var K=f(679),M=f(589),D=f(708),U=f(171),pe=f(310),oe=f(41),W="getPlugin",Se=function(){function je(){var we=this,Ae,A,j,Q,re;Pe(),(0,K.Z)(je,we,function(V){V.initialize=function(X,G,k,xe){De(X,G,xe),Ae=!0},V.teardown=function(X,G){var k=V.core;if(!k||X&&k!==X.core())return;var xe,H=!1,We=X||(0,M.Bt)(null,k,j&&j[W]?j[W]():j),Ct=G||{reason:0,isAsync:!1};function Re(){H||(H=!0,Q.run(We,G),(0,D.tO)(re,function(z){z.rm()}),re=[],xe===!0&&We.processNext(Ct),Pe())}return s(Re,"_unloadCallback"),!V[oe.Ho]||V[oe.Ho](We,Ct,Re)!==!0?Re():xe=!0,xe},V.update=function(X,G){var k=V.core;if(!k||X&&k!==X.core())return;var xe,H=!1,We=X||(0,M.xy)(null,k,j&&j[W]?j[W]():j),Ct=G||{reason:0};function Re(){H||(H=!0,De(We.getCfg(),We.core(),We.getNext()))}return s(Re,"_updateCallback"),!V._doUpdate||V._doUpdate(We,Ct,Re)!==!0?Re():xe=!0,xe},V._addHook=function(X){X&&((0,D.kJ)(X)?re=re.concat(X):re.push(X))},(0,D.Oi)(V,"_addUnloadCb",function(){return Q},"add")}),we.diagLog=function(V){return Ee(V).diagLog()},we[oe.Vr]=function(){return Ae},we.setInitialized=function(V){Ae=V},we[oe.El]=function(V){j=V},we.processNext=function(V,X){X?X.processNext(V):j&&(0,D.mf)(j.processTelemetry)&&j.processTelemetry(V,null)},we._getTelCtx=Ee;function Ee(V){V===void 0&&(V=null);var X=V;if(!X){var G=A||(0,M.CD)(null,{},we.core);j&&j[W]?X=G.createNew(null,j[W]):X=G.createNew(null,j)}return X}s(Ee,"_getTelCtx");function De(V,X,G){V&&(0,D.sO)(V,U.F,[],null,D.le),!G&&X&&(G=X.getProcessTelContext().getNext());var k=j;j&&j[W]&&(k=j[W]()),we.core=X,A=(0,M.CD)(G,V,X,k)}s(De,"_setDefaults");function Pe(){Ae=!1,we.core=null,A=null,j=null,re=[],Q=(0,pe.Y)()}s(Pe,"_initDefaults")}return s(je,"BaseTelemetryPlugin"),je}()},171:(Ft,de,f)=>{"use strict";f.d(de,{z:()=>K,F:()=>M});var K="iKey",M="extensionConfig"},242:(Ft,de,f)=>{"use strict";f.d(de,{kj:()=>V,JP:()=>k,Nz:()=>xe,p7:()=>H,UY:()=>I});var K=f(630),M=f(708),D=f(41),U=f(18),pe="toGMTString",oe="toUTCString",W="cookie",Se="expires",je="enabled",we="isCookieUseDisabled",Ae="disableCookiesUsage",A="_ckMgr",j=null,Q=null,re=null,Ee=(0,K.Me)(),De={},Pe={};function V($,N){var ae=xe[A]||Pe[A];return ae||(ae=xe[A]=xe($,N),Pe[A]=ae),ae}s(V,"_gblCookieMgr");function X($){return $?$.isEnabled():!0}s(X,"_isMgrEnabled");function G($){var N=$.cookieCfg=$.cookieCfg||{};if((0,M.sO)(N,"domain",$.cookieDomain,M.BX,M.le),(0,M.sO)(N,"path",$.cookiePath||"/",null,M.le),(0,M.le)(N[je])){var ae=void 0;(0,M.o8)($[we])||(ae=!$[we]),(0,M.o8)($[Ae])||(ae=!$[Ae]),N[je]=ae}return N}s(G,"_createCookieMgrConfig");function k($,N){var ae;if($)ae=$.getCookieMgr();else if(N){var lt=N.cookieCfg;lt[A]?ae=lt[A]:ae=xe(N)}return ae||(ae=V(N,($||{}).logger)),ae}s(k,"safeGetCookieMgr");function xe($,N){var ae=G($||Pe),lt=ae.path||"/",Je=ae.domain,Qt=ae[je]!==!1,Yt={isEnabled:function(){var ne=Qt&&H(N),be=Pe[A];return ne&&be&&Yt!==be&&(ne=X(be)),ne},setEnabled:function(ne){Qt=ne!==!1},set:function(ne,be,Ne,Lt,rt){var Z=!1;if(X(Yt)){var _e={},Me=(0,M.nd)(be||D.SM),B=Me.indexOf(";");if(B!==-1&&(Me=(0,M.nd)(be.substring(0,B)),_e=We(be.substring(B+1))),(0,M.sO)(_e,"domain",Lt||Je,M.fQ,M.o8),!(0,M.le)(Ne)){var me=(0,K.w1)();if((0,M.o8)(_e[Se])){var ye=(0,M.m6)(),ct=ye+Ne*1e3;if(ct>0){var at=new Date;at.setTime(ct),(0,M.sO)(_e,Se,Ct(at,me?pe:oe)||Ct(at,me?pe:oe)||D.SM,M.fQ)}}me||(0,M.sO)(_e,"max-age",D.SM+Ne,null,M.o8)}var Pt=(0,K.k$)();Pt&&Pt.protocol==="https:"&&((0,M.sO)(_e,"secure",null,null,M.o8),Q===null&&(Q=!I(((0,K.jW)()||{}).userAgent)),Q&&(0,M.sO)(_e,"SameSite","None",null,M.o8)),(0,M.sO)(_e,"path",rt||lt,null,M.o8);var mt=ae.setCookie||qe;mt(ne,Re(Me,_e)),Z=!0}return Z},get:function(ne){var be=D.SM;return X(Yt)&&(be=(ae.getCookie||z)(ne)),be},del:function(ne,be){var Ne=!1;return X(Yt)&&(Ne=Yt.purge(ne,be)),Ne},purge:function(ne,be){var Ne,Lt=!1;if(H(N)){var rt=(Ne={},Ne.path=be||"/",Ne[Se]="Thu, 01 Jan 1970 00:00:01 GMT",Ne);(0,K.w1)()||(rt["max-age"]="0");var Z=ae.delCookie||qe;Z(ne,Re(D.SM,rt)),Lt=!0}return Lt}};return Yt[A]=Yt,Yt}s(xe,"createCookieMgr");function H($){if(j===null){j=!1;try{var N=Ee||{};j=N[W]!==void 0}catch(ae){(0,U.kP)($,2,68,"Cannot access document.cookie - "+(0,M.jj)(ae),{exception:(0,K.eU)(ae)})}}return j}s(H,"areCookiesSupported");function We($){var N={};if($&&$.length){var ae=(0,M.nd)($).split(";");(0,M.tO)(ae,function(lt){if(lt=(0,M.nd)(lt||D.SM),lt){var Je=lt.indexOf("=");Je===-1?N[lt]=null:N[(0,M.nd)(lt.substring(0,Je))]=(0,M.nd)(lt.substring(Je+1))}})}return N}s(We,"_extractParts");function Ct($,N){return(0,M.mf)($[N])?$[N]():null}s(Ct,"_formatDate");function Re($,N){var ae=$||D.SM;return(0,M.rW)(N,function(lt,Je){ae+="; "+lt+((0,M.le)(Je)?D.SM:"="+Je)}),ae}s(Re,"_formatCookieValue");function z($){var N=D.SM;if(Ee){var ae=Ee[W]||D.SM;re!==ae&&(De=We(ae),re=ae),N=(0,M.nd)(De[$]||D.SM)}return N}s(z,"_getCookieValue");function qe($,N){Ee&&(Ee[W]=$+"="+N)}s(qe,"_setCookieValue");function I($){return(0,M.HD)($)?!!((0,M._Q)($,"CPU iPhone OS 12")||(0,M._Q)($,"iPad; CPU OS 12")||(0,M._Q)($,"Macintosh; Intel Mac OS X 10_14")&&(0,M._Q)($,"Version/")&&(0,M._Q)($,"Safari")||(0,M._Q)($,"Macintosh; Intel Mac OS X 10_14")&&(0,M.Id)($,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,M._Q)($,"Chrome/5")||(0,M._Q)($,"Chrome/6")||(0,M._Q)($,"UnrealEngine")&&!(0,M._Q)($,"Chrome")||(0,M._Q)($,"UCBrowser/12")||(0,M._Q)($,"UCBrowser/11")):!1}s(I,"uaDisallowsSameSiteNone")},843:(Ft,de,f)=>{"use strict";f.d(de,{GW:()=>Ae,Jj:()=>A,DO:()=>Q,zB:()=>De});var K=f(91),M=f(242),D=f(630),U=f(708),pe=f(869),oe=f(878),W=f(41),Se=null,je,we=null;function Ae(){function H(){return(0,oe.az)(15)}return s(H,"randomHexDigit"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ee,function(We){var Ct=H()|0,Re=We==="x"?Ct:Ct&3|8;return Re.toString(16)})}s(Ae,"newGuid");function A(){var H=(0,D.r)();return H&&H.now?H.now():(0,U.m6)()}s(A,"perfNow");function j(H,We){if(H&&We){var Ct=H.length,Re=Ct-We.length;return H.substring(Re>=0?Re:0,Ct)===We}return!1}s(j,"strEndsWith");function Q(){for(var H=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],We=W.SM,Ct,Re=0;Re<4;Re++)Ct=(0,oe._l)(),We+=H[Ct&15]+H[Ct>>4&15]+H[Ct>>8&15]+H[Ct>>12&15]+H[Ct>>16&15]+H[Ct>>20&15]+H[Ct>>24&15]+H[Ct>>28&15];var z=H[8+((0,oe._l)()&3)|0];return We.substr(0,8)+We.substr(9,4)+"4"+We.substr(13,3)+z+We.substr(16,3)+We.substr(19,12)}s(Q,"generateW3CId");var re={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:K.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:pe.Ib,dateNow:U.m6,isIE:D.w1,disableCookies:V,newGuid:Ae,perfNow:A,newId:oe.pZ,randomValue:oe.az,random32:oe._l,mwcRandomSeed:oe.CN,mwcRandom32:oe.F6,generateW3CId:Q},Ee=/[xy]/g,De={Attach:pe.pZ,AttachEvent:pe.pZ,Detach:pe.pD,DetachEvent:pe.pD};function Pe(H,We){var Ct=(0,M.kj)(H,We),Re=re._canUseCookies;return Se===null&&(Se=[],je=Re,(0,U.l_)(re,"_canUseCookies",function(){return je},function(z){je=z,(0,U.tO)(Se,function(qe){qe.setEnabled(z)})})),(0,U.UA)(Se,Ct)===-1&&Se.push(Ct),(0,U.jn)(Re)&&Ct.setEnabled(Re),(0,U.jn)(je)&&Ct.setEnabled(je),Ct}s(Pe,"_legacyCookieMgr");function V(){Pe().setEnabled(!1)}s(V,"disableCookies");function X(H){return Pe(null,H).isEnabled()}s(X,"canUseCookies");function G(H,We){return Pe(null,H).get(We)}s(G,"getCookie");function k(H,We,Ct,Re){Pe(null,H).set(We,Ct,null,Re)}s(k,"setCookie");function xe(H,We){return Pe(null,H).del(We)}s(xe,"deleteCookie")},883:(Ft,de,f)=>{"use strict";f.d(de,{J:()=>Ae,K:()=>A});var K=f(392),M=f(708),D=f(878),U=K.RJ,pe="2.8.4",oe="."+(0,D.pZ)(6),W=0;function Se(j,Q,re){if(U)try{return U(j,Q,{value:re,enumerable:!1,configurable:!0}),!0}catch(Ee){}return!1}s(Se,"_createAccessor");function je(j){return j.nodeType===1||j.nodeType===9||!+j.nodeType}s(je,"_canAcceptData");function we(j,Q){var re=Q[j.id];if(!re){re={};try{je(Q)&&(Se(Q,j.id,re)||(Q[j.id]=re))}catch(Ee){}}return re}s(we,"_getCache");function Ae(j,Q){return Q===void 0&&(Q=!1),(0,M.Gf)(j+W+++(Q?"."+pe:"")+oe)}s(Ae,"createUniqueNamespace");function A(j){var Q={id:Ae("_aiData-"+(j||"")+"."+pe),accept:function(re){return je(re)},get:function(re,Ee,De,Pe){var V=re[Q.id];return V?V[(0,M.Gf)(Ee)]:(Pe&&(V=we(Q,re),V[(0,M.Gf)(Ee)]=De),De)},kill:function(re,Ee){if(re&&re[Ee])try{delete re[Ee]}catch(De){}}};return Q}s(A,"createElmNodeData")},158:(Ft,de,f)=>{"use strict";f.d(de,{j:()=>W,p:()=>Se});var K=f(630),M=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],D=null,U;function pe(je,we){return function(){var Ae=arguments,A=W(we);if(A){var j=A.listener;j&&j[je]&&j[je].apply(j,Ae)}}}s(pe,"_listenerProxyFunc");function oe(){var je=(0,K.a8)("Microsoft");return je&&(D=je.ApplicationInsights),D}s(oe,"_getExtensionNamespace");function W(je){var we=D;return!we&&je.disableDbgExt!==!0&&(we=D||oe()),we?we.ChromeDbgExt:null}s(W,"getDebugExt");function Se(je){if(!U){U={};for(var we=0;we<M.length;we++)U[M[we]]=pe(M[we],je)}return U}s(Se,"getDebugListener")},18:(Ft,de,f)=>{"use strict";f.d(de,{lQ:()=>j,vH:()=>Q,AQ:()=>re,kP:()=>De,jV:()=>Pe});var K=f(630),M=f(679),D=f(708),U=f(158),pe=f(41),oe="AI (Internal): ",W="AI: ",Se="AITR_",je="errorToConsole",we="warnToConsole";function Ae(X){return X?'"'+X.replace(/\"/g,pe.SM)+'"':pe.SM}s(Ae,"_sanitizeDiagnosticText");function A(X,G){var k=(0,K.dr)();if(k){var xe="log";k[X]&&(xe=X),(0,D.mf)(k[xe])&&k[xe](G)}}s(A,"_logToConsole");var j=function(){function X(G,k,xe,H){xe===void 0&&(xe=!1);var We=this;We.messageId=G,We.message=(xe?W:oe)+G;var Ct=pe.SM;(0,K.nS)()&&(Ct=(0,K.xA)().stringify(H));var Re=(k?" message:"+Ae(k):pe.SM)+(H?" props:"+Ae(Ct):pe.SM);We.message+=Re}return s(X,"_InternalLogMessage"),X.dataType="MessageData",X}();function Q(X,G){return(X||{}).logger||new re(G)}s(Q,"safeGetLogger");var re=function(){function X(G){this.identifier="DiagnosticLogger",this.queue=[];var k=0,xe={};(0,M.Z)(X,this,function(H){(0,D.le)(G)&&(G={}),H.consoleLoggingLevel=function(){return We("loggingLevelConsole",0)},H.telemetryLoggingLevel=function(){return We("loggingLevelTelemetry",1)},H.maxInternalMessageLimit=function(){return We("maxMessageLimit",25)},H.enableDebugExceptions=function(){return We("enableDebugExceptions",!1)},H.throwInternal=function(z,qe,I,$,N){N===void 0&&(N=!1);var ae=new j(qe,I,N,$);if(H.enableDebugExceptions())throw(0,K.eU)(ae);var lt=z===1?je:we;if((0,D.o8)(ae.message))Re("throw"+(z===1?"Critical":"Warning"),ae);else{var Je=H.consoleLoggingLevel();if(N){var Qt=+ae.messageId;!xe[Qt]&&Je>=z&&(H[lt](ae.message),xe[Qt]=!0)}else Je>=z&&H[lt](ae.message);H.logInternalMessage(z,ae)}},H.warnToConsole=function(z){A("warn",z),Re("warning",z)},H.errorToConsole=function(z){A("error",z),Re("error",z)},H.resetInternalMessageCount=function(){k=0,xe={}},H.logInternalMessage=function(z,qe){if(!Ct()){var I=!0,$=Se+qe.messageId;if(xe[$]?I=!1:xe[$]=!0,I&&(z<=H.telemetryLoggingLevel()&&(H.queue.push(qe),k++,Re(z===1?"error":"warn",qe)),k===H.maxInternalMessageLimit())){var N="Internal events throttle limit per PageView reached for this app.",ae=new j(23,N,!1);H.queue.push(ae),z===1?H.errorToConsole(N):H.warnToConsole(N)}}};function We(z,qe){var I=G[z];return(0,D.le)(I)?qe:I}s(We,"_getConfigValue");function Ct(){return k>=H.maxInternalMessageLimit()}s(Ct,"_areInternalMessagesThrottled");function Re(z,qe){var I=(0,U.j)(G);I&&I.diagLog&&I.diagLog(z,qe)}s(Re,"_debugExtMsg")})}return s(X,"DiagnosticLogger"),X}();function Ee(X){return X||new re}s(Ee,"_getLogger");function De(X,G,k,xe,H,We){We===void 0&&(We=!1),(X||new re).throwInternal(G,k,xe,H,We)}s(De,"_throwInternal");function Pe(X,G){Ee(X).warnToConsole(G)}s(Pe,"_warnToConsole");function V(X,G,k){Ee(X).logInternalMessage(G,k)}s(V,"_logInternalMessage")},630:(Ft,de,f)=>{"use strict";f.d(de,{dI:()=>Ct,a8:()=>Re,Ym:()=>z,Jj:()=>qe,Nv:()=>I,Me:()=>$,d6:()=>N,jW:()=>ae,fE:()=>lt,s1:()=>Je,k$:()=>Qt,dr:()=>Yt,r:()=>ne,nS:()=>be,xA:()=>Ne,MX:()=>Lt,gz:()=>rt,b$:()=>Z,w1:()=>_e,sA:()=>Me,eU:()=>B,MF:()=>ye,JO:()=>ct,cp:()=>at,Z3:()=>Pt,ed:()=>cn,pI:()=>mn});var K=f(392),M=f(91),D=f(41),U=f(708),pe="window",oe="document",W="documentMode",Se="navigator",je="history",we="location",Ae="console",A="performance",j="JSON",Q="crypto",re="msCrypto",Ee="ReactNative",De="msie",Pe="trident/",V="XMLHttpRequest",X=null,G=null,k=!1,xe=null,H=null;function We(xt,Ht){var Xt=!1;if(xt){try{if(Xt=Ht in xt,!Xt){var ce=xt[K.hB];ce&&(Xt=Ht in ce)}}catch(Xr){}if(!Xt)try{var tr=new xt;Xt=!(0,U.o8)(tr[Ht])}catch(Xr){}}return Xt}s(We,"_hasProperty");function Ct(xt){k=xt}s(Ct,"setEnableEnvMocks");function Re(xt){var Ht=(0,M.Rd)();return Ht&&Ht[xt]?Ht[xt]:xt===pe&&z()?window:null}s(Re,"getGlobalInst");function z(){return Boolean(typeof window===K.fK&&window)}s(z,"hasWindow");function qe(){return z()?window:Re(pe)}s(qe,"getWindow");function I(){return Boolean(typeof document===K.fK&&document)}s(I,"hasDocument");function $(){return I()?document:Re(oe)}s($,"getDocument");function N(){return Boolean(typeof navigator===K.fK&&navigator)}s(N,"hasNavigator");function ae(){return N()?navigator:Re(Se)}s(ae,"getNavigator");function lt(){return Boolean(typeof history===K.fK&&history)}s(lt,"hasHistory");function Je(){return lt()?history:Re(je)}s(Je,"getHistory");function Qt(xt){if(xt&&k){var Ht=Re("__mockLocation");if(Ht)return Ht}return typeof location===K.fK&&location?location:Re(we)}s(Qt,"getLocation");function Yt(){return typeof console!==K.jA?console:Re(Ae)}s(Yt,"getConsole");function ne(){return Re(A)}s(ne,"getPerformance");function be(){return Boolean(typeof JSON===K.fK&&JSON||Re(j)!==null)}s(be,"hasJSON");function Ne(){return be()?JSON||Re(j):null}s(Ne,"getJSON");function Lt(){return Re(Q)}s(Lt,"getCrypto");function rt(){return Re(re)}s(rt,"getMsCrypto");function Z(){var xt=ae();return xt&&xt.product?xt.product===Ee:!1}s(Z,"isReactNative");function _e(){var xt=ae();if(xt&&(xt.userAgent!==G||X===null)){G=xt.userAgent;var Ht=(G||D.SM).toLowerCase();X=(0,U._Q)(Ht,De)||(0,U._Q)(Ht,Pe)}return X}s(_e,"isIE");function Me(xt){if(xt===void 0&&(xt=null),!xt){var Ht=ae()||{};xt=Ht?(Ht.userAgent||D.SM).toLowerCase():D.SM}var Xt=(xt||D.SM).toLowerCase();if((0,U._Q)(Xt,De)){var ce=$()||{};return Math.max(parseInt(Xt.split(De)[1]),ce[W]||0)}else if((0,U._Q)(Xt,Pe)){var tr=parseInt(Xt.split(Pe)[1]);if(tr)return tr+4}return null}s(Me,"getIEVersion");function B(xt){var Ht=Object[K.hB].toString.call(xt),Xt=D.SM;return Ht==="[object Error]"?Xt="{ stack: '"+xt.stack+"', message: '"+xt.message+"', name: '"+xt.name+"'":be()&&(Xt=Ne().stringify(xt)),Ht+Xt}s(B,"dumpObj");function me(xt){if(!xt||!isString(xt)){var Ht=ae()||{};xt=Ht?(Ht.userAgent||strEmpty).toLowerCase():strEmpty}var Xt=(xt||strEmpty).toLowerCase();return Xt.indexOf("safari")>=0}s(me,"isSafari");function ye(){return H===null&&(H=N()&&Boolean(ae().sendBeacon)),H}s(ye,"isBeaconsSupported");function ct(xt){var Ht=!1;try{Ht=!!Re("fetch");var Xt=Re("Request");Ht&&xt&&Xt&&(Ht=We(Xt,"keepalive"))}catch(ce){}return Ht}s(ct,"isFetchSupported");function at(){return xe===null&&(xe=typeof XDomainRequest!==K.jA,xe&&Pt()&&(xe=xe&&!We(Re(V),"withCredentials"))),xe}s(at,"useXDomainRequest");function Pt(){var xt=!1;try{var Ht=Re(V);xt=!!Ht}catch(Xt){}return xt}s(Pt,"isXhrSupported");function mt(xt,Ht){if(xt)for(var Xt=0;Xt<xt.length;Xt++){var ce=xt[Xt];if(ce.name&&ce.name===Ht)return ce}return{}}s(mt,"_getNamedValue");function cn(xt){var Ht=$();return Ht&&xt?mt(Ht.querySelectorAll("meta"),xt).content:null}s(cn,"findMetaTag");function mn(xt){var Ht,Xt=ne();if(Xt){var ce=Xt.getEntriesByType("navigation")||[];Ht=mt((ce.length>0?ce[0]:{}).serverTiming,xt).description}return Ht}s(mn,"findNamedServerTiming")},869:(Ft,de,f)=>{"use strict";f.d(de,{um:()=>H,jU:()=>I,XO:()=>$,QY:()=>N,pZ:()=>ae,pD:()=>lt,Ib:()=>Je,C1:()=>Qt,yw:()=>ne,nJ:()=>be,c9:()=>Ne,JA:()=>Lt,TJ:()=>rt,C9:()=>Z,nD:()=>_e,Yl:()=>Me});var K=f(883),M=f(630),D=f(708),U="on",pe="attachEvent",oe="addEventListener",W="detachEvent",Se="removeEventListener",je="events",we="visibilitychange",Ae="pagehide",A="pageshow",j="unload",Q="beforeunload",re=(0,K.J)("aiEvtPageHide"),Ee=(0,K.J)("aiEvtPageShow"),De=/\.[\.]+/g,Pe=/[\.]+$/,V=1,X=(0,K.K)("events"),G=/^([^.]*)(?:\.(.+)|)/;function k(B){return B&&B.replace?B.replace(/^\s*\.*|\.*\s*$/g,""):B}s(k,"_normalizeNamespace");function xe(B,me){if(me){var ye="";(0,D.kJ)(me)?(ye="",(0,D.tO)(me,function(at){at=k(at),at&&(at[0]!=="."&&(at="."+at),ye+=at)})):ye=k(me),ye&&(ye[0]!=="."&&(ye="."+ye),B=(B||"")+ye)}var ct=G.exec(B||"")||[];return{type:ct[1],ns:(ct[2]||"").replace(De,".").replace(Pe,"").split(".").sort().join(".")}}s(xe,"_getEvtNamespace");function H(B,me,ye){var ct=[],at=X.get(B,je,{},!1),Pt=xe(me,ye);return(0,D.rW)(at,function(mt,cn){(0,D.tO)(cn,function(mn){(!Pt.type||Pt.type===mn.evtName.type)&&(!Pt.ns||Pt.ns===Pt.ns)&&ct.push({name:mn.evtName.type+(mn.evtName.ns?"."+mn.evtName.ns:""),handler:mn.handler})})}),ct}s(H,"__getRegisteredEvents");function We(B,me,ye){ye===void 0&&(ye=!0);var ct=X.get(B,je,{},ye),at=ct[me];return at||(at=ct[me]=[]),at}s(We,"_getRegisteredEvents");function Ct(B,me,ye,ct){B&&me&&me.type&&(B[Se]?B[Se](me.type,ye,ct):B[W]&&B[W](U+me.type,ye))}s(Ct,"_doDetach");function Re(B,me,ye,ct){var at=!1;return B&&me&&me.type&&ye&&(B[oe]?(B[oe](me.type,ye,ct),at=!0):B[pe]&&(B[pe](U+me.type,ye),at=!0)),at}s(Re,"_doAttach");function z(B,me,ye,ct){for(var at=me.length;at--;){var Pt=me[at];Pt&&(!ye.ns||ye.ns===Pt.evtName.ns)&&(!ct||ct(Pt))&&(Ct(B,Pt.evtName,Pt.handler,Pt.capture),me.splice(at,1))}}s(z,"_doUnregister");function qe(B,me,ye){if(me.type)z(B,We(B,me.type),me,ye);else{var ct=X.get(B,je,{});(0,D.rW)(ct,function(at,Pt){z(B,Pt,me,ye)}),(0,D.FY)(ct).length===0&&X.kill(B,je)}}s(qe,"_unregisterEvents");function I(B,me){var ye;return me?((0,D.kJ)(me)?ye=[B].concat(me):ye=[B,me],ye=xe("xx",ye).ns.split(".")):ye=B,ye}s(I,"mergeEvtNamespace");function $(B,me,ye,ct,at){at===void 0&&(at=!1);var Pt=!1;if(B)try{var mt=xe(me,ct);if(Pt=Re(B,mt,ye,at),Pt&&X.accept(B)){var cn={guid:V++,evtName:mt,handler:ye,capture:at};We(B,mt.type).push(cn)}}catch(mn){}return Pt}s($,"eventOn");function N(B,me,ye,ct,at){if(at===void 0&&(at=!1),B)try{var Pt=xe(me,ct),mt=!1;qe(B,Pt,function(cn){return Pt.ns&&!ye||cn.handler===ye?(mt=!0,!0):!1}),mt||Ct(B,Pt,ye,at)}catch(cn){}}s(N,"eventOff");function ae(B,me,ye,ct){return ct===void 0&&(ct=!1),$(B,me,ye,null,ct)}s(ae,"attachEvent");function lt(B,me,ye,ct){ct===void 0&&(ct=!1),N(B,me,ye,null,ct)}s(lt,"detachEvent");function Je(B,me,ye){var ct=!1,at=(0,M.Jj)();at&&(ct=$(at,B,me,ye),ct=$(at.body,B,me,ye)||ct);var Pt=(0,M.Me)();return Pt&&(ct=$(Pt,B,me,ye)||ct),ct}s(Je,"addEventHandler");function Qt(B,me,ye){var ct=(0,M.Jj)();ct&&(N(ct,B,me,ye),N(ct.body,B,me,ye));var at=(0,M.Me)();at&&N(at,B,me,ye)}s(Qt,"removeEventHandler");function Yt(B,me,ye,ct){var at=!1;return me&&B&&B.length>0&&(0,D.tO)(B,function(Pt){Pt&&(!ye||(0,D.UA)(ye,Pt)===-1)&&(at=Je(Pt,me,ct)||at)}),at}s(Yt,"_addEventListeners");function ne(B,me,ye,ct){var at=!1;return me&&B&&(0,D.kJ)(B)&&(at=Yt(B,me,ye,ct),!at&&ye&&ye.length>0&&(at=Yt(B,me,null,ct))),at}s(ne,"addEventListeners");function be(B,me,ye){B&&(0,D.kJ)(B)&&(0,D.tO)(B,function(ct){ct&&Qt(ct,me,ye)})}s(be,"removeEventListeners");function Ne(B,me,ye){return ne([Q,j,Ae],B,me,ye)}s(Ne,"addPageUnloadEventListener");function Lt(B,me){be([Q,j,Ae],B,me)}s(Lt,"removePageUnloadEventListener");function rt(B,me,ye){function ct(mt){var cn=(0,M.Me)();B&&cn&&cn.visibilityState==="hidden"&&B(mt)}s(ct,"_handlePageVisibility");var at=I(re,ye),Pt=Yt([Ae],B,me,at);return(!me||(0,D.UA)(me,we)===-1)&&(Pt=Yt([we],ct,me,at)||Pt),!Pt&&me&&(Pt=rt(B,null,ye)),Pt}s(rt,"addPageHideEventListener");function Z(B,me){var ye=I(re,me);be([Ae],B,ye),be([we],null,ye)}s(Z,"removePageHideEventListener");function _e(B,me,ye){function ct(mt){var cn=(0,M.Me)();B&&cn&&cn.visibilityState==="visible"&&B(mt)}s(ct,"_handlePageVisibility");var at=I(Ee,ye),Pt=Yt([A],B,me,at);return Pt=Yt([we],ct,me,at)||Pt,!Pt&&me&&(Pt=_e(B,null,ye)),Pt}s(_e,"addPageShowEventListener");function Me(B,me){var ye=I(Ee,me);be([A],B,ye),be([we],null,ye)}s(Me,"removePageShowEventListener")},708:(Ft,de,f)=>{"use strict";f.d(de,{Ym:()=>lt,o8:()=>Je,le:()=>Yt,BX:()=>ne,nr:()=>be,Kn:()=>Ne,mf:()=>Lt,Gf:()=>Z,rW:()=>_e,Id:()=>Me,xe:()=>me,_Q:()=>ct,J_:()=>at,kJ:()=>Pt,VZ:()=>cn,HD:()=>mn,hj:()=>xt,jn:()=>Ht,Y6:()=>tr,tO:()=>cr,UA:()=>Jr,Mr:()=>Yr,Xz:()=>pi,nd:()=>qn,FY:()=>Gn,l_:()=>$r,_A:()=>Tn,FL:()=>ut,Xi:()=>ot,m6:()=>$e,jj:()=>ve,sO:()=>Ye,qK:()=>Ve,F:()=>Ge,fQ:()=>_t,_y:()=>Nt,cf:()=>Te,Oi:()=>et,Vb:()=>Oe,Ax:()=>O,mm:()=>un});var K=f(392),M=f(91),D=f(41),U="toISOString",pe="endsWith",oe="startsWith",W="indexOf",Se="map",je="reduce",we="trim",Ae="toString",A="__proto__",j="constructor",Q=K.RJ,re=K.Pw.freeze,Ee=K.Pw.seal,De=K.Pw.keys,Pe=String[K.hB],V=Pe[we],X=Pe[pe],G=Pe[oe],k=Date[K.hB],xe=k[U],H=Array.isArray,We=K.V4[Ae],Ct=K.CY[Ae],Re=Ct.call(K.Pw),z=/-([a-z])/g,qe=/([^\w\d_$])/g,I=/^(\d+[\w\d_$])/,$=Object.getPrototypeOf;function N(_){if(_){if($)return $(_);var ue=_[A]||_[K.hB]||_[j];if(ue)return ue}return null}s(N,"_getObjProto");function ae(_){return We.call(_)}s(ae,"objToString");function lt(_,ue){return typeof _===ue}s(lt,"isTypeof");function Je(_){return _===void 0||typeof _===K.jA}s(Je,"isUndefined");function Qt(_){return!Je(_)}s(Qt,"isNotUndefined");function Yt(_){return _===null||Je(_)}s(Yt,"isNullOrUndefined");function ne(_){return!Yt(_)}s(ne,"isNotNullOrUndefined");function be(_,ue){return!!(_&&K.CY.call(_,ue))}s(be,"hasOwnProperty");function Ne(_){return!!(_&&typeof _===K.fK)}s(Ne,"isObject");function Lt(_){return!!(_&&typeof _===K.cb)}s(Lt,"isFunction");function rt(_){return _&&Lt(_.then)}s(rt,"isPromiseLike");function Z(_){var ue=_;return ue&&mn(ue)&&(ue=ue.replace(z,function(ke,Qe){return Qe.toUpperCase()}),ue=ue.replace(qe,"_"),ue=ue.replace(I,function(ke,Qe){return"_"+Qe})),ue}s(Z,"normalizeJsName");function _e(_,ue){if(_)for(var ke in _)K.CY.call(_,ke)&&ue.call(_,ke,_[ke])}s(_e,"objForEachKey");function Me(_,ue){var ke=!1;return _&&ue&&!(ke=_===ue)&&(ke=X?_[pe](ue):B(_,ue)),ke}s(Me,"strEndsWith");function B(_,ue){var ke=!1,Qe=ue?ue.length:0,yt=_?_.length:0;if(Qe&&yt&&yt>=Qe&&!(ke=_===ue)){for(var J=yt-1,He=Qe-1;He>=0;He--){if(_[J]!=ue[He])return!1;J--}ke=!0}return ke}s(B,"_strEndsWithPoly");function me(_,ue){var ke=!1;return _&&ue&&!(ke=_===ue)&&(ke=G?_[oe](ue):ye(_,ue)),ke}s(me,"strStartsWith");function ye(_,ue){var ke=!1,Qe=ue?ue.length:0;if(_&&Qe&&_.length>=Qe&&!(ke=_===ue)){for(var yt=0;yt<Qe;yt++)if(_[yt]!==ue[yt])return!1;ke=!0}return ke}s(ye,"_strStartsWithPoly");function ct(_,ue){return _&&ue?_.indexOf(ue)!==-1:!1}s(ct,"strContains");function at(_){return!!(_&&We.call(_)==="[object Date]")}s(at,"isDate");var Pt=H||mt;function mt(_){return!!(_&&We.call(_)==="[object Array]")}s(mt,"_isArrayPoly");function cn(_){return!!(_&&We.call(_)==="[object Error]")}s(cn,"isError");function mn(_){return typeof _=="string"}s(mn,"isString");function xt(_){return typeof _=="number"}s(xt,"isNumber");function Ht(_){return typeof _=="boolean"}s(Ht,"isBoolean");function Xt(_){return typeof _=="symbol"}s(Xt,"isSymbol");function ce(_){var ue=!1;if(_&&typeof _=="object"){var ke=$?$(_):N(_);ke?(ke[j]&&K.CY.call(ke,j)&&(ke=ke[j]),ue=typeof ke===K.cb&&Ct.call(ke)===Re):ue=!0}return ue}s(ce,"isPlainObject");function tr(_){if(_)return xe?_[U]():Xr(_)}s(tr,"toISOString");function Xr(_){if(_&&_.getUTCFullYear){var ue=s(function(ke){var Qe=String(ke);return Qe.length===1&&(Qe="0"+Qe),Qe},"pad");return _.getUTCFullYear()+"-"+ue(_.getUTCMonth()+1)+"-"+ue(_.getUTCDate())+"T"+ue(_.getUTCHours())+":"+ue(_.getUTCMinutes())+":"+ue(_.getUTCSeconds())+"."+String((_.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}s(Xr,"_toISOStringPoly");function cr(_,ue,ke){var Qe=_.length;try{for(var yt=0;yt<Qe&&!(yt in _&&ue.call(ke||_,_[yt],yt,_)===-1);yt++);}catch(J){}}s(cr,"arrForEach");function Jr(_,ue,ke){if(_){if(_[W])return _[W](ue,ke);var Qe=_.length,yt=ke||0;try{for(var J=Math.max(yt>=0?yt:Qe-Math.abs(yt),0);J<Qe;J++)if(J in _&&_[J]===ue)return J}catch(He){}}return-1}s(Jr,"arrIndexOf");function Yr(_,ue,ke){var Qe;if(_){if(_[Se])return _[Se](ue,ke);var yt=_.length,J=ke||_;Qe=new Array(yt);try{for(var He=0;He<yt;He++)He in _&&(Qe[He]=ue.call(J,_[He],_))}catch(St){}}return Qe}s(Yr,"arrMap");function pi(_,ue,ke){var Qe;if(_){if(_[je])return _[je](ue,ke);var yt=_.length,J=0;if(arguments.length>=3)Qe=arguments[2];else{for(;J<yt&&!(J in _);)J++;Qe=_[J++]}for(;J<yt;)J in _&&(Qe=ue(Qe,_[J],J,_)),J++}return Qe}s(pi,"arrReduce");function qn(_){return _&&(_=V&&_[we]?_[we]():_.replace?_.replace(/^\s+|\s+$/g,""):_),_}s(qn,"strTrim");var Wr=!{toString:null}.propertyIsEnumerable("toString"),Pr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Gn(_){var ue=typeof _;if(ue!==K.cb&&(ue!==K.fK||_===null)&&(0,M.ZU)("objKeys called on non-object"),!Wr&&De)return De(_);var ke=[];for(var Qe in _)_&&K.CY.call(_,Qe)&&ke.push(Qe);if(Wr)for(var yt=Pr.length,J=0;J<yt;J++)_&&K.CY.call(_,Pr[J])&&ke.push(Pr[J]);return ke}s(Gn,"objKeys");function $r(_,ue,ke,Qe){if(Q)try{var yt={enumerable:!0,configurable:!0};return ke&&(yt.get=ke),Qe&&(yt.set=Qe),Q(_,ue,yt),!0}catch(J){}return!1}s($r,"objDefineAccessors");function ur(_){return _}s(ur,"_doNothing");function Tn(_){return re&&_e(_,function(ue,ke){(Pt(ke)||Ne(ke))&&re(ke)}),ut(_)}s(Tn,"deepFreeze");var ut=re||ur,ot=Ee||ur;function $e(){var _=Date;return _.now?_.now():new _().getTime()}s($e,"dateNow");function ve(_){return cn(_)?_.name:D.SM}s(ve,"getExceptionName");function Ye(_,ue,ke,Qe,yt){var J=ke;return _&&(J=_[ue],J!==ke&&(!yt||yt(J))&&(!Qe||Qe(ke))&&(J=ke,_[ue]=J)),J}s(Ye,"setValue");function Ve(_,ue,ke){var Qe;return _?(Qe=_[ue],!Qe&&Yt(Qe)&&(Qe=Je(ke)?{}:ke,_[ue]=Qe)):Qe=Je(ke)?{}:ke,Qe}s(Ve,"getSetValue");function Ge(_){return!_}s(Ge,"isNotTruthy");function _t(_){return!!_}s(_t,"isTruthy");function Nt(_){throw new Error(_)}s(Nt,"throwError");function Ut(_,ue){var ke=null,Qe=null;return Lt(_)?ke=_:Qe=_,function(){var yt=arguments;if(ke&&(Qe=ke()),Qe)return Qe[ue].apply(Qe,yt)}}s(Ut,"_createProxyFunction");function Te(_,ue,ke){if(_&&ue&&Ne(_)&&Ne(ue)){var Qe=s(function(J){if(mn(J)){var He=ue[J];Lt(He)?(!ke||ke(J,!0,ue,_))&&(_[J]=Ut(ue,J)):(!ke||ke(J,!1,ue,_))&&(be(_,J)&&delete _[J],$r(_,J,function(){return ue[J]},function(St){ue[J]=St})||(_[J]=He))}},"_loop_1");for(var yt in ue)Qe(yt)}return _}s(Te,"proxyAssign");function et(_,ue,ke,Qe,yt){_&&ue&&ke&&(yt!==!1||Je(_[ue]))&&(_[ue]=Ut(ke,Qe))}s(et,"proxyFunctionAs");function Oe(_,ue,ke,Qe){return _&&ue&&Ne(_)&&Pt(ke)&&cr(ke,function(yt){mn(yt)&&et(_,yt,ue,yt,Qe)}),_}s(Oe,"proxyFunctions");function dt(_){return function(){function ue(){var ke=this;_&&_e(_,function(Qe,yt){ke[Qe]=yt})}return s(ue,"class_1"),ue}()}s(dt,"createClassFromInterface");function O(_){return _&&K.rl&&(_=(0,K.Pw)((0,K.rl)({},_))),_}s(O,"optimizeObject");function un(_,ue,ke,Qe,yt,J){var He=arguments,St=He[0]||{},Ue=He.length,Ie=!1,Dt=1;for(Ue>0&&Ht(St)&&(Ie=St,St=He[Dt]||{},Dt++),Ne(St)||(St={});Dt<Ue;Dt++){var It=He[Dt],tt=Pt(It),$t=Ne(It);for(var qt in It){var nn=tt&&qt in It||$t&&K.CY.call(It,qt);if(!!nn){var En=It[qt],$n=void 0;if(Ie&&En&&(($n=Pt(En))||ce(En))){var pn=St[qt];$n?Pt(pn)||(pn=[]):ce(pn)||(pn={}),En=un(Ie,pn,En)}En!==void 0&&(St[qt]=En)}}}return St}s(un,"objExtend")},41:(Ft,de,f)=>{"use strict";f.d(de,{SM:()=>K,i9:()=>M,Nz:()=>D,El:()=>U,Vr:()=>pe,vE:()=>oe,Gc:()=>W,Rw:()=>Se,C0:()=>je,Ho:()=>we,Z_:()=>Ae,Mf:()=>A,nE:()=>j,dV:()=>re,XP:()=>Ee,eO:()=>De,H4:()=>Pe,rX:()=>V,SN:()=>X});var K="",M="processTelemetry",D="priority",U="setNextPlugin",pe="isInitialized",oe="teardown",W="core",Se="update",je="disabled",we="_doTeardown",Ae="processNext",A="resume",j="pause",Q="NotificationListener",re="add"+Q,Ee="remove"+Q,De="eventsSent",Pe="eventsDiscarded",V="eventsSendRequest",X="perfEvent"},288:(Ft,de,f)=>{"use strict";f.d(de,{zn:()=>pe,Jk:()=>oe,Lm:()=>Se,j5:()=>we});var K=f(679),M=f(708),D="ctx",U=null,pe=function(){function Ae(A,j,Q){var re=this,Ee=!1;if(re.start=(0,M.m6)(),re.name=A,re.isAsync=Q,re.isChildEvt=function(){return!1},(0,M.mf)(j)){var De;Ee=(0,M.l_)(re,"payload",function(){return!De&&(0,M.mf)(j)&&(De=j(),j=null),De})}re.getCtx=function(Pe){return Pe?Pe===Ae.ParentContextKey||Pe===Ae.ChildrenContextKey?re[Pe]:(re[D]||{})[Pe]:null},re.setCtx=function(Pe,V){if(Pe)if(Pe===Ae.ParentContextKey)re[Pe]||(re.isChildEvt=function(){return!0}),re[Pe]=V;else if(Pe===Ae.ChildrenContextKey)re[Pe]=V;else{var X=re[D]=re[D]||{};X[Pe]=V}},re.complete=function(){var Pe=0,V=re.getCtx(Ae.ChildrenContextKey);if((0,M.kJ)(V))for(var X=0;X<V.length;X++){var G=V[X];G&&(Pe+=G.time)}re.time=(0,M.m6)()-re.start,re.exTime=re.time-Pe,re.complete=function(){},!Ee&&(0,M.mf)(j)&&(re.payload=j())}}return s(Ae,"PerfEvent"),Ae.ParentContextKey="parent",Ae.ChildrenContextKey="childEvts",Ae}(),oe=function(){function Ae(A){this.ctx={},(0,K.Z)(Ae,this,function(j){j.create=function(Q,re,Ee){return new pe(Q,re,Ee)},j.fire=function(Q){Q&&(Q.complete(),A&&(0,M.mf)(A.perfEvent)&&A.perfEvent(Q))},j.setCtx=function(Q,re){if(Q){var Ee=j[D]=j[D]||{};Ee[Q]=re}},j.getCtx=function(Q){return(j[D]||{})[Q]}})}return s(Ae,"PerfManager"),Ae}(),W="CoreUtils.doPerf";function Se(Ae,A,j,Q,re){if(Ae){var Ee=Ae;if((0,M.mf)(Ee.getPerfMgr)&&(Ee=Ee.getPerfMgr()),Ee){var De=void 0,Pe=Ee.getCtx(W);try{if(De=Ee.create(A(),Q,re),De){if(Pe&&De.setCtx&&(De.setCtx(pe.ParentContextKey,Pe),Pe.getCtx&&Pe.setCtx)){var V=Pe.getCtx(pe.ChildrenContextKey);V||(V=[],Pe.setCtx(pe.ChildrenContextKey,V)),V.push(De)}return Ee.setCtx(W,De),j(De)}}catch(X){De&&De.setCtx&&De.setCtx("exception",X)}finally{De&&Ee.fire(De),Ee.setCtx(W,Pe)}}}return j()}s(Se,"doPerf");function je(Ae){U=Ae}s(je,"setGblPerfMgr");function we(){return U}s(we,"getGblPerfMgr")},589:(Ft,de,f)=>{"use strict";f.d(de,{CD:()=>j,Bt:()=>Q,xy:()=>re,jV:()=>Ee,Vi:()=>Pe});var K=f(18),M=f(708),D=f(288),U=f(630),pe=f(41),oe=f(833),W="TelemetryPluginChain",Se="_hasRun",je="_getTelCtx",we=0;function Ae(V,X,G){for(;V;){if(V.getPlugin()===G)return V;V=V.getNext()}return Ee([G],X.config||{},X)}s(Ae,"_getNextProxyStart");function A(V,X,G,k){var xe=null,H=[];k!==null&&(xe=k?Ae(V,G,k):V);var We={_next:Re,ctx:{core:function(){return G},diagLog:function(){return(0,K.vH)(G,X)},getCfg:function(){return X},getExtCfg:z,getConfig:qe,hasNext:function(){return!!xe},getNext:function(){return xe},setNext:function($){xe=$},iterate:I,onComplete:Ct}};function Ct($,N){for(var ae=[],lt=2;lt<arguments.length;lt++)ae[lt-2]=arguments[lt];$&&H.push({func:$,self:(0,M.o8)(N)?We.ctx:N,args:ae})}s(Ct,"_addOnComplete");function Re(){var $=xe;if(xe=$?$.getNext():null,!$){var N=H;N&&N.length>0&&((0,M.tO)(N,function(ae){try{ae.func.call(ae.self,ae.args)}catch(lt){(0,K.kP)(G.logger,2,73,"Unexpected Exception during onComplete - "+(0,U.eU)(lt))}}),H=[])}return $}s(Re,"_moveNext");function z($,N,ae){N===void 0&&(N={}),ae===void 0&&(ae=0);var lt;if(X){var Je=X.extensionConfig;Je&&$&&(lt=Je[$])}if(!lt)lt=N;else if((0,M.Kn)(N)&&ae!==0){var Qt=(0,M.mm)(!0,N,lt);X&&ae===2&&(0,M.rW)(N,function(Yt){if((0,M.le)(Qt[Yt])){var ne=X[Yt];(0,M.le)(ne)||(Qt[Yt]=ne)}}),lt=Qt}return lt}s(z,"_getExtCfg");function qe($,N,ae){ae===void 0&&(ae=!1);var lt,Je=z($,null);return Je&&!(0,M.le)(Je[N])?lt=Je[N]:X&&!(0,M.le)(X[N])&&(lt=X[N]),(0,M.le)(lt)?ae:lt}s(qe,"_getConfig");function I($){for(var N;N=We._next();){var ae=N.getPlugin();ae&&$(ae)}}return s(I,"_iterateChain"),We}s(A,"_createInternalContext");function j(V,X,G,k){var xe=A(V,X,G,k),H=xe.ctx;function We(Re){var z=xe._next();return z&&z.processTelemetry(Re,H),!z}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,X,G,z)),j(Re||H.getNext(),X,G,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(j,"createProcessTelemetryContext");function Q(V,X,G){var k=X.config||{},xe=A(V,k,X,G),H=xe.ctx;function We(Re){var z=xe._next();return z&&z.unload(H,Re),!z}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,k,X,z)),Q(Re||H.getNext(),X,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(Q,"createProcessTelemetryUnloadContext");function re(V,X,G){var k=X.config||{},xe=A(V,k,X,G),H=xe.ctx;function We(Re){return H.iterate(function(z){(0,M.mf)(z.update)&&z.update(H,Re)})}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,k,X,z)),re(Re||H.getNext(),X,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(re,"createProcessTelemetryUpdateContext");function Ee(V,X,G,k){var xe=null,H=!k;if((0,M.kJ)(V)&&V.length>0){var We=null;(0,M.tO)(V,function(Ct){if(!H&&k===Ct&&(H=!0),H&&Ct&&(0,M.mf)(Ct.processTelemetry)){var Re=De(Ct,X,G);xe||(xe=Re),We&&We._setNext(Re),We=Re}})}return k&&!xe?Ee([k],X,G):xe}s(Ee,"createTelemetryProxyChain");function De(V,X,G){var k=null,xe=(0,M.mf)(V.processTelemetry),H=(0,M.mf)(V.setNextPlugin),We;V?We=V.identifier+"-"+V.priority+"-"+we++:We="Unknown-0-"+we++;var Ct={getPlugin:function(){return V},getNext:function(){return k},processTelemetry:qe,unload:I,update:$,_id:We,_setNext:function(N){k=N}};function Re(){var N;return V&&(0,M.mf)(V[je])&&(N=V[je]()),N||(N=j(Ct,X,G)),N}s(Re,"_getTelCtx");function z(N,ae,lt,Je,Qt){var Yt=!1,ne=V?V.identifier:W,be=N[Se];return be||(be=N[Se]={}),N.setNext(k),V&&(0,D.Lm)(N[pe.Gc](),function(){return ne+":"+lt},function(){be[We]=!0;try{var Ne=k?k._id:pe.SM;Ne&&(be[Ne]=!1),Yt=ae(N)}catch(rt){var Lt=k?be[k._id]:!0;Lt&&(Yt=!0),(!k||!Lt)&&(0,K.kP)(N.diagLog(),1,73,"Plugin ["+ne+"] failed during "+lt+" - "+(0,U.eU)(rt)+", run flags: "+(0,U.eU)(be))}},Je,Qt),Yt}s(z,"_processChain");function qe(N,ae){ae=ae||Re();function lt(Je){if(!V||!xe)return!1;var Qt=(0,oe.OY)(V);return Qt.teardown||Qt[pe.C0]?!1:(H&&V.setNextPlugin(k),V.processTelemetry(N,Je),!0)}s(lt,"_callProcessTelemetry"),z(ae,lt,"processTelemetry",function(){return{item:N}},!N.sync)||ae.processNext(N)}s(qe,"_processTelemetry");function I(N,ae){function lt(){var Je=!1;if(V){var Qt=(0,oe.OY)(V),Yt=V[pe.Gc]||Qt.core;V&&(!Yt||Yt===N[pe.Gc]())&&!Qt[pe.vE]&&(Qt[pe.Gc]=null,Qt[pe.vE]=!0,Qt[pe.Vr]=!1,V[pe.vE]&&V[pe.vE](N,ae)===!0&&(Je=!0))}return Je}s(lt,"_callTeardown"),z(N,lt,"unload",function(){},ae.isAsync)||N.processNext(ae)}s(I,"_unloadPlugin");function $(N,ae){function lt(){var Je=!1;if(V){var Qt=(0,oe.OY)(V),Yt=V[pe.Gc]||Qt.core;V&&(!Yt||Yt===N[pe.Gc]())&&!Qt[pe.vE]&&V[pe.Rw]&&V[pe.Rw](N,ae)===!0&&(Je=!0)}return Je}s(lt,"_callUpdate"),z(N,lt,"update",function(){},!1)||N.processNext(ae)}return s($,"_updatePlugin"),(0,M.FL)(Ct)}s(De,"createTelemetryPluginProxy");var Pe=function(){function V(X,G,k,xe){var H=this,We=j(X,G,k,xe);(0,M.Vb)(H,We,(0,M.FY)(We))}return s(V,"ProcessTelemetryContext"),V}()},878:(Ft,de,f)=>{"use strict";f.d(de,{az:()=>Ae,_l:()=>A,CN:()=>j,F6:()=>Q,pZ:()=>re});var K=f(630),M=f(708),D=f(41),U=4294967296,pe=4294967295,oe=!1,W=123456789,Se=987654321;function je(Ee){Ee<0&&(Ee>>>=0),W=123456789+Ee&pe,Se=987654321-Ee&pe,oe=!0}s(je,"_mwcSeed");function we(){try{var Ee=(0,M.m6)()&2147483647;je((Math.random()*U^Ee)+Ee)}catch(De){}}s(we,"_autoSeedMwc");function Ae(Ee){return Ee>0?Math.floor(A()/pe*(Ee+1))>>>0:0}s(Ae,"randomValue");function A(Ee){var De=0,Pe=(0,K.MX)()||(0,K.gz)();return Pe&&Pe.getRandomValues&&(De=Pe.getRandomValues(new Uint32Array(1))[0]&pe),De===0&&(0,K.w1)()&&(oe||we(),De=Q()&pe),De===0&&(De=Math.floor(U*Math.random()|0)),Ee||(De>>>=0),De}s(A,"random32");function j(Ee){Ee?je(Ee):we()}s(j,"mwcRandomSeed");function Q(Ee){Se=36969*(Se&65535)+(Se>>16)&pe,W=18e3*(W&65535)+(W>>16)&pe;var De=(Se<<16)+(W&65535)>>>0&pe|0;return Ee||(De>>>=0),De}s(Q,"mwcRandom32");function re(Ee){Ee===void 0&&(Ee=22);for(var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pe=A()>>>0,V=0,X=D.SM;X.length<Ee;)V++,X+=De.charAt(Pe&63),Pe>>>=6,V===5&&(Pe=(A()<<2&4294967295|Pe&3)>>>0,V=0);return X}s(re,"newId")},833:(Ft,de,f)=>{"use strict";f.d(de,{OY:()=>W,bP:()=>Se,AA:()=>je,Yn:()=>Ae});var K=f(708),M=f(41),D=f(883),U=f(206),pe="_doUnload",oe=(0,D.K)("plugin");function W(A){return oe.get(A,"state",{},!0)}s(W,"_getPluginState");function Se(A,j){for(var Q=[],re=null,Ee=A.getNext(),De;Ee;){var Pe=Ee.getPlugin();if(Pe){re&&(0,K.mf)(re[M.El])&&(0,K.mf)(Pe[M.i9])&&re[M.El](Pe);var V=!1;(0,K.mf)(Pe[M.Vr])?V=Pe[M.Vr]():(De=W(Pe),V=De[M.Vr]),V||Q.push(Pe),re=Pe,Ee=Ee.getNext()}}(0,K.tO)(Q,function(X){var G=A.core();X.initialize(A.getCfg(),G,j,A.getNext()),De=W(X),!X[M.Gc]&&!De[M.Gc]&&(De[M.Gc]=G),De[M.Vr]=!0,delete De[M.vE]})}s(Se,"initializePlugins");function je(A){return A.sort(function(j,Q){var re=0;if(Q){var Ee=(0,K.mf)(Q[M.i9]);(0,K.mf)(j[M.i9])?re=Ee?j[M.Nz]-Q[M.Nz]:1:Ee&&(re=-1)}else re=j?1:-1;return re})}s(je,"sortPlugins");function we(A,j,Q,re){var Ee=0;function De(){for(;Ee<A.length;){var Pe=A[Ee++];if(Pe){var V=Pe[pe]||Pe[strDoTeardown];if(isFunction(V)&&V.call(Pe,j,Q,De)===!0)return!0}}}return s(De,"_doUnload"),De()}s(we,"unloadComponents");function Ae(A){var j={};return{getName:function(){return j.name},setName:function(Q){A&&A.setName(Q),j.name=Q},getTraceId:function(){return j.traceId},setTraceId:function(Q){A&&A.setTraceId(Q),(0,U.jN)(Q)&&(j.traceId=Q)},getSpanId:function(){return j.spanId},setSpanId:function(Q){A&&A.setSpanId(Q),(0,U.Lc)(Q)&&(j.spanId=Q)},getTraceFlags:function(){return j.traceFlags},setTraceFlags:function(Q){A&&A.setTraceFlags(Q),j.traceFlags=Q}}}s(Ae,"createDistributedTraceContext")},310:(Ft,de,f)=>{"use strict";f.d(de,{Y:()=>U});var K=f(18),M=f(630),D=f(708);function U(){var pe=[];function oe(Se){Se&&pe.push(Se)}s(oe,"_addHandler");function W(Se,je){(0,D.tO)(pe,function(we){try{we(Se,je)}catch(Ae){(0,K.kP)(Se.diagLog(),2,73,"Unexpected error calling unload handler - "+(0,M.eU)(Ae))}}),pe=[]}return s(W,"_runHandlers"),{add:oe,run:W}}s(U,"createUnloadHandlerContainer")},206:(Ft,de,f)=>{"use strict";f.d(de,{SU:()=>j,j_:()=>Q,jN:()=>re,Lc:()=>Ee,J6:()=>De,Pn:()=>Pe,aR:()=>V,lq:()=>X});var K=f(843),M=f(630),D=f(708),U=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,pe="00",oe="ff",W="00000000000000000000000000000000",Se="0000000000000000",je=1;function we(G,k,xe){return G&&G.length===k&&G!==xe?!!G.match(/^[\da-f]*$/):!1}s(we,"_isValid");function Ae(G,k,xe){return we(G,k)?G:xe}s(Ae,"_formatValue");function A(G){(isNaN(G)||G<0||G>255)&&(G=1);for(var k=G.toString(16);k.length<2;)k="0"+k;return k}s(A,"_formatFlags");function j(G,k,xe,H){return{version:we(H,2,oe)?H:pe,traceId:re(G)?G:(0,K.DO)(),spanId:Ee(k)?k:(0,K.DO)().substr(0,16),traceFlags:xe>=0&&xe<=255?xe:1}}s(j,"createTraceParent");function Q(G){if(!G||((0,D.kJ)(G)&&(G=G[0]||""),!G||!(0,D.HD)(G)||G.length>8192))return null;var k=U.exec((0,D.nd)(G));return!k||k[1]===oe||k[2]===W||k[3]===Se?null:{version:k[1],traceId:k[2],spanId:k[3],traceFlags:parseInt(k[4],16)}}s(Q,"parseTraceParent");function re(G){return we(G,32,W)}s(re,"isValidTraceId");function Ee(G){return we(G,16,Se)}s(Ee,"isValidSpanId");function De(G){return!(!G||!we(G.version,2,oe)||!we(G.traceId,32,W)||!we(G.spanId,16,Se)||!we(A(G.traceFlags),2))}s(De,"isValidTraceParent");function Pe(G){return De(G)?(G.traceFlags&je)===je:!1}s(Pe,"isSampledFlag");function V(G){if(G){var k=A(G.traceFlags);we(k,2)||(k="01");var xe=G.version||pe;return xe!=="00"&&xe!=="ff"&&(xe=pe),"".concat(xe,"-").concat(Ae(G.traceId,32,W),"-").concat(Ae(G.spanId,16,Se),"-").concat(k)}return""}s(V,"formatTraceParent");function X(){var G="traceparent",k=Q((0,M.ed)(G));return k||(k=Q((0,M.pI)(G))),k}s(X,"findW3cTraceParent")},392:(Ft,de,f)=>{"use strict";f.d(de,{cb:()=>K,fK:()=>M,jA:()=>D,hB:()=>U,bO:()=>pe,Pw:()=>W,V4:()=>Se,rl:()=>je,yu:()=>we,RJ:()=>Ae,CY:()=>A});var K="function",M="object",D="undefined",U="prototype",pe="hasOwnProperty",oe="default",W=Object,Se=W[U],je=W.assign,we=W.create,Ae=W.defineProperty,A=Se[pe]},91:(Ft,de,f)=>{"use strict";f.d(de,{Rd:()=>D,ZU:()=>U,pu:()=>pe});var K=f(392),M=null;function D(oe){return oe===void 0&&(oe=!0),(!M||!oe)&&(typeof globalThis!==K.jA&&globalThis&&(M=globalThis),typeof self!==K.jA&&self&&(M=self),typeof window!==K.jA&&window&&(M=window),typeof f.g!==K.jA&&f.g&&(M=f.g)),M}s(D,"getGlobal");function U(oe){throw new TypeError(oe)}s(U,"throwTypeError");function pe(oe){var W=K.yu;if(W)return W(oe);if(oe==null)return{};var Se=typeof oe;Se!==K.fK&&Se!==K.cb&&U("Object prototype may only be an Object:"+oe);function je(){}return s(je,"tmpFunc"),je[K.hB]=oe,new je}s(pe,"objCreateFn")},88:(Ft,de,f)=>{"use strict";f.d(de,{uc:()=>A,ne:()=>Q,$h:()=>H});var K=f(392),M=f(91),D=((0,M.Rd)()||{}).Symbol,U=((0,M.Rd)()||{}).Reflect,pe=!!D,oe=!!U,W="decorate",Se="metadata",je="getOwnPropertySymbols",we="iterator",Ae=s(function(z){for(var qe,I=1,$=arguments.length;I<$;I++){qe=arguments[I];for(var N in qe)K.V4[K.bO].call(qe,N)&&(z[N]=qe[N])}return z},"__objAssignFnImpl"),A=K.rl||Ae,j=s(function(z,qe){return j=K.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,$){I.__proto__=$}||function(I,$){for(var N in $)$[K.bO](N)&&(I[N]=$[N])},j(z,qe)},"extendStaticsFn");function Q(z,qe){typeof qe!==K.cb&&qe!==null&&(0,M.ZU)("Class extends value "+String(qe)+" is not a constructor or null"),j(z,qe);function I(){this.constructor=z}s(I,"__"),z[K.hB]=qe===null?(0,M.pu)(qe):(I[K.hB]=qe[K.hB],new I)}s(Q,"__extendsFn");function re(z,qe){var I={};for(var $ in z)ObjHasOwnProperty.call(z,$)&&qe.indexOf($)<0&&(I[$]=z[$]);if(z!=null&&typeof ObjClass[je]===strShimFunction)for(var N=0,ae=ObjClass[je](z);N<ae.length;N++)qe.indexOf(ae[N])<0&&ObjProto.propertyIsEnumerable.call(z,ae[N])&&(I[ae[N]]=z[ae[N]]);return I}s(re,"__restFn");function Ee(z,qe,I,$){var N=arguments.length,ae=N<3?qe:$===null?$=ObjClass.getOwnPropertyDescriptor(qe,I):$,lt;if(oe&&typeof U[W]===strShimFunction)ae=U[W](z,qe,I,$);else for(var Je=z.length-1;Je>=0;Je--)(lt=z[Je])&&(ae=(N<3?lt(ae):N>3?lt(qe,I,ae):lt(qe,I))||ae);return N>3&&ae&&ObjDefineProperty(qe,I,ae),ae}s(Ee,"__decorateFn");function De(z,qe){return function(I,$){qe(I,$,z)}}s(De,"__paramFn");function Pe(z,qe){if(oe&&U[Se]===strShimFunction)return U[Se](z,qe)}s(Pe,"__metadataFn");function V(z,qe){for(var I in z)I!==strDefault&&!ObjHasOwnProperty.call(qe,I)&&X(qe,z,I)}s(V,"__exportStarFn");function X(z,qe,I,$){$===void 0&&($=I),ObjCreate?ObjDefineProperty(z,$,{enumerable:!0,get:function(){return qe[I]}}):z[$]=qe[I]}s(X,"__createBindingFn");function G(z){var qe=typeof D===strShimFunction&&D[we],I=qe&&z[qe],$=0;if(I)return I.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&$>=z.length&&(z=void 0),{value:z&&z[$++],done:!z}}};throwTypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}s(G,"__valuesFn");function k(z,qe){var I=typeof D===strShimFunction&&z[D[we]];if(!I)return z;var $=I.call(z),N,ae=[],lt;try{for(;(qe===void 0||qe-- >0)&&!(N=$.next()).done;)ae.push(N.value)}catch(Je){lt={error:Je}}finally{try{N&&!N.done&&(I=$.return)&&I.call($)}finally{if(lt)throw lt.error}}return ae}s(k,"__readFn");function xe(){for(var z=arguments,qe=0,I=0,$=z.length;I<$;I++)qe+=z[I].length;for(var N=Array(qe),ae=0,I=0;I<$;I++)for(var lt=z[I],Je=0,Qt=lt.length;Je<Qt;Je++,ae++)N[ae]=lt[Je];return N}s(xe,"__spreadArraysFn");function H(z,qe){for(var I=0,$=qe.length,N=z.length;I<$;I++,N++)z[N]=qe[I];return z}s(H,"__spreadArrayFn");function We(z,qe){return ObjDefineProperty?ObjDefineProperty(z,"raw",{value:qe}):z.raw=qe,z}s(We,"__makeTemplateObjectFn");function Ct(z){if(z&&z.__esModule)return z;var qe={};if(z!=null)for(var I in z)I!==strDefault&&Object.prototype.hasOwnProperty.call(z,I)&&X(qe,z,I);return ObjCreate?ObjDefineProperty(qe,strDefault,{enumerable:!0,value:z}):qe[strDefault]=z,qe}s(Ct,"__importStarFn");function Re(z){return z&&z.__esModule?z:{strDefault:z}}s(Re,"__importDefaultFn")},679:(Ft,de,f)=>{"use strict";f.d(de,{Z:()=>Qt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var K="constructor",M="prototype",D="function",U="_dynInstFuncs",pe="_isDynProxy",oe="_dynClass",W="_dynCls$",Se="_dynInstChk",je=Se,we="_dfOpts",Ae="_unknown_",A="__proto__",j="_dyn"+A,Q="_dynInstProto",re="useBaseInst",Ee="setInstFuncs",De=Object,Pe=De.getPrototypeOf,V=De.getOwnPropertyNames,X=0;function G(ne,be){return ne&&De[M].hasOwnProperty.call(ne,be)}s(G,"_hasOwnProperty");function k(ne){return ne&&(ne===De[M]||ne===Array[M])}s(k,"_isObjectOrArrayPrototype");function xe(ne){return k(ne)||ne===Function[M]}s(xe,"_isObjectArrayOrFunctionPrototype");function H(ne){var be;if(ne){if(Pe)return Pe(ne);var Ne=ne[A]||ne[M]||(ne[K]?ne[K][M]:null);be=ne[j]||Ne,G(ne,j)||(delete ne[Q],be=ne[j]=ne[Q]||ne[j],ne[Q]=Ne)}return be}s(H,"_getObjProto");function We(ne,be){var Ne=[];if(V)Ne=V(ne);else for(var Lt in ne)typeof Lt=="string"&&G(ne,Lt)&&Ne.push(Lt);if(Ne&&Ne.length>0)for(var rt=0;rt<Ne.length;rt++)be(Ne[rt])}s(We,"_forEachProp");function Ct(ne,be,Ne){return be!==K&&typeof ne[be]===D&&(Ne||G(ne,be))}s(Ct,"_isDynamicCandidate");function Re(ne){throw new TypeError("DynamicProto: "+ne)}s(Re,"_throwTypeError");function z(ne){var be={};return We(ne,function(Ne){!be[Ne]&&Ct(ne,Ne,!1)&&(be[Ne]=ne[Ne])}),be}s(z,"_getInstanceFuncs");function qe(ne,be){for(var Ne=ne.length-1;Ne>=0;Ne--)if(ne[Ne]===be)return!0;return!1}s(qe,"_hasVisited");function I(ne,be,Ne,Lt){function rt(B,me,ye){var ct=me[ye];if(ct[pe]&&Lt){var at=B[U]||{};at[je]!==!1&&(ct=(at[me[oe]]||{})[ye]||ct)}return function(){return ct.apply(B,arguments)}}s(rt,"_instFuncProxy");var Z={};We(Ne,function(B){Z[B]=rt(be,Ne,B)});for(var _e=H(ne),Me=[];_e&&!xe(_e)&&!qe(Me,_e);)We(_e,function(B){!Z[B]&&Ct(_e,B,!Pe)&&(Z[B]=rt(be,_e,B))}),Me.push(_e),_e=H(_e);return Z}s(I,"_getBaseFuncs");function $(ne,be,Ne,Lt){var rt=null;if(ne&&G(Ne,oe)){var Z=ne[U]||{};if(rt=(Z[Ne[oe]]||{})[be],rt||Re("Missing ["+be+"] "+D),!rt[Se]&&Z[je]!==!1){for(var _e=!G(ne,be),Me=H(ne),B=[];_e&&Me&&!xe(Me)&&!qe(B,Me);){var me=Me[be];if(me){_e=me===Lt;break}B.push(Me),Me=H(Me)}try{_e&&(ne[be]=rt),rt[Se]=1}catch(ye){Z[je]=!1}}}return rt}s($,"_getInstFunc");function N(ne,be,Ne){var Lt=be[ne];return Lt===Ne&&(Lt=H(be)[ne]),typeof Lt!==D&&Re("["+ne+"] is not a "+D),Lt}s(N,"_getProtoFunc");function ae(ne,be,Ne,Lt,rt){function Z(B,me){var ye=s(function(){var ct=$(this,me,B,ye)||N(me,B,ye);return ct.apply(this,arguments)},"dynProtoProxy");return ye[pe]=1,ye}if(s(Z,"_createDynamicPrototype"),!k(ne)){var _e=Ne[U]=Ne[U]||{},Me=_e[be]=_e[be]||{};_e[je]!==!1&&(_e[je]=!!rt),We(Ne,function(B){Ct(Ne,B,!1)&&Ne[B]!==Lt[B]&&(Me[B]=Ne[B],delete Ne[B],(!G(ne,B)||ne[B]&&!ne[B][pe])&&(ne[B]=Z(ne,B)))})}}s(ae,"_populatePrototype");function lt(ne,be){if(Pe){for(var Ne=[],Lt=H(be);Lt&&!xe(Lt)&&!qe(Ne,Lt);){if(Lt===ne)return!0;Ne.push(Lt),Lt=H(Lt)}return!1}return!0}s(lt,"_checkPrototype");function Je(ne,be){return G(ne,M)?ne.name||be||Ae:((ne||{})[K]||{}).name||be||Ae}s(Je,"_getObjName");function Qt(ne,be,Ne,Lt){G(ne,M)||Re("theClass is an invalid class definition.");var rt=ne[M];lt(rt,be)||Re("["+Je(ne)+"] is not in class hierarchy of ["+Je(be)+"]");var Z=null;G(rt,oe)?Z=rt[oe]:(Z=W+Je(ne,"_")+"$"+X,X++,rt[oe]=Z);var _e=Qt[we],Me=!!_e[re];Me&&Lt&&Lt[re]!==void 0&&(Me=!!Lt[re]);var B=z(be),me=I(rt,be,B,Me);Ne(be,me);var ye=!!Pe&&!!_e[Ee];ye&&Lt&&(ye=!!Lt[Ee]),ae(rt,Z,be,B,ye!==!1)}s(Qt,"dynamicProto");var Yt={setInstFuncs:!0,useBaseInst:!0};Qt[we]=Yt},179:(Ft,de,f)=>{Ft=f.nmd(Ft);var K=200,M="__lodash_hash_undefined__",D=1,U=2,pe=9007199254740991,oe="[object Arguments]",W="[object Array]",Se="[object AsyncFunction]",je="[object Boolean]",we="[object Date]",Ae="[object Error]",A="[object Function]",j="[object GeneratorFunction]",Q="[object Map]",re="[object Number]",Ee="[object Null]",De="[object Object]",Pe="[object Promise]",V="[object Proxy]",X="[object RegExp]",G="[object Set]",k="[object String]",xe="[object Symbol]",H="[object Undefined]",We="[object WeakMap]",Ct="[object ArrayBuffer]",Re="[object DataView]",z="[object Float32Array]",qe="[object Float64Array]",I="[object Int8Array]",$="[object Int16Array]",N="[object Int32Array]",ae="[object Uint8Array]",lt="[object Uint8ClampedArray]",Je="[object Uint16Array]",Qt="[object Uint32Array]",Yt=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,Ne={};Ne[z]=Ne[qe]=Ne[I]=Ne[$]=Ne[N]=Ne[ae]=Ne[lt]=Ne[Je]=Ne[Qt]=!0,Ne[oe]=Ne[W]=Ne[Ct]=Ne[je]=Ne[Re]=Ne[we]=Ne[Ae]=Ne[A]=Ne[Q]=Ne[re]=Ne[De]=Ne[X]=Ne[G]=Ne[k]=Ne[We]=!1;var Lt=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,rt=typeof self=="object"&&self&&self.Object===Object&&self,Z=Lt||rt||Function("return this")(),_e=de&&!de.nodeType&&de,Me=_e&&!0&&Ft&&!Ft.nodeType&&Ft,B=Me&&Me.exports===_e,me=B&&Lt.process,ye=function(){try{return me&&me.binding&&me.binding("util")}catch(y){}}(),ct=ye&&ye.isTypedArray;function at(y,T){for(var S=-1,E=y==null?0:y.length,he=0,le=[];++S<E;){var gt=y[S];T(gt,S,y)&&(le[he++]=gt)}return le}s(at,"arrayFilter");function Pt(y,T){for(var S=-1,E=T.length,he=y.length;++S<E;)y[he+S]=T[S];return y}s(Pt,"arrayPush");function mt(y,T){for(var S=-1,E=y==null?0:y.length;++S<E;)if(T(y[S],S,y))return!0;return!1}s(mt,"arraySome");function cn(y,T){for(var S=-1,E=Array(y);++S<y;)E[S]=T(S);return E}s(cn,"baseTimes");function mn(y){return function(T){return y(T)}}s(mn,"baseUnary");function xt(y,T){return y.has(T)}s(xt,"cacheHas");function Ht(y,T){return y==null?void 0:y[T]}s(Ht,"getValue");function Xt(y){var T=-1,S=Array(y.size);return y.forEach(function(E,he){S[++T]=[he,E]}),S}s(Xt,"mapToArray");function ce(y,T){return function(S){return y(T(S))}}s(ce,"overArg");function tr(y){var T=-1,S=Array(y.size);return y.forEach(function(E){S[++T]=E}),S}s(tr,"setToArray");var Xr=Array.prototype,cr=Function.prototype,Jr=Object.prototype,Yr=Z["__core-js_shared__"],pi=cr.toString,qn=Jr.hasOwnProperty,Wr=function(){var y=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Pr=Jr.toString,Gn=RegExp("^"+pi.call(qn).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$r=B?Z.Buffer:void 0,ur=Z.Symbol,Tn=Z.Uint8Array,ut=Jr.propertyIsEnumerable,ot=Xr.splice,$e=ur?ur.toStringTag:void 0,ve=Object.getOwnPropertySymbols,Ye=$r?$r.isBuffer:void 0,Ve=ce(Object.keys,Object),Ge=bn(Z,"DataView"),_t=bn(Z,"Map"),Nt=bn(Z,"Promise"),Ut=bn(Z,"Set"),Te=bn(Z,"WeakMap"),et=bn(Object,"create"),Oe=Mr(Ge),dt=Mr(_t),O=Mr(Nt),un=Mr(Ut),_=Mr(Te),ue=ur?ur.prototype:void 0,ke=ue?ue.valueOf:void 0;function Qe(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(Qe,"Hash");function yt(){this.__data__=et?et(null):{},this.size=0}s(yt,"hashClear");function J(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}s(J,"hashDelete");function He(y){var T=this.__data__;if(et){var S=T[y];return S===M?void 0:S}return qn.call(T,y)?T[y]:void 0}s(He,"hashGet");function St(y){var T=this.__data__;return et?T[y]!==void 0:qn.call(T,y)}s(St,"hashHas");function Ue(y,T){var S=this.__data__;return this.size+=this.has(y)?0:1,S[y]=et&&T===void 0?M:T,this}s(Ue,"hashSet"),Qe.prototype.clear=yt,Qe.prototype.delete=J,Qe.prototype.get=He,Qe.prototype.has=St,Qe.prototype.set=Ue;function Ie(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(Ie,"ListCache");function Dt(){this.__data__=[],this.size=0}s(Dt,"listCacheClear");function It(y){var T=this.__data__,S=Pn(T,y);if(S<0)return!1;var E=T.length-1;return S==E?T.pop():ot.call(T,S,1),--this.size,!0}s(It,"listCacheDelete");function tt(y){var T=this.__data__,S=Pn(T,y);return S<0?void 0:T[S][1]}s(tt,"listCacheGet");function $t(y){return Pn(this.__data__,y)>-1}s($t,"listCacheHas");function qt(y,T){var S=this.__data__,E=Pn(S,y);return E<0?(++this.size,S.push([y,T])):S[E][1]=T,this}s(qt,"listCacheSet"),Ie.prototype.clear=Dt,Ie.prototype.delete=It,Ie.prototype.get=tt,Ie.prototype.has=$t,Ie.prototype.set=qt;function nn(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(nn,"MapCache");function En(){this.size=0,this.__data__={hash:new Qe,map:new(_t||Ie),string:new Qe}}s(En,"mapCacheClear");function $n(y){var T=Sr(this,y).delete(y);return this.size-=T?1:0,T}s($n,"mapCacheDelete");function pn(y){return Sr(this,y).get(y)}s(pn,"mapCacheGet");function ee(y){return Sr(this,y).has(y)}s(ee,"mapCacheHas");function At(y,T){var S=Sr(this,y),E=S.size;return S.set(y,T),this.size+=S.size==E?0:1,this}s(At,"mapCacheSet"),nn.prototype.clear=En,nn.prototype.delete=$n,nn.prototype.get=pn,nn.prototype.has=ee,nn.prototype.set=At;function bt(y){var T=-1,S=y==null?0:y.length;for(this.__data__=new nn;++T<S;)this.add(y[T])}s(bt,"SetCache");function it(y){return this.__data__.set(y,M),this}s(it,"setCacheAdd");function zt(y){return this.__data__.has(y)}s(zt,"setCacheHas"),bt.prototype.add=bt.prototype.push=it,bt.prototype.has=zt;function Kt(y){var T=this.__data__=new Ie(y);this.size=T.size}s(Kt,"Stack");function Vt(){this.__data__=new Ie,this.size=0}s(Vt,"stackClear");function dn(y){var T=this.__data__,S=T.delete(y);return this.size=T.size,S}s(dn,"stackDelete");function Bt(y){return this.__data__.get(y)}s(Bt,"stackGet");function rn(y){return this.__data__.has(y)}s(rn,"stackHas");function yn(y,T){var S=this.__data__;if(S instanceof Ie){var E=S.__data__;if(!_t||E.length<K-1)return E.push([y,T]),this.size=++S.size,this;S=this.__data__=new nn(E)}return S.set(y,T),this.size=S.size,this}s(yn,"stackSet"),Kt.prototype.clear=Vt,Kt.prototype.delete=dn,Kt.prototype.get=Bt,Kt.prototype.has=rn,Kt.prototype.set=yn;function Ln(y,T){var S=zr(y),E=!S&&ei(y),he=!S&&!E&&pr(y),le=!S&&!E&&!he&&ht(y),gt=S||E||he||le,Be=gt?cn(y.length,String):[],on=Be.length;for(var ln in y)(T||qn.call(y,ln))&&!(gt&&(ln=="length"||he&&(ln=="offset"||ln=="parent")||le&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||lr(ln,on)))&&Be.push(ln);return Be}s(Ln,"arrayLikeKeys");function Pn(y,T){for(var S=y.length;S--;)if(si(y[S][0],T))return S;return-1}s(Pn,"assocIndexOf");function Zt(y,T,S){var E=T(y);return zr(y)?E:Pt(E,S(y))}s(Zt,"baseGetAllKeys");function Bn(y){return y==null?y===void 0?H:Ee:$e&&$e in Object(y)?Ar(y):Ai(y)}s(Bn,"baseGetTag");function In(y){return Ke(y)&&Bn(y)==oe}s(In,"baseIsArguments");function Xn(y,T,S,E,he){return y===T?!0:y==null||T==null||!Ke(y)&&!Ke(T)?y!==y&&T!==T:Nn(y,T,S,E,Xn,he)}s(Xn,"baseIsEqual");function Nn(y,T,S,E,he,le){var gt=zr(y),Be=zr(T),on=gt?W:Qn(y),ln=Be?W:Qn(T);on=on==oe?De:on,ln=ln==oe?De:ln;var Mn=on==De,fn=ln==De,Zn=on==ln;if(Zn&&pr(y)){if(!pr(T))return!1;gt=!0,Mn=!1}if(Zn&&!Mn)return le||(le=new Kt),gt||ht(y)?nr(y,T,S,E,he,le):Rr(y,T,on,S,E,he,le);if(!(S&D)){var Rn=Mn&&qn.call(y,"__wrapped__"),br=fn&&qn.call(T,"__wrapped__");if(Rn||br){var vr=Rn?y.value():y,jr=br?T.value():T;return le||(le=new Kt),he(vr,jr,S,E,le)}}return Zn?(le||(le=new Kt),mi(y,T,S,E,he,le)):!1}s(Nn,"baseIsEqualDeep");function Gt(y){if(!Le(y)||yi(y))return!1;var T=L(y)?Gn:ne;return T.test(Mr(y))}s(Gt,"baseIsNative");function Jn(y){return Ke(y)&&Fe(y.length)&&!!Ne[Bn(y)]}s(Jn,"baseIsTypedArray");function vi(y){if(!Zr(y))return Ve(y);var T=[];for(var S in Object(y))qn.call(y,S)&&S!="constructor"&&T.push(S);return T}s(vi,"baseKeys");function nr(y,T,S,E,he,le){var gt=S&D,Be=y.length,on=T.length;if(Be!=on&&!(gt&&on>Be))return!1;var ln=le.get(y);if(ln&&le.get(T))return ln==T;var Mn=-1,fn=!0,Zn=S&U?new bt:void 0;for(le.set(y,T),le.set(T,y);++Mn<Be;){var Rn=y[Mn],br=T[Mn];if(E)var vr=gt?E(br,Rn,Mn,T,y,le):E(Rn,br,Mn,y,T,le);if(vr!==void 0){if(vr)continue;fn=!1;break}if(Zn){if(!mt(T,function(jr,en){if(!xt(Zn,en)&&(Rn===jr||he(Rn,jr,S,E,le)))return Zn.push(en)})){fn=!1;break}}else if(!(Rn===br||he(Rn,br,S,E,le))){fn=!1;break}}return le.delete(y),le.delete(T),fn}s(nr,"equalArrays");function Rr(y,T,S,E,he,le,gt){switch(S){case Re:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case Ct:return!(y.byteLength!=T.byteLength||!le(new Tn(y),new Tn(T)));case je:case we:case re:return si(+y,+T);case Ae:return y.name==T.name&&y.message==T.message;case X:case k:return y==T+"";case Q:var Be=Xt;case G:var on=E&D;if(Be||(Be=tr),y.size!=T.size&&!on)return!1;var ln=gt.get(y);if(ln)return ln==T;E|=U,gt.set(y,T);var Mn=nr(Be(y),Be(T),E,he,le,gt);return gt.delete(y),Mn;case xe:if(ke)return ke.call(y)==ke.call(T)}return!1}s(Rr,"equalByTag");function mi(y,T,S,E,he,le){var gt=S&D,Be=xn(y),on=Be.length,ln=xn(T),Mn=ln.length;if(on!=Mn&&!gt)return!1;for(var fn=on;fn--;){var Zn=Be[fn];if(!(gt?Zn in T:qn.call(T,Zn)))return!1}var Rn=le.get(y);if(Rn&&le.get(T))return Rn==T;var br=!0;le.set(y,T),le.set(T,y);for(var vr=gt;++fn<on;){Zn=Be[fn];var jr=y[Zn],en=T[Zn];if(E)var Ko=gt?E(en,jr,Zn,T,y,le):E(jr,en,Zn,y,T,le);if(!(Ko===void 0?jr===en||he(jr,en,S,E,le):Ko)){br=!1;break}vr||(vr=Zn=="constructor")}if(br&&!vr){var lo=y.constructor,ni=T.constructor;lo!=ni&&"constructor"in y&&"constructor"in T&&!(typeof lo=="function"&&lo instanceof lo&&typeof ni=="function"&&ni instanceof ni)&&(br=!1)}return le.delete(y),le.delete(T),br}s(mi,"equalObjects");function xn(y){return Zt(y,fe,kr)}s(xn,"getAllKeys");function Sr(y,T){var S=y.__data__;return Ri(T)?S[typeof T=="string"?"string":"hash"]:S.map}s(Sr,"getMapData");function bn(y,T){var S=Ht(y,T);return Gt(S)?S:void 0}s(bn,"getNative");function Ar(y){var T=qn.call(y,$e),S=y[$e];try{y[$e]=void 0;var E=!0}catch(le){}var he=Pr.call(y);return E&&(T?y[$e]=S:delete y[$e]),he}s(Ar,"getRawTag");var kr=ve?function(y){return y==null?[]:(y=Object(y),at(ve(y),function(T){return ut.call(y,T)}))}:Y,Qn=Bn;(Ge&&Qn(new Ge(new ArrayBuffer(1)))!=Re||_t&&Qn(new _t)!=Q||Nt&&Qn(Nt.resolve())!=Pe||Ut&&Qn(new Ut)!=G||Te&&Qn(new Te)!=We)&&(Qn=s(function(y){var T=Bn(y),S=T==De?y.constructor:void 0,E=S?Mr(S):"";if(E)switch(E){case Oe:return Re;case dt:return Q;case O:return Pe;case un:return G;case _:return We}return T},"getTag"));function lr(y,T){return T=T==null?pe:T,!!T&&(typeof y=="number"||be.test(y))&&y>-1&&y%1==0&&y<T}s(lr,"isIndex");function Ri(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}s(Ri,"isKeyable");function yi(y){return!!Wr&&Wr in y}s(yi,"isMasked");function Zr(y){var T=y&&y.constructor,S=typeof T=="function"&&T.prototype||Jr;return y===S}s(Zr,"isPrototype");function Ai(y){return Pr.call(y)}s(Ai,"objectToString");function Mr(y){if(y!=null){try{return pi.call(y)}catch(T){}try{return y+""}catch(T){}}return""}s(Mr,"toSource");function si(y,T){return y===T||y!==y&&T!==T}s(si,"eq");var ei=In(function(){return arguments}())?In:function(y){return Ke(y)&&qn.call(y,"callee")&&!ut.call(y,"callee")},zr=Array.isArray;function ti(y){return y!=null&&Fe(y.length)&&!L(y)}s(ti,"isArrayLike");var pr=Ye||sn;function ci(y,T){return Xn(y,T)}s(ci,"isEqual");function L(y){if(!Le(y))return!1;var T=Bn(y);return T==A||T==j||T==Se||T==V}s(L,"isFunction");function Fe(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=pe}s(Fe,"isLength");function Le(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}s(Le,"isObject");function Ke(y){return y!=null&&typeof y=="object"}s(Ke,"isObjectLike");var ht=ct?mn(ct):Jn;function fe(y){return ti(y)?Ln(y):vi(y)}s(fe,"keys");function Y(){return[]}s(Y,"stubArray");function sn(){return!1}s(sn,"stubFalse"),Ft.exports=ci},724:()=>{},189:function(Ft,de,f){"use strict";var K=this&&this.__spreadArray||function(W,Se,je){if(je||arguments.length===2)for(var we=0,Ae=Se.length,A;we<Ae;we++)(A||!(we in Se))&&(A||(A=Array.prototype.slice.call(Se,0,we)),A[we]=Se[we]);return W.concat(A||Array.prototype.slice.call(Se))};Object.defineProperty(de,"__esModule",{value:!0}),de.config=de.loadMessageBundle=de.BundleFormat=de.MessageFormat=void 0;var M=f(926),D=f(800),U=f(800);Object.defineProperty(de,"MessageFormat",{enumerable:!0,get:function(){return U.MessageFormat}}),Object.defineProperty(de,"BundleFormat",{enumerable:!0,get:function(){return U.BundleFormat}});function pe(W){return function(Se,je){for(var we=[],Ae=2;Ae<arguments.length;Ae++)we[Ae-2]=arguments[Ae];if(typeof Se=="number")throw new Error("Browser implementation does currently not support externalized strings.");return D.localize.apply(void 0,K([Se,je],we,!1))}}s(pe,"loadMessageBundle"),de.loadMessageBundle=pe;function oe(W){var Se;return(0,D.setPseudo)(((Se=W==null?void 0:W.locale)===null||Se===void 0?void 0:Se.toLowerCase())==="pseudo"),pe}s(oe,"config"),de.config=oe,M.default.install(Object.freeze({loadMessageBundle:pe,config:oe}))},800:(Ft,de,f)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0}),de.config=de.loadMessageBundle=de.localize=de.format=de.setPseudo=de.isPseudo=de.isDefined=de.BundleFormat=de.MessageFormat=void 0;var K=f(926),M;(function(Ae){Ae.file="file",Ae.bundle="bundle",Ae.both="both"})(M=de.MessageFormat||(de.MessageFormat={}));var D;(function(Ae){Ae.standalone="standalone",Ae.languagePack="languagePack"})(D=de.BundleFormat||(de.BundleFormat={}));var U;(function(Ae){function A(j){var Q=j;return Q&&pe(Q.key)&&pe(Q.comment)}s(A,"is"),Ae.is=A})(U||(U={}));function pe(Ae){return typeof Ae!="undefined"}s(pe,"isDefined"),de.isDefined=pe,de.isPseudo=!1;function oe(Ae){de.isPseudo=Ae}s(oe,"setPseudo"),de.setPseudo=oe;function W(Ae,A){var j;return de.isPseudo&&(Ae="\uFF3B"+Ae.replace(/[aouei]/g,"$&$&")+"\uFF3D"),A.length===0?j=Ae:j=Ae.replace(/\{(\d+)\}/g,function(Q,re){var Ee=re[0],De=A[Ee],Pe=Q;return typeof De=="string"?Pe=De:(typeof De=="number"||typeof De=="boolean"||De===void 0||De===null)&&(Pe=String(De)),Pe}),j}s(W,"format"),de.format=W;function Se(Ae,A){for(var j=[],Q=2;Q<arguments.length;Q++)j[Q-2]=arguments[Q];return W(A,j)}s(Se,"localize"),de.localize=Se;function je(Ae){return(0,K.default)().loadMessageBundle(Ae)}s(je,"loadMessageBundle"),de.loadMessageBundle=je;function we(Ae){return(0,K.default)().config(Ae)}s(we,"config"),de.config=we},926:(Ft,de)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});var f;function K(){if(f===void 0)throw new Error("No runtime abstraction layer installed");return f}s(K,"RAL"),function(M){function D(U){if(U===void 0)throw new Error("No runtime abstraction layer provided");f=U}s(D,"install"),M.install=D}(K||(K={})),de.default=K}},gs={};function Vn(Ft){var de=gs[Ft];if(de!==void 0)return de.exports;var f=gs[Ft]={id:Ft,loaded:!1,exports:{}};return Rc[Ft].call(f.exports,f,f.exports,Vn),f.loaded=!0,f.exports}s(Vn,"__webpack_require__"),(()=>{Vn.n=Ft=>{var de=Ft&&Ft.__esModule?()=>Ft.default:()=>Ft;return Vn.d(de,{a:de}),de}})(),(()=>{Vn.d=(Ft,de)=>{for(var f in de)Vn.o(de,f)&&!Vn.o(Ft,f)&&Object.defineProperty(Ft,f,{enumerable:!0,get:de[f]})}})(),(()=>{Vn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(Ft){if(typeof window=="object")return window}}()})(),(()=>{Vn.o=(Ft,de)=>Object.prototype.hasOwnProperty.call(Ft,de)})(),(()=>{Vn.r=Ft=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ft,"__esModule",{value:!0})}})(),(()=>{Vn.nmd=Ft=>(Ft.paths=[],Ft.children||(Ft.children=[]),Ft)})();var Ac={};(()=>{"use strict";Vn.r(Ac),Vn.d(Ac,{StateKeys:()=>qo,activate:()=>Y0,ensureProvidersRegistered:()=>Br,getOpenActionsService:()=>Dc,getState:()=>Cp,isPreRelease:()=>J0,updateState:()=>Kl});var Ft={};Vn.r(Ft),Vn.d(Ft,{max:()=>D0,min:()=>I0});var de=Vn(189);de.config({messageFormat:de.MessageFormat.bundle,bundleFormat:de.BundleFormat.standalone});const f=require("vscode"),K=new TextDecoder,M=new TextEncoder,D=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function U(t){const e=M.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=D[e[r]];return n.join("")}s(U,"encodeUtf8Hex");function pe(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return K.decode(n)}s(pe,"decodeUtf8Hex");const oe=/^[0-9a-f]{40}$/i;function W(t){return t!==void 0&&oe.test(t)}s(W,"isSha");const Se=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function je(t){return Se.test(t)}s(je,"isValidBranchName");function we(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}s(we,"shortenRef");const Ae=47;function A(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}s(A,"asKey");function j(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}s(j,"asFileKey");function Q(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}s(Q,"asFileStorageKey");function re(t){const e=t.path;let n=0,r=-1,i=!0;for(let o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===Ae){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":e.slice(n,r)}s(re,"basename");function Ee(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===Ae){if(!i){r=o;break}}else i=!1;return r===-1?"/":e.slice(0,r)}s(Ee,"dirname");function De(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}s(De,"getParent");function Pe(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?f.Uri.joinPath(t,n.substr(t.path.length)):f.Uri.joinPath(t,n)}s(Pe,"joinRelativePath");function V(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),X(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):X(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}s(V,"isChild");function X(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),e.length===1||t.path.startsWith(e.endsWith("/")?e:`${e}/`)):e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}s(X,"isDescendent");function G(t){return t&&typeof t=="object"&&"scheme"in t}s(G,"isSerializedUri");var k;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=f.Uri.parse(`${t.scheme}://`);function e(l){const{authority:d}=l,h=d.indexOf(t.authoritySeparator);return h!==-1?d.substr(0,h):d}s(e,"getProviderId"),t.getProviderId=e;function n(l){return l.scheme!==t.scheme?l:l.with({scheme:e(l)})}s(n,"getProviderUri"),t.getProviderUri=n;function r(l,d){const h=new Map,g=f.workspace.textDocuments;if(g.length===0)return h;for(const p of g)p.uri.scheme===l&&d.some(C=>X(p.uri,C))&&h.set(A(p.uri),p.uri);return h}s(r,"getOpenUris"),t.getOpenUris=r;function i(l){return l.scheme===t.scheme?l:l.with({scheme:t.scheme})}s(i,"getVirtualUri"),t.getVirtualUri=i;function o(l,d){const[h,g]=l.authority.split(t.authoritySeparator);let p;if(g)try{const C=JSON.parse(pe(g));p=d?d(C):C}catch{}return{scheme:h,metadata:p}}s(o,"decodeAuthority"),t.decodeAuthority=o;function a(l,d){const h=d?`${t.authoritySeparator}${U(JSON.stringify(d))}`:"";return`${l}${h}`}s(a,"encodeAuthority"),t.encodeAuthority=a;function c(l){return l.authority.indexOf(t.authoritySeparator)===-1}s(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var l,d;return(d=(l=f.workspace.workspaceFolders)==null?void 0:l.every(h=>h.uri.scheme===t.scheme))!=null?d:!1}s(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(k||(k={}));var xe;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(xe||(xe={}));var H;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(H||(H={}));var We;(function(t){function e(n){return n!==void 0&&n.type===z.Active}s(e,"isActive"),t.isActive=e})(We||(We={}));var Ct;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Re.Latest};if(W(r.idx))return{type:Re.SHA,sha:r.idx}}}s(e,"decode"),t.decode=e})(Ct||(Ct={}));var Re;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Re||(Re={}));var z;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(z||(z={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}s(e,"hasIndex"),t.hasIndex=e}(z||(z={}));var qe;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(qe||(qe={}));var I;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(I||(I={}));var $;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})($||($={}));var N;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(N||(N={}));var ae;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ae||(ae={}));var lt;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(lt||(lt={}));var Je;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(Je||(Je={}));var Qt;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Qt||(Qt={}));var Yt;(function(t){t.Browse="browse",t.Edit="edit"})(Yt||(Yt={}));var ne;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(ne||(ne={}));class be extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new be("Failed to create and push commit",ne.CommitFailedError)}static DetachedHEADError(e){return new be(e,ne.DetachedHEADError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new be(r,ne.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new be(e,ne.InvalidCredentialsError,n)}static MergeConflictError(e){return new be(e,ne.MergeConflictError)}static NothingToCommitError(e){return new be(e,ne.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new be(n,ne.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new be(e,ne.SyncConflictsError)}static UnresolvedConflictsError(){return new be("You have unresolved merge conflicts.",ne.UnresolvedConflictsError)}static InvalidRepositoryError(){return new be("The current repository is invalid",ne.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:ne.Unknown}}s(be,"VirtualProviderError");const Ne=6;var Lt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(Lt||(Lt={}));var rt;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(rt||(rt={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}s(e,"sanitize"),t.sanitize=e}(rt||(rt={}));var Z;(function(t){t.Browse="browse",t.Edit="edit"})(Z||(Z={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}s(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}s(n,"toggle"),t.toggle=n}(Z||(Z={}));var _e;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}s(e,"equals"),t.equals=e})(_e||(_e={}));var Me;(function(t){const e=new Map([[Je.Branch,rt.None],[Je.RemoteBranch,rt.None],[Je.PullRequestBranch,rt.Match],[Je.PullRequestRemoteBranch,rt.Match],[Je.Commit,rt.Match],[Je.Tag,rt.Match]]),n=new Map([[Je.Branch,Z.Edit],[Je.RemoteBranch,Z.Edit],[Je.PullRequestBranch,Z.Browse],[Je.PullRequestRemoteBranch,Z.Browse],[Je.Commit,Z.Browse],[Je.Tag,Z.Browse]]);function r(o){var a,c;return{display:(a=n.get(o))!=null?a:Z.Edit,index:(c=e.get(o))!=null?c:rt.None}}s(r,"getDefault"),t.getDefault=r;function i(o){switch(o){case Je.Branch:case Je.RemoteBranch:return{display:Z.Browse,index:rt.Latest};case Je.PullRequestBranch:case Je.PullRequestRemoteBranch:return{display:Z.Browse,index:rt.Match};case Je.Commit:case Je.Tag:return{display:Z.Browse,index:rt.Match};default:return{display:Z.Edit,index:rt.None}}}s(i,"getIndexDefault"),t.getIndexDefault=i})(Me||(Me={}));const B=null;var me=Vn(179),ye=Vn.n(me);const ct="modes",at="indexMemento";class Pt{constructor(){this._onDidChange=new f.EventEmitter,this._onDidChangeAny=new f.EventEmitter,this.memoryState=new Map}static configure(e,n){mt.configPrefix=e,mt.state=n.workspaceState,n.subscriptions.push(f.workspace.onDidChangeConfiguration(mt.onConfigurationChanged,mt))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(ct),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(ct,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(at),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}get(e,n,r){return r===void 0?f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const o=e.toString();let a=this.modes!==void 0?this.modes[o]:void 0;if(a!==void 0)return{display:Z.sanitize(a.display),index:rt.sanitize(a.index)};if(a=this.memoryState.get(o),a!==void 0)return a;if(n===Je.Branch||n===Je.RemoteBranch)switch((i=f.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:Z.Edit,index:rt.None};case"latest":return{display:Z.Browse,index:rt.Latest};case"tipPlusLatest":return{display:Z.Edit,index:rt.TipPlusLatest}}if(!r)return Me.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(ct,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(at,this.indexMemento))}getAny(e,n,r){return r===void 0?f.workspace.getConfiguration(void 0,n).get(e):f.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return f.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=mt.inspect(e);if(i===void 0)return!1;let o=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,f.ConfigurationTarget.Global),o=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,f.ConfigurationTarget.Workspace),o=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,f.ConfigurationTarget.WorkspaceFolder),o=!0),!o&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,f.ConfigurationTarget.Global),o=!0),o}async migrateIfMissing(e,n,r){const i=mt.inspect(e);if(i===void 0)return;const o=mt.inspect(n);i.globalValue!==void 0&&(o===void 0||o.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,f.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(o===void 0||o.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,f.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(o===void 0||o.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,f.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return f.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return f.workspace.getConfiguration(void 0,r===f.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=mt.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):mt.update(e,n,f.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):mt.update(e,n,f.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):mt.update(e,ye()(n,r.defaultValue)?void 0:n,f.ConfigurationTarget.Global)}}s(Pt,"Configuration");const mt=new Pt,cn="";var mn;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(mn||(mn={}));var xt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(xt||(xt={}));const Ht="[RemoteHub]",Xt=s(class{static configure(t,e,n){this._isDebugging=t.extensionMode===f.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===mn.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:f.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case mn.Off:return 0;case mn.Error:return 1;case mn.Warn:return 2;case mn.Info:return 3;case mn.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){Xt.isDebugging&&console.log(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!Xt.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}Xt.isDebugging&&console.error(this.timestamp,Ht,e!=null?e:cn,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:cn}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){Xt.isDebugging&&console.log(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){Xt.isDebugging&&console.warn(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof f.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:cn}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:cn;const o=i.indexOf("_");return o===-1?i:i.substr(o+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,cn)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!Xt.isDebugging)return cn;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:cn}},"_Logger");let ce=Xt;ce.level=0,ce._logLevel=mn.Off;const tr=new TextDecoder,Xr=new TextEncoder;async function cr(t){const e=typeof t=="string"?Xr.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new Wr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(tr.decode(n)))}s(cr,"sha1");var Jr;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Jr||(Jr={}));function Yr(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}s(Yr,"leftRotate");function pi(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}s(pi,"fill");const qn=s(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const o=Math.min(64-n,i-r);for(let a=0;a<o;a++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,pi(this._buff,this._buffLen),this._buffLen>56&&(this._step(),pi(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=qn._bigBlock32,e=this._buffDV;for(let d=0;d<64;d+=4)t.setUint32(d,e.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)t.setUint32(d,Yr(t.getUint32(d-12,!1)^t.getUint32(d-32,!1)^t.getUint32(d-56,!1)^t.getUint32(d-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,o=this._h3,a=this._h4,c,u,l;for(let d=0;d<80;d++)d<20?(c=r&i|~r&o,u=1518500249):d<40?(c=r^i^o,u=1859775393):d<60?(c=r&i|r&o|i&o,u=2400959708):(c=r^i^o,u=3395469782),l=Yr(n,5)+c+a+u+t.getUint32(d*4,!1)&4294967295,a=o,o=i,i=Yr(r,30),r=n,n=l;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}},"_SHA1Computer");let Wr=qn;Wr._bigBlock32=new DataView(new ArrayBuffer(320));function Pr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}s(Pr,"fromBase64");const{fromCharCode:Gn}=String;function $r(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=Gn(t[n])}return globalThis.btoa(e)}s($r,"toBase64");function ur(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}s(ur,"indexOfDifference");let Tn;var ut;(function(t){function e(n){const r=$e(n);return Tn=f.env.uiKind===f.UIKind.Web,ce.warn(`Running on the ${Tn?"web":"desktop"}${n.extensionRuntime!==f.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}s(e,"configure"),t.configure=e})(ut||(ut={}));const ot=/\/workspaceStorage\/(?<id>[^/]+)/i;function $e(t){var e;if(t.storageUri===void 0)return"";const n=ot.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=ur(t.globalStorageUri.path,r),o=`/${t.extension.id}`;r.endsWith(o)?r=r.slice(i,-o.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}s($e,"getWorkspaceId");var ve;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(ve||(ve={}));const Ye=new Map;function Ve(t){return t==="isWeb"?Tn:t==="remoteName"?f.env.remoteName:t==="virtualWorkspace"?k.isVirtualWorkspace():t.startsWith("config.")?mt.getAny(t.substring(7)):Ye.get(t)}s(Ve,"getContext");function Ge(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}s(Ge,"isSupportedContextKey");async function _t(t,e){Ye.set(t,e),!t.startsWith("continueOn:")&&await f.commands.executeCommand("setContext",t,e)}s(_t,"setContext");var Nt=Object.defineProperty,Ut=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,Oe=s((t,e,n)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"ho"),dt=s((t,e)=>{for(var n in e||(e={}))Te.call(e,n)&&Oe(t,n,e[n]);if(Ut)for(var n of Ut(e))et.call(e,n)&&Oe(t,n,e[n]);return t},"at"),O=s((t,e)=>()=>(t&&(e=t(t=0)),e),"I"),un=s((t,e)=>{for(var n in e)Nt(t,n,{get:e[n],enumerable:!0})},"Ec"),_=s((t,e,n)=>new Promise((r,i)=>{var o=s(u=>{try{c(n.next(u))}catch(l){i(l)}},"a"),a=s(u=>{try{c(n.throw(u))}catch(l){i(l)}},"o"),c=s(u=>u.done?r(u.value):Promise.resolve(u.value).then(o,a),"u");c((n=n.apply(t,e)).next())}),"At"),ue,ke=O(()=>{ue={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}}),Qe,yt,J,He,St,Ue,Ie,Dt,It,tt,$t,qt=O(()=>{Qe="function",yt="object",J="undefined",He="prototype",St="hasOwnProperty",Ue=Object,Ie=Ue[He],Dt=Ue.assign,It=Ue.create,tt=Ue.defineProperty,$t=Ie[St]});function nn(){return typeof globalThis!==J&&globalThis?globalThis:typeof self!==J&&self?self:typeof window!==J&&window?window:typeof Vn.g!==J&&Vn.g?Vn.g:null}s(nn,"ot");function En(t){throw new TypeError(t)}s(En,"Tr");function $n(t){var e=It;if(e)return e(t);if(t==null)return{};var n=typeof t;n!==yt&&n!==Qe&&En("Object prototype may only be an Object:"+t);function r(){}return s(r,"n"),r[He]=t,new r}s($n,"Dt");var pn=O(()=>{qt()});function ee(t,e){typeof e!==Qe&&e!==null&&En("Class extends value "+String(e)+" is not a constructor or null"),Kt(t,e);function n(){this.constructor=t}s(n,"r"),t[He]=e===null?$n(e):(n[He]=e[He],new n)}s(ee,"B");var At,bt,it,zt,Kt,Vt=O(()=>{qt(),pn(),At=(nn()||{}).Symbol,bt=(nn()||{}).Reflect,it=s(function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Ie[St].call(e,i)&&(t[i]=e[i])}return t},"bc"),zt=Dt||it,Kt=s(function(t,e){return Kt=Ue.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r[St](i)&&(n[i]=r[i])},Kt(t,e)},"ki")}),dn=O(()=>{}),Bt=O(()=>{qt(),pn(),Vt(),dn()});function rn(t,e){return t&&ci[bn].hasOwnProperty.call(t,e)}s(rn,"kt");function yn(t){return t&&(t===ci[bn]||t===Array[bn])}s(yn,"No");function Ln(t){return yn(t)||t===Function[bn]}s(Ln,"Ui");function Pn(t){var e;if(t){if(L)return L(t);var n=t[si]||t[bn]||(t[Sr]?t[Sr][bn]:null);e=t[ei]||n,rn(t,ei)||(delete t[zr],e=t[ei]=t[zr]||t[ei],t[zr]=n)}return e}s(Pn,"ir");function Zt(t,e){var n=[];if(Fe)n=Fe(t);else for(var r in t)typeof r=="string"&&rn(t,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)e(n[i])}s(Zt,"jn");function Bn(t,e,n){return e!==Sr&&typeof t[e]===Ar&&(n||rn(t,e))}s(Bn,"Oi");function In(t){throw new TypeError("DynamicProto: "+t)}s(In,"Gn");function Xn(t){var e={};return Zt(t,function(n){!e[n]&&Bn(t,n,!1)&&(e[n]=t[n])}),e}s(Xn,"Dc");function Nn(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}s(Nn,"Bi");function Gt(t,e,n,r){function i(u,l,d){var h=l[d];if(h[Qn]&&r){var g=u[kr]||{};g[Zr]!==!1&&(h=(g[l[lr]]||{})[d]||h)}return function(){return h.apply(u,arguments)}}s(i,"i");var o={};Zt(n,function(u){o[u]=i(e,n,u)});for(var a=Pn(t),c=[];a&&!Ln(a)&&!Nn(c,a);)Zt(a,function(u){!o[u]&&Bn(a,u,!L)&&(o[u]=i(e,a,u))}),c.push(a),a=Pn(a);return o}s(Gt,"Nc");function Jn(t,e,n,r){var i=null;if(t&&rn(n,lr)){var o=t[kr]||{};if(i=(o[n[lr]]||{})[e],i||In("Missing ["+e+"] "+Ar),!i[yi]&&o[Zr]!==!1){for(var a=!rn(t,e),c=Pn(t),u=[];a&&c&&!Ln(c)&&!Nn(u,c);){var l=c[e];if(l){a=l===r;break}u.push(c),c=Pn(c)}try{a&&(t[e]=i),i[yi]=1}catch(d){o[Zr]=!1}}}return i}s(Jn,"kc");function vi(t,e,n){var r=e[t];return r===n&&(r=Pn(e)[t]),typeof r!==Ar&&In("["+t+"] is not a "+Ar),r}s(vi,"Fc");function nr(t,e,n,r,i){function o(u,l){var d=s(function(){var h=Jn(this,l,u,d)||vi(l,u,d);return h.apply(this,arguments)},"l");return d[Qn]=1,d}if(s(o,"a"),!yn(t)){var a=n[kr]=n[kr]||{},c=a[e]=a[e]||{};a[Zr]!==!1&&(a[Zr]=!!i),Zt(n,function(u){Bn(n,u,!1)&&n[u]!==r[u]&&(c[u]=n[u],delete n[u],(!rn(t,u)||t[u]&&!t[u][Qn])&&(t[u]=o(t,u)))})}}s(nr,"Rc");function Rr(t,e){if(L){for(var n=[],r=Pn(e);r&&!Ln(r)&&!Nn(n,r);){if(r===t)return!0;n.push(r),r=Pn(r)}return!1}return!0}s(Rr,"Mc");function mi(t,e){return rn(t,bn)?t.name||e||Mr:((t||{})[Sr]||{}).name||e||Mr}s(mi,"Mi");function xn(t,e,n,r){rn(t,bn)||In("theClass is an invalid class definition.");var i=t[bn];Rr(i,e)||In("["+mi(t)+"] is not in class hierarchy of ["+mi(e)+"]");var o=null;rn(i,lr)?o=i[lr]:(o=Ri+mi(t,"_")+"$"+Le,Le++,i[lr]=o);var a=xn[Ai],c=!!a[ti];c&&r&&r[ti]!==void 0&&(c=!!r[ti]);var u=Xn(e),l=Gt(i,e,u,c);n(e,l);var d=!!L&&!!a[pr];d&&r&&(d=!!r[pr]),nr(i,o,e,u,d!==!1)}s(xn,"W");var Sr,bn,Ar,kr,Qn,lr,Ri,yi,Zr,Ai,Mr,si,ei,zr,ti,pr,ci,L,Fe,Le,Ke,ht=O(()=>{Sr="constructor",bn="prototype",Ar="function",kr="_dynInstFuncs",Qn="_isDynProxy",lr="_dynClass",Ri="_dynCls$",yi="_dynInstChk",Zr=yi,Ai="_dfOpts",Mr="_unknown_",si="__proto__",ei="_dyn"+si,zr="_dynInstProto",ti="useBaseInst",pr="setInstFuncs",ci=Object,L=ci.getPrototypeOf,Fe=ci.getOwnPropertyNames,Le=0,Ke={setInstFuncs:!0,useBaseInst:!0},xn[Ai]=Ke}),fe,Y,sn=O(()=>{(function(t){t[t.CRITICAL=1]="CRITICAL",t[t.WARNING=2]="WARNING"})(fe||(fe={})),Y={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}});function y(t){return Ie.toString.call(t)}s(y,"Hi");function T(t,e){return typeof t===e}s(T,"Vi");function S(t){return t===void 0||typeof t===J}s(S,"fe");function E(t){return t===null||S(t)}s(E,"x");function he(t){return!E(t)}s(he,"qi");function le(t,e){return t&&$t.call(t,e)}s(le,"wr");function gt(t){return typeof t===yt}s(gt,"st");function Be(t){return typeof t===Qe}s(Be,"z");function on(t,e,n,r){r===void 0&&(r=!1);var i=!1;if(!E(t))try{E(t[Lc])?E(t[Fc])||(t[Fc](Mc+e,n),i=!0):(t[Lc](e,n,r),i=!0)}catch(o){}return i}s(on,"Vt");function ln(t,e,n,r){if(r===void 0&&(r=!1),!E(t))try{E(t[Oc])?E(t[Nc])||t[Nc](Mc+e,n):t[Oc](e,n,r)}catch(i){}}s(ln,"Wn");function Mn(t){var e=t,n=/([^\w\d_$])/g;return n.test(t)&&(e=t.replace(n,"_")),e}s(Mn,"ji");function fn(t,e){if(t)for(var n in t)$t.call(t,n)&&e.call(t,n,t[n])}s(fn,"$");function Zn(t,e){if(t&&e){var n=e.length,r=t.length;if(t===e)return!0;if(r>=n){for(var i=r-1,o=n-1;o>=0;o--){if(t[i]!=e[o])return!1;i--}return!0}}return!1}s(Zn,"Gi");function Rn(t,e){return t&&e?t.indexOf(e)!==-1:!1}s(Rn,"Te");function br(t){return y(t)==="[object Date]"}s(br,"Pr");function vr(t){return y(t)==="[object Array]"}s(vr,"Fe");function jr(t){return y(t)==="[object Error]"}s(jr,"qt");function en(t){return typeof t=="string"}s(en,"U");function Ko(t){return typeof t=="number"}s(Ko,"ar");function lo(t){return typeof t=="boolean"}s(lo,"Gr");function ni(t){if(br(t)){var e=s(function(n){var r=String(n);return r.length===1&&(r="0"+r),r},"e");return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}s(ni,"Re");function vn(t,e,n){for(var r=t.length,i=0;i<r&&!(i in t&&e.call(n||t,t[i],i,t)===-1);i++);}s(vn,"R");function Ia(t,e,n){for(var r=t.length,i=n||0,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}s(Ia,"Ft");function Da(t,e,n){for(var r=t.length,i=n||t,o=new Array(r),a=0;a<r;a++)a in t&&(o[a]=e.call(i,t[a],t));return o}s(Da,"jt");function Yl(t,e,n){var r=t.length,i=0,o;if(arguments.length>=3)o=arguments[2];else{for(;i<r&&!(i in t);)i++;o=t[i++]}for(;i<r;)i in t&&(o=e(o,t[i],i,t)),i++;return o}s(Yl,"Kr");function mr(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")}s(mr,"oe");function xo(t){var e=typeof t;e!==Qe&&(e!==yt||t===null)&&En("objKeys called on non-object");var n=[];for(var r in t)t&&$t.call(t,r)&&n.push(r);if(nd)for(var i=ps.length,o=0;o<i;o++)t&&$t.call(t,ps[o])&&n.push(ps[o]);return n}s(xo,"Ye");function Go(t,e,n,r){if(Uc)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),Uc(t,e,i),!0}catch(o){}return!1}s(Go,"St");function ui(){var t=Date;return t.now?t.now():new t().getTime()}s(ui,"pe");function An(t){return jr(t)?t.name:""}s(An,"G");function _n(t,e,n,r,i){var o=n;return t&&(o=t[e],o!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,t[e]=o)),o}s(_n,"K");function _r(t,e,n){var r;return t?(r=t[e],!r&&E(r)&&(r=S(n)?{}:n,t[e]=r)):r=S(n)?{}:n,r}s(_r,"ge");function Zl(t){return!t}s(Zl,"Xn");function kc(t){return!!t}s(kc,"br");function ki(t){throw new Error(t)}s(ki,"Ae");function ed(t,e,n){if(t&&e&&t!==e&&gt(t)&&gt(e)){var r=s(function(o){if(en(o)){var a=e[o];Be(a)?(!n||n(o,!0,e,t))&&(t[o]=function(c){return function(){var u=arguments;return e[c].apply(e,u)}}(o)):(!n||n(o,!1,e,t))&&(le(t,o)&&delete t[o],Go(t,o,function(){return e[o]},function(c){e[o]=c})||(t[o]=a))}},"n");for(var i in e)r(i)}return t}s(ed,"Wr");function _p(t){return function(){function e(){var n=this;t&&fn(t,function(r,i){n[r]=i})}return s(e,"e"),e}()}s(_p,"Ki");function td(t){return t&&(t=Ue(Dt?Dt({},t):t)),t}s(td,"Jn");var Mc,Fc,Lc,Nc,Oc,Uc,Ep,xp,nd,ps,Er=O(()=>{Bt(),Mc="on",Fc="attachEvent",Lc="addEventListener",Nc="detachEvent",Oc="removeEventListener",Uc=tt,Ep=Ue.freeze,xp=Ue.seal,nd=!{toString:null}.propertyIsEnumerable("toString"),ps=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]});function xr(t){var e=nn();return e&&e[t]?e[t]:t===Bc&&vs()?window:null}s(xr,"Ee");function vs(){return Boolean(typeof window===yt&&window)}s(vs,"or");function Ta(){return vs()?window:xr(Bc)}s(Ta,"It");function rd(){return Boolean(typeof document===yt&&document)}s(rd,"Qn");function Mi(){return rd()?document:xr(id)}s(Mi,"De");function Ip(){return Boolean(typeof navigator===yt&&navigator)}s(Ip,"Bo");function Fi(){return Ip()?navigator:xr(od)}s(Fi,"Le");function Dp(){return Boolean(typeof history===yt&&history)}s(Dp,"zo");function Tp(){return Dp()?history:xr(ad)}s(Tp,"Zi");function Io(t){if(t&&hd){var e=xr("__mockLocation");if(e)return e}return typeof location===yt&&location?location:xr(sd)}s(Io,"$e");function Pp(){return typeof console!==J?console:xr(cd)}s(Pp,"Yi");function Gi(){return xr(ud)}s(Gi,"Je");function Qo(){return Boolean(typeof JSON===yt&&JSON||xr(Wc)!==null)}s(Qo,"mt");function wi(){return Qo()?JSON||xr(Wc):null}s(wi,"we");function Rp(){return xr(ld)}s(Rp,"$i");function Ap(){return xr(dd)}s(Ap,"ea");function kp(){var t=Fi();return t&&t.product?t.product===fd:!1}s(kp,"ta");function ms(){var t=Fi();if(t&&(t.userAgent!==Ss||Cs===null)){Ss=t.userAgent;var e=(Ss||"").toLowerCase();Cs=Rn(e,ys)||Rn(e,ws)}return Cs}s(ms,"Gt");function Hc(t){if(t===void 0&&(t=null),!t){var e=Fi()||{};t=e?(e.userAgent||"").toLowerCase():""}var n=(t||"").toLowerCase();if(Rn(n,ys))return parseInt(n.split(ys)[1]);if(Rn(n,ws)){var r=parseInt(n.split(ws)[1]);if(r)return r+4}return null}s(Hc,"sr");function hn(t){var e=Object[He].toString.call(t),n="";return e==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":Qo()&&(n=wi().stringify(t)),e+n}s(hn,"O");var Bc,id,od,ad,sd,cd,ud,Wc,ld,dd,fd,ys,ws,Cs,Ss,hd,Pa=O(()=>{"use strict";Bt(),Er(),Bc="window",id="document",od="navigator",ad="history",sd="location",cd="console",ud="performance",Wc="JSON",ld="crypto",dd="msCrypto",fd="ReactNative",ys="msie",ws="trident/",Cs=null,Ss=null,hd=!1});function gd(t){return t?'"'+t.replace(/\"/g,"")+'"':""}s(gd,"Ho");function bs(t,e){return(t||{}).logger||new $c(e)}s(bs,"Mt");var pd,vd,md,Xo,$c,zc=O(()=>{"use strict";sn(),Pa(),ht(),Er(),pd="AI (Internal): ",vd="AI: ",md="AITR_",Xo=function(){function t(e,n,r,i){r===void 0&&(r=!1);var o=this;o.messageId=e,o.message=(r?vd:pd)+e;var a="";Qo()&&(a=wi().stringify(i));var c=(n?" message:"+gd(n):"")+(i?" props:"+gd(a):"");o.message+=c}return s(t,"t"),t.dataType="MessageData",t}(),$c=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};xn(t,this,function(i){E(e)&&(e={}),i.consoleLoggingLevel=function(){return o("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return o("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return o("maxMessageLimit",25)},i.enableDebugExceptions=function(){return o("enableDebugExceptions",!1)},i.throwInternal=function(c,u,l,d,h){h===void 0&&(h=!1);var g=new Xo(u,l,h,d);if(i.enableDebugExceptions())throw g;if(!S(g.message)){var p=i.consoleLoggingLevel();if(h){var C=+g.messageId;!r[C]&&p>=fe.WARNING&&(i.warnToConsole(g.message),r[C]=!0)}else p>=fe.WARNING&&i.warnToConsole(g.message);i.logInternalMessage(c,g)}},i.warnToConsole=function(c){var u=Pp();if(u){var l="log";u.warn&&(l="warn"),Be(u[l])&&u[l](c)}},i.resetInternalMessageCount=function(){n=0,r={}},i.logInternalMessage=function(c,u){if(!a()){var l=!0,d=md+u.messageId;if(r[d]?l=!1:r[d]=!0,l&&(c<=i.telemetryLoggingLevel()&&(i.queue.push(u),n++),n===i.maxInternalMessageLimit())){var h="Internal events throttle limit per PageView reached for this app.",g=new Xo(Y.MessageLimitPerPVExceeded,h,!1);i.queue.push(g),i.warnToConsole(h)}}};function o(c,u){var l=e[c];return E(l)?u:l}s(o,"a");function a(){return n>=i.maxInternalMessageLimit()}s(a,"o")})}return s(t,"t"),t}()});function Jo(t,e,n,r,i){if(t){var o=t;if(Be(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var a=void 0,c=o.getCtx(_s);try{if(a=o.create(e(),r,i),a){if(c&&a.setCtx&&(a.setCtx(Yo.ParentContextKey,c),c.getCtx&&c.setCtx)){var u=c.getCtx(Yo.ChildrenContextKey);u||(u=[],c.setCtx(Yo.ChildrenContextKey,u)),u.push(a)}return o.setCtx(_s,a),n(a)}}catch(l){a&&a.setCtx&&a.setCtx("exception",l)}finally{a&&o.fire(a),o.setCtx(_s,c)}}}return n()}s(Jo,"ut");var Do,Yo,jc,_s,Es=O(()=>{ht(),Er(),Do="ctx",Yo=function(){function t(e,n,r){var i=this,o=!1;if(i.start=ui(),i.name=e,i.isAsync=r,i.isChildEvt=function(){return!1},Be(n)){var a;o=Go(i,"payload",function(){return!a&&Be(n)&&(a=n(),n=null),a})}i.getCtx=function(c){return c?c===t.ParentContextKey||c===t.ChildrenContextKey?i[c]:(i[Do]||{})[c]:null},i.setCtx=function(c,u){if(c)if(c===t.ParentContextKey)i[c]||(i.isChildEvt=function(){return!0}),i[c]=u;else if(c===t.ChildrenContextKey)i[c]=u;else{var l=i[Do]=i[Do]||{};l[c]=u}},i.complete=function(){var c=0,u=i.getCtx(t.ChildrenContextKey);if(vr(u))for(var l=0;l<u.length;l++){var d=u[l];d&&(c+=d.time)}i.time=ui()-i.start,i.exTime=i.time-c,i.complete=function(){},!o&&Be(n)&&(i.payload=n())}}return s(t,"t"),t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),jc=function(){function t(e){this.ctx={},xn(t,this,function(n){n.create=function(r,i,o){return new Yo(r,i,o)},n.fire=function(r){r&&(r.complete(),e&&e.perfEvent(r))},n.setCtx=function(r,i){if(r){var o=n[Do]=n[Do]||{};o[r]=i}},n.getCtx=function(r){return(n[Do]||{})[r]}})}return s(t,"t"),t}(),_s="CoreUtils.doPerf"}),yd,Mp=O(()=>{"use strict";Es(),sn(),Er(),yd=function(){function t(e,n){var r=this,i=null,o=Be(e.processTelemetry),a=Be(e.setNextPlugin);r._hasRun=!1,r.getPlugin=function(){return e},r.getNext=function(){return i},r.setNext=function(c){i=c},r.processTelemetry=function(c,u){u||(u=n);var l=e?e.identifier:"TelemetryPluginChain";Jo(u?u.core():null,function(){return l+":processTelemetry"},function(){if(e&&o){r._hasRun=!0;try{u.setNext(i),a&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(c,u)}catch(h){var d=i&&i._hasRun;(!i||!d)&&u.diagLog().throwInternal(fe.CRITICAL,Y.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+h),i&&!d&&i.processTelemetry(c,u)}}else i&&(r._hasRun=!0,i.processTelemetry(c,u))},function(){return{item:c}},!c.sync)}}return s(t,"t"),t}()});function Vc(t,e){var n=[];if(t&&t.length>0)for(var r=null,i=0;i<t.length;i++){var o=t[i];if(o&&Be(o.processTelemetry)){var a=new yd(o,e);n.push(a),r&&r.setNext(a),r=a}}return n.length>0?n[0]:null}s(Vc,"na");function Fp(t,e,n){var r=[],i=!n;if(t)for(;t;){var o=t.getPlugin();(i||o===n)&&(i=!0,r.push(o)),t=t.getNext()}return i||r.push(n),Vc(r,e)}s(Fp,"Qc");function Lp(t,e,n){var r=t,i=!1;return n&&t&&(r=[],vn(t,function(o){(i||o===n)&&(i=!0,r.push(o))})),n&&!i&&(r||(r=[]),r.push(n)),Vc(r,e)}s(Lp,"Zc");var To,qc=O(()=>{"use strict";zc(),Mp(),Er(),To=function(){function t(e,n,r,i){var o=this,a=null;i!==null&&(e&&Be(e.getPlugin)?a=Fp(e,o,i||e.getPlugin()):i?a=Lp(e,o,i):S(i)&&(a=Vc(e,o))),o.core=function(){return r},o.diagLog=function(){return bs(r,n)},o.getCfg=function(){return n},o.getExtCfg=function(c,u){u===void 0&&(u={});var l;if(n){var d=n.extensionConfig;d&&c&&(l=d[c])}return l||u},o.getConfig=function(c,u,l){l===void 0&&(l=!1);var d,h=o.getExtCfg(c,null);return h&&!E(h[u])?d=h[u]:n&&!E(n[u])&&(d=n[u]),E(d)?l:d},o.hasNext=function(){return a!=null},o.getNext=function(){return a},o.setNext=function(c){a=c},o.processNext=function(c){var u=a;u&&(a=u.getNext(),u.processTelemetry(c,o))},o.createNew=function(c,u){return c===void 0&&(c=null),new t(c||a,n,r,u)}}return s(t,"t"),t}()}),wd,Kc,Cd=O(()=>{wd="iKey",Kc="extensionConfig"}),Ra,Po,Sd=O(()=>{"use strict";qc(),Er(),Cd(),Ra="getPlugin",Po=function(){function t(){var e=this,n=!1,r=null,i=null;e.core=null,e.diagLog=function(o){return e._getTelCtx(o).diagLog()},e.isInitialized=function(){return n},e.setInitialized=function(o){n=o},e.setNextPlugin=function(o){i=o},e.processNext=function(o,a){a?a.processNext(o):i&&Be(i.processTelemetry)&&i.processTelemetry(o,null)},e._getTelCtx=function(o){o===void 0&&(o=null);var a=o;if(!a){var c=r||new To(null,{},e.core);i&&i[Ra]?a=c.createNew(null,i[Ra]):a=c.createNew(null,i)}return a},e._baseTelInit=function(o,a,c,u){o&&_n(o,Kc,[],null,E),!u&&a&&(u=a.getProcessTelContext().getNext());var l=i;i&&i[Ra]&&(l=i[Ra]()),e.core=a,r=new To(u,o,a,l),n=!0}}return s(t,"t"),t.prototype.initialize=function(e,n,r,i){this._baseTelInit(e,n,r,i)},t}()});function Gc(t,e){for(var n=[],r=null,i=t.getNext();i;){var o=i.getPlugin();o&&(r&&Be(r[Xc])&&Be(o[xs])&&r[Xc](o),(!Be(o[Jc])||!o[Jc]())&&n.push(o),r=o,i=i.getNext())}vn(n,function(a){a.initialize(t.getCfg(),t.core(),e,t.getNext())})}s(Gc,"Qr");function bd(t){return t.sort(function(e,n){var r=0,i=Be(n[xs]);return Be(e[xs])?r=i?e[Qc]-n[Qc]:1:i&&(r=-1),r})}s(bd,"sa");var xs,Qc,Xc,Jc,_d=O(()=>{"use strict";Er(),xs="processTelemetry",Qc="priority",Xc="setNextPlugin",Jc="isInitialized"}),Is,Ed,xd,Np=O(()=>{"use strict";Bt(),ht(),Sd(),qc(),_d(),Er(),Is=500,Ed="Channel has invalid priority",xd=function(t){ee(e,t);function e(){var n=t.call(this)||this;n.identifier="ChannelControllerPlugin",n.priority=Is;var r;xn(e,n,function(c,u){c.setNextPlugin=function(l){},c.processTelemetry=function(l,d){r&&vn(r,function(h){if(h.length>0){var g=n._getTelCtx(d).createNew(h);g.processNext(l)}})},c.getChannelControls=function(){return r},c.initialize=function(l,d,h){c.isInitialized()||(u.initialize(l,d,h),a((l||{}).channels,h),vn(r,function(g){return Gc(new To(g,l,d),h)}))}});function i(c){vn(c,function(u){u.priority<Is&&ki(Ed+u.identifier)})}s(i,"i");function o(c){c&&c.length>0&&(c=c.sort(function(u,l){return u.priority-l.priority}),i(c),r.push(c))}s(o,"a");function a(c,u){if(r=[],c&&vn(c,function(d){return o(d)}),u){var l=[];vn(u,function(d){d.priority>Is&&l.push(d)}),o(l)}}return s(a,"o"),n}return s(e,"e"),e._staticInit=function(){var n=e.prototype;Go(n,"ChannelControls",n.getChannelControls),Go(n,"channelQueue",n.getChannelControls)}(),e}(Po)});function Id(t,e){var n=Aa[Qi]||Ma[Qi];return n||(n=Aa[Qi]=Aa(t,e),Ma[Qi]=n),n}s(Id,"va");function Ds(t){return t?t.isEnabled():!0}s(Ds,"ni");function Op(t){var e=t.cookieCfg=t.cookieCfg||{};if(_n(e,"domain",t.cookieDomain,he,E),_n(e,"path",t.cookiePath||"/",null,E),E(e[Rs])){var n=void 0;S(t[tu])||(n=!t[tu]),S(t[nu])||(n=!t[nu]),e[Rs]=n}return e}s(Op,"$c");function Yc(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r[Qi]?n=r[Qi]:n=Aa(e)}return n||(n=Id(e,(t||{}).logger)),n}s(Yc,"lr");function Aa(t,e){var n=Op(t||Ma),r=n.path||"/",i=n.domain,o=n[Rs]!==!1,a={isEnabled:function(){var c=o&&Dd(e),u=Ma[Qi];return c&&u&&a!==u&&(c=Ds(u)),c},setEnabled:function(c){o=c!==!1},set:function(c,u,l,d,h){if(Ds(a)){var g={},p=mr(u||li),C=p.indexOf(";");if(C!==-1&&(p=mr(u.substring(0,C)),g=Td(u.substring(C+1))),_n(g,"domain",d||i,kc,S),!E(l)){var v=ms();if(S(g[Ps])){var m=ui(),b=m+l*1e3;if(b>0){var w=new Date;w.setTime(b),_n(g,Ps,Pd(w,v?Zc:eu)||Pd(w,v?Zc:eu)||li,kc)}}v||_n(g,"max-age",li+l,null,S)}var P=Io();P&&P.protocol==="https:"&&(_n(g,"secure",null,null,S),As===null&&(As=!kd((Fi()||{}).userAgent)),As&&_n(g,"SameSite","None",null,S)),_n(g,"path",h||r,null,S);var F=n.setCookie||Ad;F(c,Rd(p,g))}},get:function(c){var u=li;return Ds(a)&&(u=(n.getCookie||Up)(c)),u},del:function(c,u){Ds(a)&&a.purge(c,u)},purge:function(c,u){if(Dd(e)){var l=(h={},h.path=u||"/",h[Ps]="Thu, 01 Jan 1970 00:00:01 GMT",h);ms()||(l["max-age"]="0");var d=n.delCookie||Ad;d(c,Rd(li,l))}var h}};return a[Qi]=a,a}s(Aa,"cr");function Dd(t){if(ka===null){ka=!1;try{var e=Zo||{};ka=e[Ts]!==void 0}catch(n){t&&t.throwInternal(fe.WARNING,Y.CannotAccessCookie,"Cannot access document.cookie - "+An(n),{exception:hn(n)})}}return ka}s(Dd,"da");function Td(t){var e={};if(t&&t.length){var n=mr(t).split(";");vn(n,function(r){if(r=mr(r||li),r){var i=r.indexOf("=");i===-1?e[r]=null:e[mr(r.substring(0,i))]=mr(r.substring(i+1))}})}return e}s(Td,"as");function Pd(t,e){return Be(t[e])?t[e]():null}s(Pd,"rs");function Rd(t,e){var n=t||li;return fn(e,function(r,i){n+="; "+r+(E(i)?li:"="+i)}),n}s(Rd,"ns");function Up(t){var e=li;if(Zo){var n=Zo[Ts]||li;ru!==n&&(iu=Td(n),ru=n),e=mr(iu[t]||li)}return e}s(Up,"el");function Ad(t,e){Zo&&(Zo[Ts]=t+"="+e)}s(Ad,"is");function kd(t){return en(t)?!!(Rn(t,"CPU iPhone OS 12")||Rn(t,"iPad; CPU OS 12")||Rn(t,"Macintosh; Intel Mac OS X 10_14")&&Rn(t,"Version/")&&Rn(t,"Safari")||Rn(t,"Macintosh; Intel Mac OS X 10_14")&&Zn(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Rn(t,"Chrome/5")||Rn(t,"Chrome/6")||Rn(t,"UnrealEngine")&&!Rn(t,"Chrome")||Rn(t,"UCBrowser/12")||Rn(t,"UCBrowser/11")):!1}s(kd,"ai");var Zc,eu,Ts,Ps,Rs,tu,nu,Qi,li,ka,As,ru,Zo,iu,Ma,ou=O(()=>{sn(),Pa(),Er(),Zc="toGMTString",eu="toUTCString",Ts="cookie",Ps="expires",Rs="enabled",tu="isCookieUseDisabled",nu="disableCookiesUsage",Qi="_ckMgr",li="",ka=null,As=null,ru=null,Zo=Mi(),iu={},Ma={}}),Md,au,su,Fd=O(()=>{"use strict";Bt(),ht(),Np(),qc(),_d(),Es(),ou(),Er(),Cd(),Md="Extensions must provide callback to initialize",au="_notificationManager",su=function(){function t(){var e=!1,n,r,i,o,a;xn(t,this,function(c){c._extensions=new Array,r=new xd,c.logger=$n({throwInternal:function(u,l,d,h,g){g===void 0&&(g=!1)},warnToConsole:function(u){},resetInternalMessageCount:function(){}}),n=[],c.isInitialized=function(){return e},c.initialize=function(u,l,d,h){c.isInitialized()&&ki("Core should not be initialized more than once"),(!u||E(u.instrumentationKey))&&ki("Please provide instrumentation key"),i=h,c[au]=h,c.config=u||{},u.extensions=E(u.extensions)?[]:u.extensions;var g=_r(u,Kc);g.NotificationManager=h,d&&(c.logger=d);var p=[];p.push.apply(p,l.concat(u.extensions)),p=bd(p);var C=[],v=[],m={};vn(p,function(b){(E(b)||E(b.initialize))&&ki(Md);var w=b.priority,P=b.identifier;b&&w&&(E(m[w])?m[w]=P:d.warnToConsole("Two extensions have same priority #"+w+" - "+m[w]+", "+P)),!w||w<r.priority?C.push(b):v.push(b)}),p.push(r),C.push(r),p=bd(p),c._extensions=p,Gc(new To([r],u,c),p),Gc(new To(C,u,c),p),c._extensions=C,c.getTransmissionControls().length===0&&ki("No channels available"),e=!0,c.releaseQueue()},c.getTransmissionControls=function(){return r.getChannelControls()},c.track=function(u){_n(u,wd,c.config.instrumentationKey,null,Zl),_n(u,"time",ni(new Date),null,Zl),_n(u,"ver","4.0",null,E),c.isInitialized()?c.getProcessTelContext().processNext(u):n.push(u)},c.getProcessTelContext=function(){var u=c._extensions,l=u;return(!u||u.length===0)&&(l=[r]),new To(l,c.config,c)},c.getNotifyMgr=function(){return i||(i=$n({addNotificationListener:function(u){},removeNotificationListener:function(u){},eventsSent:function(u){},eventsDiscarded:function(u,l){},eventsSendRequest:function(u,l){}}),c[au]=i),i},c.getCookieMgr=function(){return a||(a=Aa(c.config,c.logger)),a},c.setCookieMgr=function(u){a=u},c.getPerfMgr=function(){return o||c.config&&c.config.enablePerfMgr&&(o=new jc(c.getNotifyMgr())),o},c.setPerfMgr=function(u){o=u},c.eventCnt=function(){return n.length},c.releaseQueue=function(){n.length>0&&(vn(n,function(u){c.getProcessTelContext().processNext(u)}),n=[])}})}return s(t,"t"),t}()}),cu,Ld=O(()=>{ht(),Er(),cu=function(){function t(e){this.listeners=[];var n=!!(e||{}).perfEvtsSendAll;xn(t,this,function(r){r.addNotificationListener=function(i){r.listeners.push(i)},r.removeNotificationListener=function(i){for(var o=Ia(r.listeners,i);o>-1;)r.listeners.splice(o,1),o=Ia(r.listeners,i)},r.eventsSent=function(i){vn(r.listeners,function(o){o&&o.eventsSent&&setTimeout(function(){return o.eventsSent(i)},0)})},r.eventsDiscarded=function(i,o){vn(r.listeners,function(a){a&&a.eventsDiscarded&&setTimeout(function(){return a.eventsDiscarded(i,o)},0)})},r.eventsSendRequest=function(i,o){vn(r.listeners,function(a){if(a&&a.eventsSendRequest)if(o)setTimeout(function(){return a.eventsSendRequest(i,o)},0);else try{a.eventsSendRequest(i,o)}catch(c){}})},r.perfEvent=function(i){i&&(n||!i.isChildEvt())&&vn(r.listeners,function(o){if(o&&o.perfEvent)if(i.isAsync)setTimeout(function(){return o.perfEvent(i)},0);else try{o.perfEvent(i)}catch(a){}})}})}return s(t,"t"),t}()}),uu,Hp=O(()=>{Bt(),Fd(),ke(),Ld(),Es(),zc(),ht(),Er(),uu=function(t){ee(e,t);function e(){var n=t.call(this)||this;return xn(e,n,function(r,i){r.initialize=function(c,u,l,d){i.initialize(c,u,l||new $c(c),d||new cu(c))},r.track=function(c){Jo(r.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){c===null&&(a(c),ki("Invalid telemetry item")),o(c),i.track(c)},function(){return{item:c}},!c.sync)},r.addNotificationListener=function(c){var u=r.getNotifyMgr();u&&u.addNotificationListener(c)},r.removeNotificationListener=function(c){var u=r.getNotifyMgr();u&&u.removeNotificationListener(c)},r.pollInternalLogs=function(c){var u=r.config.diagnosticLogInterval;return(!u||!(u>0))&&(u=1e4),setInterval(function(){var l=r.logger?r.logger.queue:[];vn(l,function(d){var h={name:c||"InternalMessageId: "+d.messageId,iKey:r.config.instrumentationKey,time:ni(new Date),baseType:Xo.dataType,baseData:{message:d.message}};r.track(h)}),l.length=0},u)};function o(c){if(E(c.name))throw a(c),Error("telemetry name required")}s(o,"a");function a(c){var u=r.getNotifyMgr();u&&u.eventsDiscarded([c],ue.InvalidEvent)}s(a,"o")}),n}return s(e,"e"),e}(su)});function Nd(t){t<0&&(t>>>=0),ea=123456789+t&Xi,ta=987654321-t&Xi,du=!0}s(Nd,"ls");function Od(){try{var t=ui()&2147483647;Nd((Math.random()*lu^t)+t)}catch(e){}}s(Od,"fs");function Ud(t){return t>0?Math.floor(Ro()/Xi*(t+1))>>>0:0}s(Ud,"si");function Ro(t){var e,n=Rp()||Ap();return n&&n.getRandomValues?e=n.getRandomValues(new Uint32Array(1))[0]&Xi:ms()?(du||Od(),e=Hd()&Xi):e=Math.floor(lu*Math.random()|0),t||(e>>>=0),e}s(Ro,"Ct");function Bp(t){t?Nd(t):Od()}s(Bp,"xa");function Hd(t){ta=36969*(ta&65535)+(ta>>16)&Xi,ea=18e3*(ea&65535)+(ea>>16)&Xi;var e=(ta<<16)+(ea&65535)>>>0&Xi|0;return t||(e>>>=0),e}s(Hd,"ui");var lu,Xi,du,ea,ta,Bd=O(()=>{Pa(),Er(),lu=4294967296,Xi=4294967295,du=!1,ea=123456789,ta=987654321});function Ao(t,e){var n=!1,r=Ta();r&&(n=on(r,t,e),n=on(r.body,t,e)||n);var i=Mi();return i&&(n=La.Attach(i,t,e)||n),n}s(Ao,"_t");function Wp(){function t(){return Ud(15)}return s(t,"t"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace($d,function(e){var n=t()|0,r=e==="x"?n:n&3|8;return r.toString(16)})}s(Wp,"ps");function $p(){var t=Gi();return t&&t.now?t.now():ui()}s($p,"ds");function ks(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ro()>>>0,r=0,i="";i.length<t;)r++,i+=e.charAt(n&63),n>>>=6,r===5&&(n=(Ro()<<2&4294967295|n&3)>>>0,r=0);return i}s(ks,"Xt");function Li(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e="",n,r=0;r<4;r++)n=Ro(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var i=t[8+(Ro()&3)|0];return e.substr(0,8)+e.substr(9,4)+"4"+e.substr(13,3)+i+e.substr(16,3)+e.substr(19,12)}s(Li,"Oe");function na(t,e){var n=Id(t,e),r=Ms._canUseCookies;return ra===null&&(ra=[],Fa=r,Go(Ms,"_canUseCookies",function(){return Fa},function(i){Fa=i,vn(ra,function(o){o.setEnabled(i)})})),Ia(ra,n)===-1&&ra.push(n),lo(r)&&n.setEnabled(r),lo(Fa)&&n.setEnabled(Fa),n}s(na,"Qt");function Wd(){na().setEnabled(!1)}s(Wd,"ci");function zp(t){return na(null,t).isEnabled()}s(zp,"Sa");function jp(t,e){return na(null,t).get(e)}s(jp,"Ia");function Vp(t,e,n,r){na(null,t).set(e,n,null,r)}s(Vp,"Ca");function qp(t,e){return na(null,t).del(e)}s(qp,"Ta");var ra,Fa,Ms,$d,La,Kp=O(()=>{"use strict";Bt(),ou(),Pa(),Er(),Bd(),ra=null,Ms={_canUseCookies:void 0,isTypeof:T,isUndefined:S,isNullOrUndefined:E,hasOwnProperty:le,isFunction:Be,isObject:gt,isDate:br,isArray:vr,isError:jr,isString:en,isNumber:Ko,isBoolean:lo,toISOString:ni,arrForEach:vn,arrIndexOf:Ia,arrMap:Da,arrReduce:Yl,strTrim:mr,objCreate:$n,objKeys:xo,objDefineAccessors:Go,addEventHandler:Ao,dateNow:ui,isIE:ms,disableCookies:Wd,newGuid:Wp,perfNow:$p,newId:ks,randomValue:Ud,random32:Ro,mwcRandomSeed:Bp,mwcRandom32:Hd,generateW3CId:Li},$d=/[xy]/g,La={Attach:on,AttachEvent:on,Detach:ln,DetachEvent:ln}});function fu(t,e){if(t)for(var n=0;n<t.length&&!e(t[n],n);n++);}s(fu,"wa");function hu(t,e,n,r,i){i>=0&&i<=2&&fu(t,function(o,a){var c=o.cbks,u=c[vu[i]];if(u){e.ctx=function(){var h=r[a]=r[a]||{};return h};try{u.apply(e.inst,n)}catch(h){var l=e.err;try{var d=c[vu[2]];d&&(e.err=h,d.apply(e.inst,n))}catch(g){}finally{e.err=l}}}})}s(hu,"Ea");function Gp(t){return function(){var e=this,n=arguments,r=t.h,i={name:t.n,inst:e,ctx:null,set:u},o=[],a=c([i],n);function c(d,h){return fu(h,function(g){d.push(g)}),d}s(c,"u");function u(d,h){n=c([],n),n[d]=h,a=c([i],n)}s(u,"s"),hu(r,i,a,o,0);var l=t.f;try{i.rslt=l.apply(e,n)}catch(d){throw i.err=d,hu(r,i,a,o,3),d}return hu(r,i,a,o,1),i.rslt}}s(Gp,"al");function Qp(t){if(t){if(mu)return mu(t);var e=t[jd]||t[He]||t[Vd];if(e)return e}return null}s(Qp,"ol");function zd(t,e,n){var r=null;return t&&(le(t,e)?r=t:n&&(r=zd(Qp(t),e,!1))),r}s(zd,"xs");function Xp(t,e,n){return t?gu(t[He],e,n,!1):null}s(Xp,"Pa");function gu(t,e,n,r){if(r===void 0&&(r=!0),t&&e&&n){var i=zd(t,e,r);if(i){var o=i[e];if(typeof o===Qe){var a=o[pu];if(!a){a={i:0,n:e,f:o,h:[]};var c=Gp(a);c[pu]=a,i[e]=c}var u={id:a.i,cbks:n,rm:function(){var l=this.id;fu(a.h,function(d,h){if(d.id===l)return a.h.splice(h,1),1})}};return a.i++,a.h.push(u),u}}}return null}s(gu,"sn");var pu,vu,jd,Vd,mu,Jp=O(()=>{Bt(),Er(),pu="_aiHooks",vu=["req","rsp","hkErr","fnErr"],jd="__proto__",Vd="constructor",mu=Object.getPrototypeOf}),wn=O(()=>{Hp(),Fd(),Sd(),Bd(),Kp(),Er(),Pa(),Bt(),Ld(),Es(),zc(),sn(),Jp(),ou()}),zn,qd=O(()=>{zn={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}});function yu(t,e,n){var r=e.length,i=Kd(t,e);if(i.length!==r){for(var o=0,a=i;n[a]!==void 0;)o++,a=i.substring(0,150-3)+Xd(o);i=a}return i}s(yu,"li");function Kd(t,e){var n;return e&&(e=mr(e.toString()),e.length>150&&(n=e.substring(0,150),t.throwInternal(fe.WARNING,Y.NameTooLong,"name is too long.  It has been truncated to "+150+" characters.",{name:e},!0))),n||e}s(Kd,"Aa");function Fr(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=mr(e),e.toString().length>n&&(r=e.toString().substring(0,n),t.throwInternal(fe.WARNING,Y.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}s(Fr,"ae");function Na(t,e){return Cu(t,e,2048,Y.UrlTooLong)}s(Na,"Tt");function wu(t,e){var n;return e&&e.length>32768&&(n=e.substring(0,32768),t.throwInternal(fe.WARNING,Y.MessageTruncated,"message is too long, it has been truncated to "+32768+" characters.",{message:e},!0)),n||e}s(wu,"Nr");function Gd(t,e){var n;if(e){var r=""+e;r.length>32768&&(n=r.substring(0,32768),t.throwInternal(fe.WARNING,Y.ExceptionTruncated,"exception is too long, it has been truncated to "+32768+" characters.",{exception:e},!0))}return n||e}s(Gd,"fi");function fo(t,e){if(e){var n={};fn(e,function(r,i){if(gt(i)&&Qo())try{i=wi().stringify(i)}catch(o){t.throwInternal(fe.WARNING,Y.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:o},!0)}i=Fr(t,i,8192),r=yu(t,r,n),n[r]=i}),e=n}return e}s(fo,"Be");function ho(t,e){if(e){var n={};fn(e,function(r,i){r=yu(t,r,n),n[r]=i}),e=n}return e}s(ho,"ze");function Qd(t,e){return e&&Cu(t,e,128,Y.IdTooLong).toString()}s(Qd,"pi");function Cu(t,e,n,r){var i;return e&&(e=mr(e),e.length>n&&(i=e.substring(0,n),t.throwInternal(fe.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),i||e}s(Cu,"di");function Xd(t){var e="00"+t;return e.substr(e.length-3)}s(Xd,"Da");var Jd,Ci=O(()=>{wn(),Jd={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:yu,sanitizeKey:Kd,sanitizeString:Fr,sanitizeUrl:Na,sanitizeMessage:wu,sanitizeException:Gd,sanitizeProperties:fo,sanitizeMeasurements:ho,sanitizeId:Qd,sanitizeInput:Cu,padNumber:Xd,trim:mr}});function ia(t){var e=null;if(Be(Event))e=new Event(t);else{var n=Mi();n&&n.createEvent&&(e=n.createEvent("Event"),e.initEvent(t,!0,!0))}return e}s(ia,"Ut");var Yd=O(()=>{wn()});function Un(t,e){return e===void 0&&(e=!1),t==null?e:t.toString().toLowerCase()==="true"}s(Un,"ee");function Ji(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=""+t%1e3,n=""+Math.floor(t/1e3)%60,r=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e.length===1?"00"+e:e.length===2?"0"+e:e,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,i=i.length<2?"0"+i:i,(o>0?o+".":"")+i+":"+r+":"+n+"."+e}s(Ji,"Ge");function Su(){var t=Fi();return"sendBeacon"in t&&t.sendBeacon}s(Su,"kr");function Zd(t,e){var n=null;return vn(t,function(r){if(r.identifier===e)return n=r,-1}),n}s(Zd,"un");function ef(t,e,n,r,i){return!i&&en(t)&&(t==="Script error."||t==="Script error")}s(ef,"cn");var Fs=O(()=>{wn()}),ko,Ls,oa,Ns,bu,di,Si=O(()=>{ko="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ls="sampleRate",oa="ProcessLegacy",Ns="http.method",bu="https://dc.services.visualstudio.com",di="not_specified"}),Mo,bi,tf=O(()=>{(function(t){t[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage"})(Mo||(Mo={})),function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C",t[t.W3C=2]="W3C"}(bi||(bi={}))});function _u(){return xu()?Os(Mo.LocalStorage):null}s(_u,"Ra");function Os(t){try{if(E(nn()))return null;var e=new Date,n=xr(t===Mo.LocalStorage?"localStorage":"sessionStorage");n.setItem(e.toString(),e.toString());var r=n.getItem(e.toString())!==e.toString();if(n.removeItem(e.toString()),!r)return n}catch(i){}return null}s(Os,"gi");function Eu(){return aa()?Os(Mo.SessionStorage):null}s(Eu,"Ma");function nf(){go=!1,po=!1}s(nf,"pn");function xu(){return go===void 0&&(go=!!Os(Mo.LocalStorage)),go}s(xu,"Rr");function rf(t,e){var n=_u();if(n!==null)try{return n.getItem(e)}catch(r){go=!1,t.throwInternal(fe.WARNING,Y.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+An(r),{exception:hn(r)})}return null}s(rf,"dn");function of(t,e,n){var r=_u();if(r!==null)try{return r.setItem(e,n),!0}catch(i){go=!1,t.throwInternal(fe.WARNING,Y.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+An(i),{exception:hn(i)})}return!1}s(of,"gn");function af(t,e){var n=_u();if(n!==null)try{return n.removeItem(e),!0}catch(r){go=!1,t.throwInternal(fe.WARNING,Y.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+An(r),{exception:hn(r)})}return!1}s(af,"vn");function aa(){return po===void 0&&(po=!!Os(Mo.SessionStorage)),po}s(aa,"wt");function Yp(){var t=[];return aa()&&fn(xr("sessionStorage"),function(e){t.push(e)}),t}s(Yp,"La");function Us(t,e){var n=Eu();if(n!==null)try{return n.getItem(e)}catch(r){po=!1,t.throwInternal(fe.WARNING,Y.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+An(r),{exception:hn(r)})}return null}s(Us,"Yt");function Hs(t,e,n){var r=Eu();if(r!==null)try{return r.setItem(e,n),!0}catch(i){po=!1,t.throwInternal(fe.WARNING,Y.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+An(i),{exception:hn(i)})}return!1}s(Hs,"$t");function sf(t,e){var n=Eu();if(n!==null)try{return n.removeItem(e),!0}catch(r){po=!1,t.throwInternal(fe.WARNING,Y.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+An(r),{exception:hn(r)})}return!1}s(sf,"mn");var go,po,cf=O(()=>{wn(),tf(),go=void 0,po=void 0});function Oa(t){var e=Tu,n=ff,r=n[e];return Du.createElement?n[e]||(r=n[e]=Du.createElement("a")):r={host:df(t,!0)},r.href=t,e++,e>=n.length&&(e=0),Tu=e,r}s(Oa,"gr");function uf(t){var e,n=Oa(t);return n&&(e=n.href),e}s(uf,"hn");function Zp(t){var e,n=Oa(t);return n&&(e=n.pathname),e}s(Zp,"Ua");function lf(t,e){return t?t.toUpperCase()+" "+e:e}s(lf,"xn");function df(t,e){var n=Iu(t,e)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>3&&en(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}s(df,"vi");function Iu(t,e){var n=null;if(t){var r=t.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>2&&en(r[2])&&r[2].length>0&&(n=r[2]||"",e&&r.length>2)){var i=(r[1]||"").toLowerCase(),o=r[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),n+=o}}return n}s(Iu,"yn");var Du,Tu,ff,hf=O(()=>{wn(),Du=Mi()||{},Tu=0,ff=[null,null,null,null,null]});function Bs(t){return gf.indexOf(t.toLowerCase())!==-1}s(Bs,"Mr");function ev(t,e,n,r){var i,o=r,a=r;if(e&&e.length>0){var c=Oa(e);if(i=c.host,!o)if(c.pathname!=null){var u=c.pathname.length===0?"/":c.pathname;u.charAt(0)!=="/"&&(u="/"+u),a=c.pathname,o=Fr(t,n?n+" "+u:u)}else o=Fr(t,e)}else i=r,o=r;return{target:i,name:o,data:a}}s(ev,"Cs");function Ua(){var t=Gi();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return ui()}s(Ua,"vr");function Lr(t,e){var n=null;return t!==0&&e!==0&&!E(t)&&!E(e)&&(n=e-t),n}s(Lr,"ve");var gf,Pu,pf,vo,vf,mf=O(()=>{wn(),qd(),Ci(),Yd(),Fs(),Si(),cf(),hf(),gf=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Pu={NotSpecified:di,createDomEvent:ia,disableStorage:nf,isInternalApplicationInsightsEndpoint:Bs,canUseLocalStorage:xu,getStorage:rf,setStorage:of,removeStorage:af,canUseSessionStorage:aa,getSessionStorageKeys:Yp,getSessionStorage:Us,setSessionStorage:Hs,removeSessionStorage:sf,disableCookies:Wd,canUseCookies:zp,disallowsSameSiteNone:kd,setCookie:Vp,stringToBoolOrDefault:Un,getCookie:jp,deleteCookie:qp,trim:mr,newId:ks,random32:function(){return Ro(!0)},generateW3CId:Li,isArray:vr,isError:jr,isDate:br,toISOStringForIE8:ni,getIEVersion:Hc,msToTimeSpan:Ji,isCrossOriginError:ef,dump:hn,getExceptionName:An,addEventHandler:on,IsBeaconApiSupported:Su,getExtension:Zd},pf={parseUrl:Oa,getAbsoluteUrl:uf,getPathName:Zp,getCompleteUrl:lf,parseHost:df,parseFullHost:Iu},vo={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(t,e,n){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t.correlationHeaderExcludePatterns){for(var r=0;r<t.correlationHeaderExcludePatterns.length;r++)if(t.correlationHeaderExcludePatterns[r].test(e))return!1}var i=Oa(e).host.toLowerCase();if(i&&(i.indexOf(":443")!==-1||i.indexOf(":80")!==-1)&&(i=(Iu(e,!0)||"").toLowerCase()),(!t||!t.enableCorsCorrelation)&&i&&i!==n)return!1;var o=t&&t.correlationHeaderDomains;if(o){var a;if(vn(o,function(l){var d=new RegExp(l.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||d.test(i)}),!a)return!1}var c=t&&t.correlationHeaderExcludedDomains;if(!c||c.length===0)return!0;for(var r=0;r<c.length;r++){var u=new RegExp(c[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(u.test(i))return!1}return i&&i.length>0},getCorrelationContext:function(t){if(t){var e=vo.getCorrelationContextValue(t,zn.requestContextTargetKey);if(e&&e!==vo.correlationIdPrefix)return e}},getCorrelationContextValue:function(t,e){if(t)for(var n=t.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(i.length===2&&i[0]===e)return i[1]}}},vf={Now:Ua,GetDuration:Lr}});function yf(t){if(!t)return{};var e=t.split(wf),n=Yl(e,function(i,o){var a=o.split(Cf);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];i[c]=u}return i},{});if(xo(n).length>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+r+"dc."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||bu}return n}s(yf,"mi");var wf,Cf,Sf,tv=O(()=>{Si(),wn(),wf=";",Cf="=",Sf={parse:yf}}),Ru,bf=O(()=>{Ru=function(){function t(){}return s(t,"t"),t}()}),Au,_f=O(()=>{Bt(),bf(),Au=function(t){ee(e,t);function e(){return t.call(this)||this}return s(e,"e"),e}(Ru)}),Ef,nv=O(()=>{Ef=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return s(t,"t"),t}()}),ku,rv=O(()=>{Bt(),nv(),Ci(),wn(),Si(),ku=function(t){ee(e,t);function e(n,r,i){var o=t.call(this)||this;return o.name=Fr(n,i)||di,o.data=r,o.time=ni(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1},o}return s(e,"e"),e}(Ef)}),Mu,xf=O(()=>{Mu=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return s(t,"t"),t}()}),_i,iv=O(()=>{Bt(),xf(),Ci(),Si(),_i=function(t){ee(e,t);function e(n,r,i,o){var a=t.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=Fr(n,r)||di,a.properties=fo(n,i),a.measurements=ho(n,o),a}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(Mu)}),If,ov=O(()=>{If=function(){function t(){}return s(t,"t"),t}()}),Df,av=O(()=>{Df=function(){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}return s(t,"t"),t}()}),Tf,sv=O(()=>{Tf=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return s(t,"t"),t}()});function Fu(t,e){var n=t;return n&&!en(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(t),e&&(!n||n==="{}")&&(Be(t.toString)?n=t.toString():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}s(Fu,"Ja");function Pf(t,e){var n=t;return t&&(n=t[zs]||t[Ou]||"",n&&!en(n)&&(n=Fu(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&(n||"").indexOf(e)===-1&&(n=e+": "+n),n||""}s(Pf,"Os");function cv(t){return gt(t)?"hasFullStack"in t&&"typeName"in t:!1}s(cv,"pl");function uv(t){return gt(t)?"ver"in t&&"exceptions"in t&&"properties"in t:!1}s(uv,"dl");function Rf(t){return t&&t.src&&en(t.src)&&t.obj&&vr(t.obj)}s(Rf,"Ls");function sa(t){var e=t||"";en(e)||(en(e[ri])?e=e[ri]:e=""+e);var n=e.split(`
`);return{src:e,obj:n}}s(sa,"Lr");function lv(t){for(var e=[],n=t.split(`
`),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),e.push(i)}return{src:t,obj:e}}s(lv,"gl");function Af(t){var e=null;if(t)try{if(t[ri])e=sa(t[ri]);else if(t[Fo]&&t[Fo][ri])e=sa(t[Fo][ri]);else if(t.exception&&t.exception[ri])e=sa(t.exception[ri]);else if(Rf(t))e=t;else if(Rf(t[$s]))e=t[$s];else if(window.opera&&t[zs])e=lv(t.message);else if(en(t))e=sa(t);else{var n=t[zs]||t[Ou]||"";en(t[Nu])&&(n&&(n+=`
`),n+=" from "+t[Nu]),n&&(e=sa(n))}}catch(r){e=sa(r)}return e||{src:"",obj:null}}s(Af,"Bs");function dv(t){var e="";return t&&(t.obj?vn(t.obj,function(n){e+=n+`
`}):e=t.src||""),e}s(dv,"vl");function fv(t){var e,n=t.obj;if(n&&n.length>0){e=[];var r=0,i=0;vn(n,function(C){var v=C.toString();if(js.regex.test(v)){var m=new js(v,r++);i+=m.sizeInBytes,e.push(m)}});var o=32*1024;if(i>o)for(var a=0,c=e.length-1,u=0,l=a,d=c;a<c;){var h=e[a].sizeInBytes,g=e[c].sizeInBytes;if(u+=h+g,u>o){var p=d-l+1;e.splice(l,p);break}l=a,d=c,a++,c--}}return e}s(fv,"ml");function Ws(t){var e="";if(t&&(e=t.typeName||t.name||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor.toString());e=r&&r.length>1?r[1]:""}catch(i){}return e}s(Ws,"xi");function Lu(t){if(t)try{if(!en(t)){var e=Ws(t),n=Fu(t,!1);return(!n||n==="{}")&&(t[Fo]&&(t=t[Fo],e=Ws(t)),n=Fu(t,!0)),n.indexOf(e)!==0&&e!=="String"?e+":"+n:n}}catch(r){}return""+(t||"")}s(Lu,"Ka");var kf,Fo,ri,$s,Nu,zs,Ou,Nr,Uu,js,hv=O(()=>{Bt(),ov(),av(),sv(),Ci(),wn(),Si(),kf="<no_method>",Fo="error",ri="stack",$s="stackDetails",Nu="errorSrc",zs="message",Ou="description",Nr=function(t){ee(e,t);function e(n,r,i,o,a,c){var u=t.call(this)||this;return u.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},uv(r)?(u.exceptions=r.exceptions,u.properties=r.properties,u.measurements=r.measurements,r.severityLevel&&(u.severityLevel=r.severityLevel),r.id&&(u.id=r.id),r.problemGroup&&(u.problemGroup=r.problemGroup),u.ver=2,E(r.isManual)||(u.isManual=r.isManual)):(i||(i={}),u.exceptions=[new Uu(n,r,i)],u.properties=fo(n,i),u.measurements=ho(n,o),a&&(u.severityLevel=a),c&&(u.id=c)),u}return s(e,"e"),e.CreateAutoException=function(n,r,i,o,a,c,u,l){var d=Ws(a||c||n);return{message:Pf(n,d),url:r,lineNumber:i,columnNumber:o,error:Lu(a||c||n),evt:Lu(c||n),typeName:d,stackDetails:Af(u||a||c),errorSrc:l}},e.CreateFromInterface=function(n,r,i,o){var a=r.exceptions&&Da(r.exceptions,function(u){return Uu.CreateFromInterface(n,u)}),c=new e(n,zt({},r,{exceptions:a}),i,o);return c},e.prototype.toInterface=function(){var n=this,r=n.exceptions,i=n.properties,o=n.measurements,a=n.severityLevel,c=n.ver,u=n.problemGroup,l=n.id,d=n.isManual,h=r instanceof Array&&Da(r,function(g){return g.toInterface()})||void 0;return{ver:"4.0",exceptions:h,severityLevel:a,properties:i,measurements:o,problemGroup:u,id:l,isManual:d}},e.CreateSimpleException=function(n,r,i,o,a,c){return{exceptions:[{hasFullStack:!0,message:n,stack:a,typeName:r}]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=Lu,e}(Df),Uu=function(t){ee(e,t);function e(n,r,i){var o=t.call(this)||this;if(o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},cv(r))o.typeName=r.typeName,o.message=r.message,o[ri]=r[ri],o.parsedStack=r.parsedStack,o.hasFullStack=r.hasFullStack;else{var a=r,c=a&&a.evt;jr(a)||(a=a[Fo]||c||a),o.typeName=Fr(n,Ws(a))||di,o.message=wu(n,Pf(r||a,o.typeName))||di;var u=r[$s]||Af(r);o.parsedStack=fv(u),o[ri]=Gd(n,dv(u)),o.hasFullStack=vr(o.parsedStack)&&o.parsedStack.length>0,i&&(i.typeName=i.typeName||o.typeName)}return o}return s(e,"e"),e.prototype.toInterface=function(){var n=this.parsedStack instanceof Array&&Da(this.parsedStack,function(i){return i.toInterface()}),r={id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[ri],parsedStack:n||void 0};return r},e.CreateFromInterface=function(n,r){var i=r.parsedStack instanceof Array&&Da(r.parsedStack,function(a){return js.CreateFromInterface(a)})||r.parsedStack,o=new e(n,zt({},r,{parsedStack:i}));return o},e}(Tf),js=function(t){ee(e,t);function e(n,r){var i=t.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},typeof n=="string"){var o=n;i.level=r,i.method=kf,i.assembly=mr(o),i.fileName="",i.line=0;var a=o.match(e.regex);a&&a.length>=5&&(i.method=mr(a[2])||i.method,i.fileName=mr(a[4]),i.line=parseInt(a[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=e.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return s(e,"e"),e.CreateFromInterface=function(n){return new e(n,null)},e.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(If)}),Mf,gv=O(()=>{Mf=function(){function t(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}return s(t,"t"),t}()}),Hu,pv=O(()=>{(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(Hu||(Hu={}))}),Ff,vv=O(()=>{pv(),Ff=function(){function t(){this.kind=Hu.Measurement}return s(t,"t"),t}()}),Lf,mv=O(()=>{Bt(),vv(),Lf=function(t){ee(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},n}return s(e,"e"),e}(Ff)}),Ni,yv=O(()=>{Bt(),gv(),Ci(),mv(),Si(),Ni=function(t){ee(e,t);function e(n,r,i,o,a,c,u,l){var d=t.call(this)||this;d.aiDataContract={ver:1,metrics:1,properties:0};var h=new Lf;return h.count=o>0?o:void 0,h.max=isNaN(c)||c===null?void 0:c,h.min=isNaN(a)||a===null?void 0:a,h.name=Fr(n,r)||di,h.value=i,d.metrics=[h],d.properties=fo(n,u),d.measurements=ho(n,l),d}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(Mf)}),Vs,Bu=O(()=>{Bt(),xf(),Vs=function(t){ee(e,t);function e(){var n=t.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return s(e,"e"),e}(Mu)}),Ei,wv=O(()=>{Bt(),Bu(),Ci(),Fs(),Si(),Ei=function(t){ee(e,t);function e(n,r,i,o,a,c,u){var l=t.call(this)||this;return l.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},l.id=Qd(n,u),l.url=Na(n,i),l.name=Fr(n,r)||di,isNaN(o)||(l.duration=Ji(o)),l.properties=fo(n,a),l.measurements=ho(n,c),l}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(Vs)}),Nf,Cv=O(()=>{Nf=function(){function t(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}return s(t,"t"),t}()}),Oi,Sv=O(()=>{Bt(),Ci(),mf(),Cv(),Fs(),Oi=function(t){ee(e,t);function e(n,r,i,o,a,c,u,l,d,h,g,p){d===void 0&&(d="Ajax");var C=t.call(this)||this;C.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},C.id=r,C.duration=Ji(a),C.success=c,C.resultCode=u+"",C.type=Fr(n,d);var v=ev(n,i,l,o);return C.data=Na(n,o)||v.data,C.target=Fr(n,v.target),h&&(C.target=C.target+" | "+h),C.name=Fr(n,v.name),C.properties=fo(n,g),C.measurements=ho(n,p),C}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(Nf)}),Of,bv=O(()=>{Of=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return s(t,"t"),t}()}),Yi,_v=O(()=>{Bt(),bv(),Ci(),Si(),Yi=function(t){ee(e,t);function e(n,r,i,o,a){var c=t.call(this)||this;return c.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},r=r||di,c.message=wu(n,r),c.properties=fo(n,o),c.measurements=ho(n,a),i&&(c.severityLevel=i),c}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(Of)}),Uf,Ev=O(()=>{Bt(),Bu(),Uf=function(t){ee(e,t);function e(){var n=t.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return s(e,"e"),e}(Vs)}),Zi,xv=O(()=>{Bt(),Ev(),Ci(),Si(),Zi=function(t){ee(e,t);function e(n,r,i,o,a,c,u){var l=t.call(this)||this;return l.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},l.url=Na(n,i),l.name=Fr(n,r)||di,l.properties=fo(n,a),l.measurements=ho(n,c),u&&(l.domProcessing=u.domProcessing,l.duration=u.duration,l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l.receivedResponse=u.receivedResponse,l.sentRequest=u.sentRequest),l}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(Uf)}),eo,Iv=O(()=>{Bt(),_f(),eo=function(t){ee(e,t);function e(n,r){var i=t.call(this)||this;return i.aiDataContract={baseType:1,baseData:1},i.baseType=n,i.baseData=r,i}return s(e,"e"),e}(Au)}),Ha,Dv=O(()=>{(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Ha||(Ha={}))}),Hf,Tv=O(()=>{wn(),Hf=function(){function t(){}return s(t,"t"),t.getConfig=function(e,n,r,i){i===void 0&&(i=!1);var o;return r&&e.extensionConfig&&e.extensionConfig[r]&&!E(e.extensionConfig[r][n])?o=e.extensionConfig[r][n]:o=e[n],E(o)?i:o},t}()});function mo(t){var e="ai."+t+".";return function(n){return e+n}}s(mo,"tr");var ca,rr,Ba,Lo,qs,to,yo,ua,Ks,Bf=O(()=>{Bt(),wn(),ca=mo("application"),rr=mo("device"),Ba=mo("location"),Lo=mo("operation"),qs=mo("session"),to=mo("user"),yo=mo("cloud"),ua=mo("internal"),Ks=function(t){ee(e,t);function e(){return t.call(this)||this}return s(e,"e"),e}(_p({applicationVersion:ca("ver"),applicationBuild:ca("build"),applicationTypeId:ca("typeId"),applicationId:ca("applicationId"),applicationLayer:ca("layer"),deviceId:rr("id"),deviceIp:rr("ip"),deviceLanguage:rr("language"),deviceLocale:rr("locale"),deviceModel:rr("model"),deviceFriendlyName:rr("friendlyName"),deviceNetwork:rr("network"),deviceNetworkName:rr("networkName"),deviceOEMName:rr("oemName"),deviceOS:rr("os"),deviceOSVersion:rr("osVersion"),deviceRoleInstance:rr("roleInstance"),deviceRoleName:rr("roleName"),deviceScreenResolution:rr("screenResolution"),deviceType:rr("type"),deviceMachineName:rr("machineName"),deviceVMName:rr("vmName"),deviceBrowser:rr("browser"),deviceBrowserVersion:rr("browserVersion"),locationIp:Ba("ip"),locationCountry:Ba("country"),locationProvince:Ba("province"),locationCity:Ba("city"),operationId:Lo("id"),operationName:Lo("name"),operationParentId:Lo("parentId"),operationRootId:Lo("rootId"),operationSyntheticSource:Lo("syntheticSource"),operationCorrelationVector:Lo("correlationVector"),sessionId:qs("id"),sessionIsFirst:qs("isFirst"),sessionIsNew:qs("isNew"),userAccountAcquisitionDate:to("accountAcquisitionDate"),userAccountId:to("accountId"),userAgent:to("userAgent"),userId:to("id"),userStoreRegion:to("storeRegion"),userAuthUserId:to("authUserId"),userAnonymousUserAcquisitionDate:to("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:to("authUserAcquisitionDate"),cloudName:yo("name"),cloudRole:yo("role"),cloudRoleVer:yo("roleVer"),cloudRoleInstance:yo("roleInstance"),cloudEnvironment:yo("environment"),cloudLocation:yo("location"),cloudDeploymentUnit:yo("deploymentUnit"),internalNodeName:ua("nodeName"),internalSdkVersion:ua("sdkVersion"),internalAgentVersion:ua("agentVersion"),internalSnippet:ua("snippet"),internalSdkSrc:ua("sdkSrc")}))}),Ui,Pv=O(()=>{Ci(),wn(),Si(),Ui=function(){function t(){}return s(t,"t"),t.create=function(e,n,r,i,o,a){if(r=Fr(i,r)||di,E(e)||E(n)||E(r))throw Error("Input doesn't contain all required fields");var c={name:r,time:ni(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:n,baseData:e};return E(o)||fn(o,function(u,l){c.data[u]=l}),c},t}()}),Or,Wn,Rv=O(()=>{Bf(),Or={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Wn=new Ks}),la,Gs,Wu,dr=O(()=>{mf(),tv(),qd(),Si(),_f(),bf(),rv(),iv(),hv(),yv(),wv(),Bu(),Sv(),_v(),xv(),Iv(),Dv(),Tv(),Bf(),Ci(),Pv(),Rv(),tf(),Fs(),Yd(),cf(),hf(),la="AppInsightsPropertiesPlugin",Gs="AppInsightsChannelPlugin",Wu="ApplicationInsightsAnalytics"}),Wf,Av=O(()=>{dr(),wn(),ht(),Wf=function(){function t(e,n,r,i){xn(t,this,function(o){var a=null,c=[],u=!1,l;r&&(l=r.logger);function d(){r&&vn(r.getTransmissionControls(),function(g){vn(g,function(p){return p.flush(!0)})})}s(d,"l");function h(g){c.push(g),a||(a=setInterval(function(){var p=c.slice(0),C=!1;c=[],vn(p,function(v){v()?C=!0:c.push(v)}),c.length===0&&(clearInterval(a),a=null),C&&d()},100))}s(h,"f"),o.trackPageView=function(g,p){var C=g.name;if(E(C)||typeof C!="string"){var v=Mi();C=g.name=v&&v.title||""}var m=g.uri;if(E(m)||typeof m!="string"){var b=Io();m=g.uri=b&&b.href||""}if(!i.isPerformanceTimingSupported()){e.sendPageViewInternal(g,p),d(),l.throwInternal(fe.WARNING,Y.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var w=!1,P,F=i.getPerformanceTiming().navigationStart;F>0&&(P=Lr(F,+new Date),i.shouldCollectDuration(P)||(P=void 0));var R;!E(p)&&!E(p.duration)&&(R=p.duration),(n||!isNaN(R))&&(isNaN(R)&&(p||(p={}),p.duration=P),e.sendPageViewInternal(g,p),d(),w=!0);var te=6e4;p||(p={}),h(function(){var ze=!1;try{if(i.isPerformanceTimingDataReady()){ze=!0;var ge={name:C,uri:m};i.populatePageViewPerformanceEvent(ge),!ge.isValid&&!w?(p.duration=P,e.sendPageViewInternal(g,p)):(w||(p.duration=ge.durationMs,e.sendPageViewInternal(g,p)),u||(e.sendPageViewPerformanceInternal(ge,p),u=!0))}else F>0&&Lr(F,+new Date)>te&&(ze=!0,w||(p.duration=te,e.sendPageViewInternal(g,p)))}catch(Et){l.throwInternal(fe.CRITICAL,Y.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+An(Et),{exception:hn(Et)})}return ze})}})}return s(t,"t"),t}()}),$f,zf,kv=O(()=>{dr(),wn(),$f=function(){function t(e,n){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=n,this._logger=e}return s(t,"t"),t.prototype.trackPreviousPageVisit=function(e,n){try{var r=this.restartPageVisitTimer(e,n);r&&this.pageVisitTimeTrackingHandler(r.pageName,r.pageUrl,r.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+hn(i))}},t.prototype.restartPageVisitTimer=function(e,n){try{var r=this.stopPageVisitTimer();return this.startPageVisitTimer(e,n),r}catch(i){return this._logger.warnToConsole("Call to restart failed: "+hn(i)),null}},t.prototype.startPageVisitTimer=function(e,n){try{if(aa()){Us(this._logger,this.prevPageVisitDataKeyName)!=null&&ki("Cannot call startPageVisit consecutively without first calling stopPageVisit");var r=new zf(e,n),i=wi().stringify(r);Hs(this._logger,this.prevPageVisitDataKeyName,i)}}catch(o){this._logger.warnToConsole("Call to start failed: "+hn(o))}},t.prototype.stopPageVisitTimer=function(){try{if(aa()){var e=ui(),n=Us(this._logger,this.prevPageVisitDataKeyName);if(n&&Qo()){var r=wi().parse(n);return r.pageVisitTime=e-r.pageVisitStartTime,sf(this._logger,this.prevPageVisitDataKeyName),r}else return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+hn(i)),null}},t}(),zf=function(){function t(e,n){this.pageVisitStartTime=ui(),this.pageName=e,this.pageUrl=n}return s(t,"t"),t}()}),jf,Mv=O(()=>{dr(),wn(),jf=function(){function t(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return s(t,"t"),t.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var n=this.getPerformanceNavigationTiming(),r=this.getPerformanceTiming(),i=0,o=0,a=0,c=0,u=0;(n||r)&&(n?(i=n.duration,o=n.startTime===0?n.connectEnd:Lr(n.startTime,n.connectEnd),a=Lr(n.requestStart,n.responseStart),c=Lr(n.responseStart,n.responseEnd),u=Lr(n.responseEnd,n.loadEventEnd)):(i=Lr(r.navigationStart,r.loadEventEnd),o=Lr(r.navigationStart,r.connectEnd),a=Lr(r.requestStart,r.responseStart),c=Lr(r.responseStart,r.responseEnd),u=Lr(r.responseEnd,r.loadEventEnd)),i===0?this._logger.throwInternal(fe.WARNING,Y.ErrorPVCalc,"error calculating page view performance.",{total:i,network:o,request:a,response:c,dom:u}):this.shouldCollectDuration(i,o,a,c,u)?i<Math.floor(o)+Math.floor(a)+Math.floor(c)+Math.floor(u)?this._logger.throwInternal(fe.WARNING,Y.ClientPerformanceMathError,"client performance math error.",{total:i,network:o,request:a,response:c,dom:u}):(e.durationMs=i,e.perfTotal=e.duration=Ji(i),e.networkConnect=Ji(o),e.sentRequest=Ji(a),e.receivedResponse=Ji(c),e.domProcessing=Ji(u),e.isValid=!0):this._logger.throwInternal(fe.WARNING,Y.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:o,request:a,response:c,dom:u}))},t.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Gi().timing:null},t.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Gi().getEntriesByType("navigation")[0]:null},t.prototype.isPerformanceNavigationTimingSupported=function(){var e=Gi();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},t.prototype.isPerformanceTimingSupported=function(){var e=Gi();return e&&e.timing},t.prototype.isPerformanceTimingDataReady=function(){var e=Gi(),n=e?e.timing:0;return n&&n.domainLookupStart>0&&n.navigationStart>0&&n.responseStart>0&&n.requestStart>0&&n.loadEventEnd>0&&n.responseEnd>0&&n.connectEnd>0&&n.domLoading>0},t.prototype.shouldCollectDuration=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Fi()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],o=r.userAgent,a=!1;if(o)for(var c=0;c<i.length;c++)a=a||o.toLowerCase().indexOf(i[c])!==-1;if(a)return!1;for(var c=0;c<e.length;c++)if(e[c]<0||e[c]>=this.MAX_DURATION_ALLOWED)return!1;return!0},t}()});function Wa(t,e){t&&t.dispatchEvent&&e&&t.dispatchEvent(e)}s(Wa,"Pn");var $u,Qs,zu,ju,Fv=O(()=>{Bt(),dr(),wn(),Av(),kv(),Mv(),ht(),$u="duration",Qs="event",zu=function(t){ee(e,t);function e(){var n=t.call(this)||this;n.identifier=Wu,n.priority=180,n.autoRoutePVDelay=500;var r,i,o,a=0,c,u;return xn(e,n,function(l,d){var h=Io(!0);c=h&&h.href||"",l.getCookieMgr=function(){return Yc(l.core)},l.processTelemetry=function(m,b){Jo(l.core,function(){return l.identifier+":processTelemetry"},function(){var w=!1,P=l._telemetryInitializers.length;b=l._getTelCtx(b);for(var F=0;F<P;++F){var R=l._telemetryInitializers[F];if(R)try{if(R.apply(null,[m])===!1){w=!0;break}}catch(te){b.diagLog().throwInternal(fe.CRITICAL,Y.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+An(te),{exception:hn(te)},!0)}}w||l.processNext(m,b)},function(){return{item:m}},!m.sync)},l.trackEvent=function(m,b){try{var w=Ui.create(m,_i.dataType,_i.envelopeType,l.diagLog(),b);l.core.track(w)}catch(P){l.diagLog().throwInternal(fe.WARNING,Y.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+An(P),{exception:hn(P)})}},l.startTrackEvent=function(m){try{r.start(m)}catch(b){l.diagLog().throwInternal(fe.CRITICAL,Y.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+An(b),{exception:hn(b)})}},l.stopTrackEvent=function(m,b,w){try{r.stop(m,void 0,b)}catch(P){l.diagLog().throwInternal(fe.CRITICAL,Y.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+An(P),{exception:hn(P)})}},l.trackTrace=function(m,b){try{var w=Ui.create(m,Yi.dataType,Yi.envelopeType,l.diagLog(),b);l.core.track(w)}catch(P){l.diagLog().throwInternal(fe.WARNING,Y.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+An(P),{exception:hn(P)})}},l.trackMetric=function(m,b){try{var w=Ui.create(m,Ni.dataType,Ni.envelopeType,l.diagLog(),b);l.core.track(w)}catch(P){l.diagLog().throwInternal(fe.CRITICAL,Y.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+An(P),{exception:hn(P)})}},l.trackPageView=function(m,b){try{var w=m||{};l._pageViewManager.trackPageView(w,zt({},w.properties,w.measurements,b)),l.config.autoTrackPageVisitTime&&l._pageVisitTimeManager.trackPreviousPageVisit(w.name,w.uri)}catch(P){l.diagLog().throwInternal(fe.CRITICAL,Y.TrackPVFailed,"trackPageView failed, page view will not be collected: "+An(P),{exception:hn(P)})}},l.sendPageViewInternal=function(m,b,w){var P=Mi();P&&(m.refUri=m.refUri===void 0?P.referrer:m.refUri);var F=Ui.create(m,Ei.dataType,Ei.envelopeType,l.diagLog(),b,w);l.core.track(F),a=0},l.sendPageViewPerformanceInternal=function(m,b,w){var P=Ui.create(m,Zi.dataType,Zi.envelopeType,l.diagLog(),b,w);l.core.track(P)},l.trackPageViewPerformance=function(m,b){try{l._pageViewPerformanceManager.populatePageViewPerformanceEvent(m),l.sendPageViewPerformanceInternal(m,b)}catch(w){l.diagLog().throwInternal(fe.CRITICAL,Y.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+An(w),{exception:hn(w)})}},l.startTrackPage=function(m){try{if(typeof m!="string"){var b=Mi();m=b&&b.title||""}i.start(m)}catch(w){l.diagLog().throwInternal(fe.CRITICAL,Y.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+An(w),{exception:hn(w)})}},l.stopTrackPage=function(m,b,w,P){try{if(typeof m!="string"){var F=Mi();m=F&&F.title||""}if(typeof b!="string"){var R=Io();b=R&&R.href||""}i.stop(m,b,w,P),l.config.autoTrackPageVisitTime&&l._pageVisitTimeManager.trackPreviousPageVisit(m,b)}catch(te){l.diagLog().throwInternal(fe.CRITICAL,Y.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+An(te),{exception:hn(te)})}},l.sendExceptionInternal=function(m,b,w){var P=m.exception||m.error||new Error(di),F=new Nr(l.diagLog(),P,m.properties||b,m.measurements,m.severityLevel,m.id).toInterface(),R=Ui.create(F,Nr.dataType,Nr.envelopeType,l.diagLog(),b,w);l.core.track(R)},l.trackException=function(m,b){try{l.sendExceptionInternal(m,b)}catch(w){l.diagLog().throwInternal(fe.CRITICAL,Y.TrackExceptionFailed,"trackException failed, exception will not be collected: "+An(w),{exception:hn(w)})}},l._onerror=function(m){var b=m&&m.error,w=m&&m.evt;try{if(!w){var P=Ta();P&&(w=P[Qs])}var F=m&&m.url||(Mi()||{}).URL,R=m.errorSrc||"window.onerror@"+F+":"+(m.lineNumber||0)+":"+(m.columnNumber||0),te={errorSrc:R,url:F,lineNumber:m.lineNumber||0,columnNumber:m.columnNumber||0,message:m.message};ef(m.message,m.url,m.lineNumber,m.columnNumber,m.error)?v(Nr.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",F,m.lineNumber||0,m.columnNumber||0,b,w,null,R),te):(m.errorSrc||(m.errorSrc=R),l.trackException({exception:m,severityLevel:Ha.Error},te))}catch(ge){var ze=b?b.name+", "+b.message:"null";l.diagLog().throwInternal(fe.CRITICAL,Y.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+An(ge),{exception:hn(ge),errorString:ze})}},l.addTelemetryInitializer=function(m){l._telemetryInitializers.push(m)},l.initialize=function(m,b,w,P){if(!l.isInitialized()){if(E(b))throw Error("Error initializing");d.initialize(m,b,w,P),l.setInitialized(!1);var F=l._getTelCtx(),R=l.identifier;l.config=F.getExtCfg(R);var te=e.getDefaultConfig(m);te!==void 0&&fn(te,function(pt,Mt){l.config[pt]=F.getConfig(R,pt,Mt),l.config[pt]===void 0&&(l.config[pt]=Mt)}),l.config.isStorageUseDisabled&&nf();var ze={instrumentationKey:function(){return m.instrumentationKey},accountId:function(){return l.config.accountId||m.accountId},sessionRenewalMs:function(){return l.config.sessionRenewalMs||m.sessionRenewalMs},sessionExpirationMs:function(){return l.config.sessionExpirationMs||m.sessionExpirationMs},sampleRate:function(){return l.config.samplingPercentage||m.samplingPercentage},sdkExtension:function(){return l.config.sdkExtension||m.sdkExtension},isBrowserLinkTrackingEnabled:function(){return l.config.isBrowserLinkTrackingEnabled||m.isBrowserLinkTrackingEnabled},appId:function(){return l.config.appId||m.appId}};l._pageViewPerformanceManager=new jf(l.core),l._pageViewManager=new Wf(n,l.config.overridePageViewDuration,l.core,l._pageViewPerformanceManager),l._pageVisitTimeManager=new $f(l.diagLog(),function(pt,Mt,jt){return g(pt,Mt,jt)}),l._telemetryInitializers=l._telemetryInitializers||[],p(ze),r=new ju(l.diagLog(),"trackEvent"),r.action=function(pt,Mt,jt,an){an||(an={}),an[$u]=jt.toString(),l.trackEvent({name:pt,properties:an})},i=new ju(l.diagLog(),"trackPageView"),i.action=function(pt,Mt,jt,an,Cn){E(an)&&(an={}),an[$u]=jt.toString();var Hn={name:pt,uri:Mt,properties:an,measurements:Cn};l.sendPageViewInternal(Hn,an)};var ge=Ta(),Et=Tp(),kt=Io(!0),Rt=n;if(l.config.disableExceptionTracking===!1&&!l.config.autoExceptionInstrumented&&ge){var st="onerror",kn=ge[st];ge.onerror=function(pt,Mt,jt,an,Cn){var Hn=ge[Qs],hi=kn&&kn(pt,Mt,jt,an,Cn);return hi!==!0&&Rt._onerror(Nr.CreateAutoException(pt,Mt,jt,an,Cn,Hn)),hi},l.config.autoExceptionInstrumented=!0}if(l.config.disableExceptionTracking===!1&&l.config.enableUnhandledPromiseRejectionTracking===!0&&!l.config.autoUnhandledPromiseInstrumented&&ge){var q="onunhandledrejection",Xe=ge[q];ge[q]=function(pt){var Mt=ge[Qs],jt=Xe&&Xe.call(ge,pt);return jt!==!0&&Rt._onerror(Nr.CreateAutoException(pt.reason.toString(),kt?kt.href:"",0,0,pt,Mt)),jt},l.config.autoUnhandledPromiseInstrumented=!0}if(l.config.enableAutoRouteTracking===!0&&Et&&Be(Et.pushState)&&Be(Et.replaceState)&&ge&&typeof Event!="undefined"){var vt=n;vn(w,function(pt){pt.identifier===la&&(o=pt)}),Et.pushState=function(pt){return function(){var Mt=pt.apply(this,arguments);return Wa(ge,ia(vt.config.namePrefix+"pushState")),Wa(ge,ia(vt.config.namePrefix+"locationchange")),Mt}}(Et.pushState),Et.replaceState=function(pt){return function(){var Mt=pt.apply(this,arguments);return Wa(ge,ia(vt.config.namePrefix+"replaceState")),Wa(ge,ia(vt.config.namePrefix+"locationchange")),Mt}}(Et.replaceState),ge.addEventListener&&(ge.addEventListener(vt.config.namePrefix+"popstate",function(){Wa(ge,ia(vt.config.namePrefix+"locationchange"))}),ge.addEventListener(vt.config.namePrefix+"locationchange",function(){if(o&&o.context&&o.context.telemetryTrace){o.context.telemetryTrace.traceID=Li();var pt="_unknown_";kt&&kt.pathname&&(pt=kt.pathname+(kt.hash||"")),o.context.telemetryTrace.name=pt}u&&(c=u),u=kt&&kt.href||"",setTimeout(function(Mt){vt.trackPageView({refUri:Mt,properties:{duration:0}})}.bind(n,c),vt.autoRoutePVDelay)}))}l.setInitialized(!0)}};function g(m,b,w){var P={PageName:m,PageUrl:b};l.trackMetric({name:"PageVisitTime",average:w,max:w,min:w,sampleCount:1},P)}s(g,"g");function p(m){if(!m.isBrowserLinkTrackingEnabled()){var b=["/browserLinkSignalR/","/__browserLink/"],w=s(function(P){if(P.baseType===Oi.dataType){var F=P.baseData;if(F){for(var R=0;R<b.length;R++)if(F.target&&F.target.indexOf(b[R])>=0)return!1}}return!0},"y");C(w)}}s(p,"C");function C(m){l._telemetryInitializers.push(m)}s(C,"E");function v(m,b){var w=Ui.create(m,Nr.dataType,Nr.envelopeType,l.diagLog(),b);l.core.track(w)}s(v,"b")}),n}return s(e,"e"),e.getDefaultConfig=function(n){return n||(n={}),n.sessionRenewalMs=30*60*1e3,n.sessionExpirationMs=24*60*60*1e3,n.disableExceptionTracking=Un(n.disableExceptionTracking),n.autoTrackPageVisitTime=Un(n.autoTrackPageVisitTime),n.overridePageViewDuration=Un(n.overridePageViewDuration),n.enableUnhandledPromiseRejectionTracking=Un(n.enableUnhandledPromiseRejectionTracking),(isNaN(n.samplingPercentage)||n.samplingPercentage<=0||n.samplingPercentage>=100)&&(n.samplingPercentage=100),n.isStorageUseDisabled=Un(n.isStorageUseDisabled),n.isBrowserLinkTrackingEnabled=Un(n.isBrowserLinkTrackingEnabled),n.enableAutoRouteTracking=Un(n.enableAutoRouteTracking),n.namePrefix=n.namePrefix||"",n.enableDebug=Un(n.enableDebug),n.disableFlushOnBeforeUnload=Un(n.disableFlushOnBeforeUnload),n.disableFlushOnUnload=Un(n.disableFlushOnUnload,n.disableFlushOnBeforeUnload),n},e.Version="2.6.4",e}(Po),ju=function(){function t(e,n){var r=this,i={};r.start=function(o){typeof i[o]!="undefined"&&e.throwInternal(fe.WARNING,Y.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),i[o]=+new Date},r.stop=function(o,a,c,u){var l=i[o];if(isNaN(l))e.throwInternal(fe.WARNING,Y.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:o,key:o},!0);else{var d=+new Date,h=Lr(l,d);r.action(o,a,h,c,u)}delete i[o],i[o]=void 0}}return s(t,"t"),t}()}),Vf=O(()=>{Fv()}),qf,Kf,Lv=O(()=>{dr(),wn(),ht(),qf=function(){function t(e){var n=[];xn(t,this,function(r){r.enqueue=function(i){n.push(i)},r.count=function(){return n.length},r.clear=function(){n.length=0},r.getItems=function(){return n.slice(0)},r.batchPayloads=function(i){if(i&&i.length>0){var o=e.emitLineDelimitedJson()?i.join(`
`):"["+i.join(",")+"]";return o}return null},r.markAsSent=function(i){r.clear()},r.clearSent=function(i){}})}return s(t,"t"),t}(),Kf=function(){function t(e,n){var r=!1,i;xn(t,this,function(o){var a=l(t.BUFFER_KEY),c=l(t.SENT_BUFFER_KEY);i=a.concat(c),i.length>t.MAX_BUFFER_SIZE&&(i.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,[]),d(t.BUFFER_KEY,i),o.enqueue=function(h){if(i.length>=t.MAX_BUFFER_SIZE){r||(e.throwInternal(fe.WARNING,Y.SessionStorageBufferFull,"Maximum buffer size reached: "+i.length,!0),r=!0);return}i.push(h),d(t.BUFFER_KEY,i)},o.count=function(){return i.length},o.clear=function(){i=[],d(t.BUFFER_KEY,[]),d(t.SENT_BUFFER_KEY,[]),r=!1},o.getItems=function(){return i.slice(0)},o.batchPayloads=function(h){if(h&&h.length>0){var g=n.emitLineDelimitedJson()?h.join(`
`):"["+h.join(",")+"]";return g}return null},o.markAsSent=function(h){i=u(h,i),d(t.BUFFER_KEY,i);var g=l(t.SENT_BUFFER_KEY);g instanceof Array&&h instanceof Array&&(g=g.concat(h),g.length>t.MAX_BUFFER_SIZE&&(e.throwInternal(fe.CRITICAL,Y.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+g.length,!0),g.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,g))},o.clearSent=function(h){var g=l(t.SENT_BUFFER_KEY);g=u(h,g),d(t.SENT_BUFFER_KEY,g)};function u(h,g){var p=[];return vn(g,function(C){!Be(C)&&Ia(h,C)===-1&&p.push(C)}),p}s(u,"s");function l(h){var g=h;try{g=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+g:g;var p=Us(e,g);if(p){var C=wi().parse(p);if(en(C)&&(C=wi().parse(C)),C&&vr(C))return C}}catch(v){e.throwInternal(fe.CRITICAL,Y.FailedToRestoreStorageBuffer," storage key: "+g+", "+An(v),{exception:hn(v)})}return[]}s(l,"c");function d(h,g){var p=h;try{p=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+p:p;var C=JSON.stringify(g);Hs(e,p,C)}catch(v){Hs(e,p,JSON.stringify([])),e.throwInternal(fe.WARNING,Y.FailedToSetStorageBuffer," storage key: "+p+", "+An(v)+". Buffer cleared",{exception:hn(v)})}}s(d,"l")})}return s(t,"t"),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}()});function ir(t,e,n){return _n(t,e,n,kc)}s(ir,"xe");var Xs,Kn,fr,Vu,Yn,Gf,qu,Qf,Xf,Jf,Yf,Zf,Nv=O(()=>{Bt(),dr(),wn(),Xs="baseType",Kn="baseData",fr="properties",Vu="true",Yn=function(){function t(){}return s(t,"t"),t.extractPropsAndMeasurements=function(e,n,r){E(e)||fn(e,function(i,o){Ko(o)?r[i]=o:en(o)?n[i]=o:Qo()&&(n[i]=wi().stringify(o))})},t.createEnvelope=function(e,n,r,i){var o=new ku(e,i,n);ir(o,"sampleRate",r[Ls]),(r[Kn]||{}).startTime&&(o.time=ni(r[Kn].startTime)),o.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),t.extractPartAExtensions(r,o),r.tags=r.tags||[],td(o)},t.extractPartAExtensions=function(e,n){var r=n.tags=n.tags||{},i=e.ext=e.ext||{},o=e.tags=e.tags||[],a=i.user;a&&(ir(r,Wn.userAuthUserId,a.authId),ir(r,Wn.userId,a.id||a.localId));var c=i.app;c&&ir(r,Wn.sessionId,c.sesId);var u=i.device;u&&(ir(r,Wn.deviceId,u.id||u.localId),ir(r,Wn.deviceType,u.deviceClass),ir(r,Wn.deviceIp,u.ip),ir(r,Wn.deviceModel,u.model),ir(r,Wn.deviceType,u.deviceType));var l=e.ext.web;if(l){ir(r,Wn.deviceLanguage,l.browserLang),ir(r,Wn.deviceBrowserVersion,l.browserVer),ir(r,Wn.deviceBrowser,l.browser);var d=n.data=n.data||{},h=d[Kn]=d[Kn]||{},g=h[fr]=h[fr]||{};ir(g,"domain",l.domain),ir(g,"isManual",l.isManual?Vu:null),ir(g,"screenRes",l.screenRes),ir(g,"userConsent",l.userConsent?Vu:null)}var p=i.os;p&&ir(r,Wn.deviceOS,p.name);var C=i.trace;C&&(ir(r,Wn.operationParentId,C.parentID),ir(r,Wn.operationName,C.name),ir(r,Wn.operationId,C.traceID));for(var v={},m=o.length-1;m>=0;m--){var b=o[m];fn(b,function(P,F){v[P]=F}),o.splice(m,1)}fn(o,function(P,F){v[P]=F});var w=zt({},r,v);w[Wn.internalSdkVersion]||(w[Wn.internalSdkVersion]="javascript:"+t.Version),n.tags=td(w)},t.prototype.Init=function(e,n){this._logger=e,E(n[Kn])&&this._logger.throwInternal(fe.CRITICAL,Y.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},t.Version="2.6.4",t}(),Gf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].measurements||{},o=r[Kn][fr]||{};Yn.extractPropsAndMeasurements(r.data,o,i);var a=r[Kn];if(E(a))return n.warnToConsole("Invalid input for dependency data"),null;var c=a[fr]&&a[fr][Ns]?a[fr][Ns]:"GET",u=new Oi(n,a.id,a.target,a.name,a.duration,a.success,a.responseCode,c,a.type,a.correlationContext,o,i),l=new eo(Oi.dataType,u);return Yn.createEnvelope(n,Oi.envelopeType,r,l)},e.DependencyEnvelopeCreator=new e,e}(Yn),qu=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i={},o={};r[Xs]!==_i.dataType&&(i.baseTypeSource=r[Xs]),r[Xs]===_i.dataType?(i=r[Kn][fr]||{},o=r[Kn].measurements||{}):r[Kn]&&Yn.extractPropsAndMeasurements(r[Kn],i,o),Yn.extractPropsAndMeasurements(r.data,i,o);var a=r[Kn].name,c=new _i(n,a,i,o),u=new eo(_i.dataType,c);return Yn.createEnvelope(n,_i.envelopeType,r,u)},e.EventEnvelopeCreator=new e,e}(Yn),Qf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].measurements||{},o=r[Kn][fr]||{};Yn.extractPropsAndMeasurements(r.data,o,i);var a=r[Kn],c=Nr.CreateFromInterface(n,a,o,i),u=new eo(Nr.dataType,c);return Yn.createEnvelope(n,Nr.envelopeType,r,u)},e.ExceptionEnvelopeCreator=new e,e}(Yn),Xf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn],o=i[fr]||{},a=i.measurements||{};Yn.extractPropsAndMeasurements(r.data,o,a);var c=new Ni(n,i.name,i.average,i.sampleCount,i.min,i.max,o,a),u=new eo(Ni.dataType,c);return Yn.createEnvelope(n,Ni.envelopeType,r,u)},e.MetricEnvelopeCreator=new e,e}(Yn),Jf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i="duration",o,a=r[Kn];!E(a)&&!E(a[fr])&&!E(a[fr][i])?(o=a[fr][i],delete a[fr][i]):!E(r.data)&&!E(r.data[i])&&(o=r.data[i],delete r.data[i]);var c=r[Kn],u;((r.ext||{}).trace||{}).traceID&&(u=r.ext.trace.traceID);var l=c.id||u,d=c.name,h=c.uri,g=c[fr]||{},p=c.measurements||{};if(E(c.refUri)||(g.refUri=c.refUri),E(c.pageType)||(g.pageType=c.pageType),E(c.isLoggedIn)||(g.isLoggedIn=c.isLoggedIn.toString()),!E(c[fr])){var C=c[fr];fn(C,function(b,w){g[b]=w})}Yn.extractPropsAndMeasurements(r.data,g,p);var v=new Ei(n,d,h,o,g,p,l),m=new eo(Ei.dataType,v);return Yn.createEnvelope(n,Ei.envelopeType,r,m)},e.PageViewEnvelopeCreator=new e,e}(Yn),Yf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn],o=i.name,a=i.uri||i.url,c=i[fr]||{},u=i.measurements||{};Yn.extractPropsAndMeasurements(r.data,c,u);var l=new Zi(n,o,a,void 0,c,u,i),d=new eo(Zi.dataType,l);return Yn.createEnvelope(n,Zi.envelopeType,r,d)},e.PageViewPerformanceEnvelopeCreator=new e,e}(Yn),Zf=function(t){ee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].message,o=r[Kn].severityLevel,a=r[Kn][fr]||{},c=r[Kn].measurements||{};Yn.extractPropsAndMeasurements(r.data,a,c);var u=new Yi(n,i,o,a,c),l=new eo(Yi.dataType,u);return Yn.createEnvelope(n,Yi.envelopeType,r,l)},e.TraceEnvelopeCreator=new e,e}(Yn)}),eh,Ov=O(()=>{wn(),ht(),eh=function(){function t(e){xn(t,this,function(n){n.serialize=function(a){var c=r(a,"root");try{return wi().stringify(c)}catch(u){e.throwInternal(fe.CRITICAL,Y.CannotSerializeObject,u&&Be(u.toString)?u.toString():"Error serializing object",null,!0)}};function r(a,c){var u="__aiCircularRefCheck",l={};if(!a)return e.throwInternal(fe.CRITICAL,Y.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:c},!0),l;if(a[u])return e.throwInternal(fe.WARNING,Y.CircularReferenceDetected,"Circular reference detected while serializing object",{name:c},!0),l;if(!a.aiDataContract){if(c==="measurements")l=o(a,"number",c);else if(c==="properties")l=o(a,"string",c);else if(c==="tags")l=o(a,"string",c);else if(vr(a))l=i(a,c);else{e.throwInternal(fe.WARNING,Y.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:c},!0);try{wi().stringify(a),l=a}catch(d){e.throwInternal(fe.CRITICAL,Y.CannotSerializeObject,d&&Be(d.toString)?d.toString():"Error serializing object",null,!0)}}return l}return a[u]=!0,fn(a.aiDataContract,function(d,h){var g=Be(h)?h()&1:h&1,p=Be(h)?h()&4:h&4,C=h&2,v=a[d]!==void 0,m=gt(a[d])&&a[d]!==null;if(g&&!v&&!C)e.throwInternal(fe.CRITICAL,Y.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:d,name:c});else if(!p){var b=void 0;m?C?b=i(a[d],d):b=r(a[d],d):b=a[d],b!==void 0&&(l[d]=b)}}),delete a[u],l}s(r,"n");function i(a,c){var u;if(a)if(!vr(a))e.throwInternal(fe.CRITICAL,Y.ItemNotInArray,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:c},!0);else{u=[];for(var l=0;l<a.length;l++){var d=a[l],h=r(d,c+"["+l+"]");u.push(h)}}return u}s(i,"i");function o(a,c,u){var l;return a&&(l={},fn(a,function(d,h){if(c==="string")h===void 0?l[d]="undefined":h===null?l[d]="null":h.toString?l[d]=h.toString():l[d]="invalid field: toString() is not defined.";else if(c==="number")if(h===void 0)l[d]="undefined";else if(h===null)l[d]="null";else{var g=parseFloat(h);isNaN(g)?l[d]="NaN":l[d]=g}else l[d]="invalid field: "+u+" is of unknown type.",e.throwInternal(fe.CRITICAL,l[d],null,!0)})),l}s(o,"a")})}return s(t,"t"),t}()}),th,Ku,Uv=O(()=>{wn(),ht(),th=function(){function t(){var e=Ta(),n=Mi(),r=!1,i=!0;xn(t,this,function(o){try{if(e&&La.Attach(e,"online",u)&&(La.Attach(e,"offline",l),r=!0),n){var a=n.body||n;S(a.ononline)||(a.ononline=u,a.onoffline=l,r=!0)}if(r){var c=Fi();c&&!E(c.onLine)&&(i=c.onLine)}}catch(d){r=!1}o.isListening=r,o.isOnline=function(){var d=!0,h=Fi();return r?d=i:h&&!E(h.onLine)&&(d=h.onLine),d},o.isOffline=function(){return!o.isOnline()};function u(){i=!0}s(u,"s");function l(){i=!1}s(l,"c")})}return s(t,"t"),t.Offline=new t,t}(),Ku=th.Offline}),nh,Hv=O(()=>{nh=function(){function t(){}return s(t,"t"),t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e.length<t.MIN_INPUT_LENGTH;)e=e.concat(e);for(var n=5381,r=0;r<e.length;++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t.MIN_INPUT_LENGTH=8,t}()}),rh,Bv=O(()=>{Hv(),dr(),rh=function(){function t(){this.hashCodeGeneragor=new nh,this.keys=new Ks}return s(t,"t"),t.prototype.getSamplingScore=function(e){var n=0;return e.tags&&e.tags[this.keys.userId]?n=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?n=this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?n=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?n=this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):n=Math.random()*100,n},t}()}),ih,Wv=O(()=>{Bv(),dr(),wn(),ih=function(){function t(e,n){this.INT_MAX_VALUE=2147483647,this._logger=n||bs(null),(e>100||e<0)&&(this._logger.throwInternal(fe.WARNING,Y.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new rh}return s(t,"t"),t.prototype.isSampledIn=function(e){var n=this.sampleRate,r=!1;return n==null||n>=100||e.baseType===Ni.dataType?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t}()});function Js(t){try{return t.responseText}catch(e){}return null}s(Js,"Ti");var Gu,$v=O(()=>{Bt(),Lv(),Nv(),Ov(),dr(),wn(),Uv(),Wv(),ht(),Gu=function(t){ee(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=Gs,n._XMLHttpRequestSupported=!1;var r,i,o,a,c,u,l={};return xn(e,n,function(d,h){function g(){ki("Method not implemented.")}s(g,"g"),d.pause=g,d.resume=g,d.flush=function(){try{d.triggerSend(!0,null,1)}catch(q){d.diagLog().throwInternal(fe.CRITICAL,Y.FlushFailed,"flush failed, telemetry will not be collected: "+An(q),{exception:hn(q)})}},d.onunloadFlush=function(){if((d._senderConfig.onunloadDisableBeacon()===!1||d._senderConfig.isBeaconApiDisabled()===!1)&&Su())try{d.triggerSend(!0,m,2)}catch(q){d.diagLog().throwInternal(fe.CRITICAL,Y.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+An(q),{exception:hn(q)})}else d.flush()},d.teardown=g,d.addHeader=function(q,Xe){l[q]=Xe},d.initialize=function(q,Xe,vt,pt){h.initialize(q,Xe,vt,pt);var Mt=d._getTelCtx(),jt=d.identifier;c=new eh(Xe.logger),r=0,i=null,o=0,d._sender=null,u=0;var an=e._getDefaultAppInsightsChannelConfig();if(d._senderConfig=e._getEmptyAppInsightsChannelConfig(),fn(an,function(Ce,ft){d._senderConfig[Ce]=function(){return Mt.getConfig(jt,Ce,ft())}}),d._buffer=d._senderConfig.enableSessionStorageBuffer()&&aa()?new Kf(d.diagLog(),d._senderConfig):new qf(d._senderConfig),d._sample=new ih(d._senderConfig.samplingPercentage(),d.diagLog()),kn(q)||d.diagLog().throwInternal(fe.CRITICAL,Y.InvalidInstrumentationKey,"Invalid Instrumentation key "+q.instrumentationKey),!Bs(d._senderConfig.endpointUrl())&&d._senderConfig.customHeaders()&&d._senderConfig.customHeaders().length>0&&vn(d._senderConfig.customHeaders(),function(Ce){n.addHeader(Ce.header,Ce.value)}),!d._senderConfig.isBeaconApiDisabled()&&Su())d._sender=m;else{var Cn=xr("XMLHttpRequest");if(Cn){var Hn=new Cn;"withCredentials"in Hn?(d._sender=b,d._XMLHttpRequestSupported=!0):typeof XDomainRequest!==J&&(d._sender=Et)}else{var hi=xr("fetch");hi&&(d._sender=w)}}},d.processTelemetry=function(q,Xe){Xe=d._getTelCtx(Xe);try{if(d._senderConfig.disableTelemetry())return;if(!q){Xe.diagLog().throwInternal(fe.CRITICAL,Y.CannotSendEmptyTelemetry,"Cannot send empty telemetry");return}if(q.baseData&&!q.baseType){Xe.diagLog().throwInternal(fe.CRITICAL,Y.InvalidEvent,"Cannot send telemetry without baseData and baseType");return}if(q.baseType||(q.baseType="EventData"),!d._sender){Xe.diagLog().throwInternal(fe.CRITICAL,Y.SenderNotInitialized,"Sender was not initialized");return}if(p(q))q[Ls]=d._sample.sampleRate;else{Xe.diagLog().throwInternal(fe.WARNING,Y.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:d._sample.sampleRate});return}var vt=e.constructEnvelope(q,d._senderConfig.instrumentationKey(),Xe.diagLog());if(!vt){Xe.diagLog().throwInternal(fe.CRITICAL,Y.CreateEnvelopeError,"Unable to create an AppInsights envelope");return}var pt=!1;if(q.tags&&q.tags[oa]&&(vn(q.tags[oa],function(Cn){try{Cn&&Cn(vt)===!1&&(pt=!0,Xe.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(Hn){Xe.diagLog().throwInternal(fe.CRITICAL,Y.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+An(Hn),{exception:hn(Hn)},!0)}}),delete q.tags[oa]),pt)return;var Mt=c.serialize(vt),jt=d._buffer.getItems(),an=d._buffer.batchPayloads(jt);an&&an.length+Mt.length>d._senderConfig.maxBatchSizeInBytes()&&d.triggerSend(!0,null,10),d._buffer.enqueue(Mt),te()}catch(Cn){Xe.diagLog().throwInternal(fe.WARNING,Y.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+An(Cn),{exception:hn(Cn)})}d.processNext(q,Xe)},d._xhrReadyStateChange=function(q,Xe,vt){q.readyState===4&&C(q.status,Xe,q.responseURL,vt,ge(q),Js(q)||q.response)},d.triggerSend=function(q,Xe,vt){q===void 0&&(q=!0);try{if(d._senderConfig.disableTelemetry())d._buffer.clear();else{if(d._buffer.count()>0){var pt=d._buffer.getItems();st(vt||0,q),Xe?Xe.call(n,pt,q):d._sender(pt,q)}o=+new Date}clearTimeout(a),a=null,i=null}catch(jt){var Mt=Hc();(!Mt||Mt>9)&&d.diagLog().throwInternal(fe.CRITICAL,Y.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+An(jt),{exception:hn(jt)})}},d._onError=function(q,Xe,vt){d.diagLog().throwInternal(fe.WARNING,Y.OnError,"Failed to send telemetry.",{message:Xe}),d._buffer.clearSent(q)},d._onPartialSuccess=function(q,Xe){for(var vt=[],pt=[],Mt=Xe.errors.reverse(),jt=0,an=Mt;jt<an.length;jt++){var Cn=an[jt],Hn=q.splice(Cn.index,1)[0];ze(Cn.statusCode)?pt.push(Hn):vt.push(Hn)}q.length>0&&d._onSuccess(q,Xe.itemsAccepted),vt.length>0&&d._onError(vt,ge(null,["partial success",Xe.itemsAccepted,"of",Xe.itemsReceived].join(" "))),pt.length>0&&(F(pt),d.diagLog().throwInternal(fe.WARNING,Y.TransmissionFailed,"Partial success. Delivered: "+q.length+", Failed: "+vt.length+". Will retry to send "+pt.length+" our of "+Xe.itemsReceived+" items"))},d._onSuccess=function(q,Xe){d._buffer.clearSent(q)},d._xdrOnLoad=function(q,Xe){var vt=Js(q);if(q&&(vt+""=="200"||vt===""))r=0,d._onSuccess(Xe,0);else{var pt=P(vt);pt&&pt.itemsReceived&&pt.itemsReceived>pt.itemsAccepted&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Xe,pt):d._onError(Xe,kt(q))}};function p(q){return d._sample.isSampledIn(q)}s(p,"C");function C(q,Xe,vt,pt,Mt,jt){var an=null;if(d._appId||(an=P(jt),an&&an.appId&&(d._appId=an.appId)),(q<200||q>=300)&&q!==0){if((q===301||q===307||q===308)&&!v(vt)){d._onError(Xe,Mt);return}!d._senderConfig.isRetryDisabled()&&ze(q)?(F(Xe),d.diagLog().throwInternal(fe.WARNING,Y.TransmissionFailed,". Response code "+q+". Will retry to send "+Xe.length+" items.")):d._onError(Xe,Mt)}else if(Ku.isOffline()){if(!d._senderConfig.isRetryDisabled()){var Cn=10;F(Xe,Cn),d.diagLog().throwInternal(fe.WARNING,Y.TransmissionFailed,". Offline - Response Code: "+q+". Offline status: "+Ku.isOffline()+". Will retry to send "+Xe.length+" items.")}}else v(vt),q===206?(an||(an=P(jt)),an&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Xe,an):d._onError(Xe,Mt)):(r=0,d._onSuccess(Xe,pt))}s(C,"E");function v(q){return u>=10?!1:!E(q)&&q!==""&&q!==d._senderConfig.endpointUrl()?(d._senderConfig.endpointUrl=function(){return q},++u,!0):!1}s(v,"b");function m(q,Xe){var vt=d._senderConfig.endpointUrl(),pt=d._buffer.batchPayloads(q),Mt=new Blob([pt],{type:"text/plain;charset=UTF-8"}),jt=Fi().sendBeacon(vt,Mt);jt?(d._buffer.markAsSent(q),d._onSuccess(q,q.length)):(b(q,!0),d.diagLog().throwInternal(fe.WARNING,Y.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}s(m,"p");function b(q,Xe){var vt=new XMLHttpRequest,pt=d._senderConfig.endpointUrl();try{vt[ko]=!0}catch(jt){}vt.open("POST",pt,Xe),vt.setRequestHeader("Content-type","application/json"),Bs(pt)&&vt.setRequestHeader(zn.sdkContextHeader,zn.sdkContextHeaderAppIdRequest),vn(xo(l),function(jt){vt.setRequestHeader(jt,l[jt])}),vt.onreadystatechange=function(){return d._xhrReadyStateChange(vt,q,q.length)},vt.onerror=function(jt){return d._onError(q,ge(vt),jt)};var Mt=d._buffer.batchPayloads(q);vt.send(Mt),d._buffer.markAsSent(q)}s(b,"m");function w(q,Xe){var vt=d._senderConfig.endpointUrl(),pt=d._buffer.batchPayloads(q),Mt=new Blob([pt],{type:"text/plain;charset=UTF-8"}),jt=new Headers;Bs(vt)&&jt.append(zn.sdkContextHeader,zn.sdkContextHeaderAppIdRequest),vn(xo(l),function(Hn){jt.append(Hn,l[Hn])});var an={method:"POST",headers:jt,body:Mt},Cn=new Request(vt,an);fetch(Cn).then(function(Hn){if(Hn.ok)Hn.text().then(function(hi){C(Hn.status,q,Hn.url,q.length,Hn.statusText,hi)}),d._buffer.markAsSent(q);else throw Error(Hn.statusText)}).catch(function(Hn){d._onError(q,Hn.message)})}s(w,"y");function P(q){try{if(q&&q!==""){var Xe=wi().parse(q);if(Xe&&Xe.itemsReceived&&Xe.itemsReceived>=Xe.itemsAccepted&&Xe.itemsReceived-Xe.itemsAccepted===Xe.errors.length)return Xe}}catch(vt){d.diagLog().throwInternal(fe.CRITICAL,Y.InvalidBackendResponse,"Cannot parse the response. "+An(vt),{response:q})}return null}s(P,"w");function F(q,Xe){if(Xe===void 0&&(Xe=1),!(!q||q.length===0)){d._buffer.clearSent(q),r++;for(var vt=0,pt=q;vt<pt.length;vt++){var Mt=pt[vt];d._buffer.enqueue(Mt)}R(Xe),te()}}s(F,"L");function R(q){var Xe=10,vt;if(r<=1)vt=Xe;else{var pt=(Math.pow(2,r)-1)/2,Mt=Math.floor(Math.random()*pt*Xe)+1;Mt=q*Mt,vt=Math.max(Math.min(Mt,3600),Xe)}var jt=ui()+vt*1e3;i=jt}s(R,"k");function te(){if(!a){var q=i?Math.max(0,i-ui()):0,Xe=Math.max(d._senderConfig.maxBatchInterval(),q);a=setTimeout(function(){d.triggerSend(!0,null,1)},Xe)}}s(te,"Q");function ze(q){return q===408||q===429||q===500||q===503}s(ze,"ye");function ge(q,Xe){return q?"XMLHttpRequest,Status:"+q.status+",Response:"+Js(q)||0||0:Xe}s(ge,"J");function Et(q,Xe){var vt=Ta(),pt=new XDomainRequest;pt.onload=function(){return d._xdrOnLoad(pt,q)},pt.onerror=function(Cn){return d._onError(q,kt(pt),Cn)};var Mt=vt&&vt.location&&vt.location.protocol||"";if(d._senderConfig.endpointUrl().lastIndexOf(Mt,0)!==0){d.diagLog().throwInternal(fe.WARNING,Y.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),d._buffer.clear();return}var jt=d._senderConfig.endpointUrl().replace(/^(https?:)/,"");pt.open("POST",jt);var an=d._buffer.batchPayloads(q);pt.send(an),d._buffer.markAsSent(q)}s(Et,"de");function kt(q,Xe){return q?"XDomainRequest,Response:"+Js(q)||0:Xe}s(kt,"be");function Rt(){var q="getNotifyMgr";return d.core[q]?d.core[q]():d.core._notificationManager}s(Rt,"pt");function st(q,Xe){var vt=Rt();if(vt&&vt.eventsSendRequest)try{vt.eventsSendRequest(q,Xe)}catch(pt){d.diagLog().throwInternal(fe.CRITICAL,Y.NotificationException,"send request notification failed: "+An(pt),{exception:hn(pt)})}}s(st,"it");function kn(q){var Xe=E(q.disableInstrumentationKeyValidation)?!1:q.disableInstrumentationKeyValidation;if(Xe)return!0;var vt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",pt=new RegExp(vt);return pt.test(q.instrumentationKey)}s(kn,"dt")}),n}return s(e,"e"),e.constructEnvelope=function(n,r,i){var o;switch(r!==n.iKey&&!E(r)?o=zt({},n,{iKey:r}):o=n,o.baseType){case _i.dataType:return qu.EventEnvelopeCreator.Create(i,o);case Yi.dataType:return Zf.TraceEnvelopeCreator.Create(i,o);case Ei.dataType:return Jf.PageViewEnvelopeCreator.Create(i,o);case Zi.dataType:return Yf.PageViewPerformanceEnvelopeCreator.Create(i,o);case Nr.dataType:return Qf.ExceptionEnvelopeCreator.Create(i,o);case Ni.dataType:return Xf.MetricEnvelopeCreator.Create(i,o);case Oi.dataType:return Gf.DependencyEnvelopeCreator.Create(i,o);default:return qu.EventEnvelopeCreator.Create(i,o)}},e._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},e._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},e}(Po)}),oh=O(()=>{$v()}),ah,Qu,sh,zv=O(()=>{ht(),dr(),wn(),ah="ai_session",Qu=function(){function t(){}return s(t,"t"),t}(),sh=function(){function t(e,n){var r=this,i,o,a=bs(n),c=Yc(n);xn(t,r,function(u){e||(e={}),Be(e.sessionExpirationMs)||(e.sessionExpirationMs=function(){return t.acquisitionSpan}),Be(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return t.renewalSpan}),u.config=e;var l=u.config.sessionCookiePostfix&&u.config.sessionCookiePostfix()?u.config.sessionCookiePostfix():u.config.namePrefix&&u.config.namePrefix()?u.config.namePrefix():"";i=s(function(){return ah+l},"i"),u.automaticSession=new Qu,u.update=function(){var v=ui(),m=!1,b=u.automaticSession;b.id||(m=!d(b,v));var w=u.config.sessionExpirationMs();if(!m&&w>0){var P=u.config.sessionRenewalMs(),F=v-b.acquisitionDate,R=v-b.renewalDate;m=F<0||R<0,m=m||F>w,m=m||R>P}m?g(v):(!o||v-o>t.cookieUpdateInterval)&&p(b,v)},u.backup=function(){var v=u.automaticSession;C(v.id,v.acquisitionDate,v.renewalDate)};function d(v,m){var b=!1,w=c.get(i());if(w&&Be(w.split))b=h(v,w);else{var P=rf(a,i());P&&(b=h(v,P))}return b||!!v.id}s(d,"l");function h(v,m){var b=!1,w=", session will be reset",P=m.split("|");if(P.length>=2)try{var F=+P[1]||0,R=+P[2]||0;isNaN(F)||F<=0?a.throwInternal(fe.WARNING,Y.SessionRenewalDateIsZero,"AI session acquisition date is 0"+w):isNaN(R)||R<=0?a.throwInternal(fe.WARNING,Y.SessionRenewalDateIsZero,"AI session renewal date is 0"+w):P[0]&&(v.id=P[0],v.acquisitionDate=F,v.renewalDate=R,b=!0)}catch(te){a.throwInternal(fe.CRITICAL,Y.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(m||"")+"]"+w+" - "+An(te),{exception:hn(te)})}return b}s(h,"f");function g(v){var m=u.config||{},b=(m.getNewId?m.getNewId():null)||ks;u.automaticSession.id=b(m.idLength?m.idLength():22),u.automaticSession.acquisitionDate=v,p(u.automaticSession,v),xu()||a.throwInternal(fe.WARNING,Y.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}s(g,"g");function p(v,m){var b=v.acquisitionDate;v.renewalDate=m;var w=u.config,P=w.sessionRenewalMs(),F=b+w.sessionExpirationMs()-m,R=[v.id,b,m],te=0;F<P?te=F/1e3:te=P/1e3;var ze=w.cookieDomain?w.cookieDomain():null;c.set(i(),R.join("|"),w.sessionExpirationMs()>0?te:null,ze),o=m}s(p,"C");function C(v,m,b){of(a,i(),[v,m,b].join("|"))}s(C,"E")})}return s(t,"t"),t.acquisitionSpan=864e5,t.renewalSpan=18e5,t.cookieUpdateInterval=6e4,t}()}),ch,jv=O(()=>{ch=function(){function t(){}return s(t,"t"),t}()}),uh,Vv=O(()=>{uh=function(){function t(){this.id="browser",this.deviceClass="Browser"}return s(t,"t"),t}()}),lh,dh,qv=O(()=>{lh="2.6.4",dh=function(){function t(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:"+lh}return s(t,"t"),t}()});function fh(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))}s(fh,"Xu");var hh,Kv=O(()=>{ht(),dr(),wn(),hh=function(){function t(e,n){this.isNewUser=!1;var r=bs(n),i=Yc(n),o;xn(t,this,function(a){a.config=e;var c=a.config.userCookiePostfix&&a.config.userCookiePostfix()?a.config.userCookiePostfix():"";o=s(function(){return t.userCookieName+c},"a");var u=i.get(o());if(u){a.isNewUser=!1;var l=u.split(t.cookieSeparator);l.length>0&&(a.id=l[0])}if(!a.id){var d=e||{},h=(d.getNewId?d.getNewId():null)||ks;a.id=h(d.idLength?e.idLength():22);var g=31536e3,p=ni(new Date);a.accountAcquisitionDate=p,a.isNewUser=!0;var C=[a.id,p];i.set(o(),C.join(t.cookieSeparator),g);var v=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";af(r,v)}a.accountId=e.accountId?e.accountId():void 0;var m=i.get(t.authUserCookieName);if(m){m=decodeURI(m);var b=m.split(t.cookieSeparator);b[0]&&(a.authenticatedId=b[0]),b.length>1&&b[1]&&(a.accountId=b[1])}a.setAuthenticatedUserContext=function(w,P,F){F===void 0&&(F=!1);var R=!fh(w)||P&&!fh(P);if(R){r.throwInternal(fe.WARNING,Y.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}a.authenticatedId=w;var te=a.authenticatedId;P&&(a.accountId=P,te=[a.authenticatedId,a.accountId].join(t.cookieSeparator)),F&&i.set(t.authUserCookieName,encodeURI(te))},a.clearAuthenticatedUserContext=function(){a.authenticatedId=null,a.accountId=null,i.del(t.authUserCookieName)}})}return s(t,"t"),t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}()}),gh,Gv=O(()=>{gh=function(){function t(){}return s(t,"t"),t}()}),ph,Qv=O(()=>{dr(),wn(),ph=function(){function t(e,n,r,i){var o=this;o.traceID=e||Li(),o.parentID=n,o.name=r;var a=Io();!r&&a&&a.pathname&&(o.name=a.pathname),o.name=Fr(i,o.name)}return s(t,"t"),t}()});function da(t,e){t&&t[e]&&xo(t[e]).length===0&&delete t[e]}s(da,"Br");var $a,za,vh,Xv=O(()=>{ht(),wn(),zv(),dr(),jv(),Vv(),qv(),Kv(),Gv(),Qv(),$a="ext",za="tags",vh=function(){function t(e,n){var r=this,i=e.logger;this.appId=function(){return null},xn(t,this,function(o){o.application=new ch,o.internal=new dh(n),vs()&&(o.sessionManager=new sh(n,e),o.device=new uh,o.location=new gh,o.user=new hh(n,e),o.telemetryTrace=new ph(void 0,void 0,void 0,i),o.session=new Qu),o.applySessionContext=function(a,c){var u=o.session,l=o.sessionManager;u&&en(u.id)?_n(_r(a.ext,Or.AppExt),"sesId",u.id):l&&l.automaticSession&&_n(_r(a.ext,Or.AppExt),"sesId",l.automaticSession.id,en)},o.applyOperatingSystemContxt=function(a,c){_n(a.ext,Or.OSExt,o.os)},o.applyApplicationContext=function(a,c){var u=o.application;if(u){var l=_r(a,za);_n(l,Wn.applicationVersion,u.ver,en),_n(l,Wn.applicationBuild,u.build,en)}},o.applyDeviceContext=function(a,c){var u=o.device;if(u){var l=_r(_r(a,$a),Or.DeviceExt);_n(l,"localId",u.id,en),_n(l,"ip",u.ip,en),_n(l,"model",u.model,en),_n(l,"deviceClass",u.deviceClass,en)}},o.applyInternalContext=function(a,c){var u=o.internal;if(u){var l=_r(a,za);_n(l,Wn.internalAgentVersion,u.agentVersion,en),_n(l,Wn.internalSdkVersion,u.sdkVersion,en),(a.baseType===Xo.dataType||a.baseType===Ei.dataType)&&(_n(l,Wn.internalSnippet,u.snippetVer,en),_n(l,Wn.internalSdkSrc,u.sdkSrc,en))}},o.applyLocationContext=function(a,c){var u=r.location;u&&_n(_r(a,za,[]),Wn.locationIp,u.ip,en)},o.applyOperationContext=function(a,c){var u=o.telemetryTrace;if(u){var l=_r(_r(a,$a),Or.TraceExt,{traceID:void 0,parentID:void 0});_n(l,"traceID",u.traceID,en),_n(l,"name",u.name,en),_n(l,"parentID",u.parentID,en)}},o.applyWebContext=function(a,c){var u=r.web;u&&_n(_r(a,$a),Or.WebExt,u)},o.applyUserContext=function(a,c){var u=o.user;if(u){var l=_r(a,za,[]);_n(l,Wn.userAccountId,u.accountId,en);var d=_r(_r(a,$a),Or.UserExt);_n(d,"id",u.id,en),_n(d,"authId",u.authenticatedId,en)}},o.cleanUp=function(a,c){var u=a.ext;u&&(da(u,Or.DeviceExt),da(u,Or.UserExt),da(u,Or.WebExt),da(u,Or.OSExt),da(u,Or.AppExt),da(u,Or.TraceExt))}})}return s(t,"t"),t}()}),mh,Xu,Jv=O(()=>{Bt(),ht(),wn(),Xv(),dr(),mh=function(t){ee(e,t);function e(){var n=t.call(this)||this;n.priority=110,n.identifier=la;var r,i;return xn(e,n,function(o,a){o.initialize=function(u,l,d,h){a.initialize(u,l,d,h);var g=o._getTelCtx(),p=o.identifier,C=e.getDefaultConfig();i=i||{},fn(C,function(v,m){i[v]=function(){return g.getConfig(p,v,m())}}),o.context=new vh(l,i),r=Zd(d,Gs),o.context.appId=function(){return r?r._appId:null},o._extConfig=i},o.processTelemetry=function(u,l){if(!E(u)){l=o._getTelCtx(l),u.name===Ei.envelopeType&&l.diagLog().resetInternalMessageCount();var d=o.context||{};if(d.session&&typeof o.context.session.id!="string"&&d.sessionManager&&d.sessionManager.update(),c(u,l),d.user&&d.user.isNewUser){d.user.isNewUser=!1;var h=new Xo(Y.SendBrowserInfoOnUserInit,(Fi()||{}).userAgent||"");l.diagLog().logInternalMessage(fe.CRITICAL,h)}o.processNext(u,l)}};function c(u,l){_r(u,"tags",[]),_r(u,"ext",{});var d=o.context;d.applySessionContext(u,l),d.applyApplicationContext(u,l),d.applyDeviceContext(u,l),d.applyOperationContext(u,l),d.applyUserContext(u,l),d.applyOperatingSystemContxt(u,l),d.applyWebContext(u,l),d.applyLocationContext(u,l),d.applyInternalContext(u,l),d.cleanUp(u,l)}s(c,"u")}),n}return s(e,"e"),e.getDefaultConfig=function(){var n={instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}};return n},e}(Po),Xu=mh}),yh=O(()=>{Jv()});function wh(t,e,n){var r=0,i=t[e],o=t[n];return i&&o&&(r=Lr(i,o)),r}s(wh,"ic");function No(t,e,n,r,i){var o=0,a=wh(n,r,i);return a&&(o=wo(t,e,Ji(a))),o}s(No,"yr");function wo(t,e,n){var r="ajaxPerf",i=0;if(t&&e&&n){var o=t[r]=t[r]||{};o[e]=n,i=1}return i}s(wo,"rr");function Yv(t,e){var n=t.perfTiming,r=e[Vr]||{},i=0,o="name",a="Start",c="End",u="domainLookup",l="connect",d="redirect",h="request",g="response",p="duration",C="startTime",v=u+a,m=u+c,b=l+a,w=l+c,P=h+a,F=h+c,R=g+a,te=g+c,ze=d+a,ge=d=c,Et="transferSize",kt="encodedBodySize",Rt="decodedBodySize",st="serverTiming";if(n){i|=No(r,d,n,ze,ge),i|=No(r,u,n,v,m),i|=No(r,l,n,b,w),i|=No(r,h,n,P,F),i|=No(r,g,n,R,te),i|=No(r,"networkConnect",n,C,w),i|=No(r,"sentRequest",n,P,te);var kn=n[p];kn||(kn=wh(n,C,te)||0),i|=wo(r,p,kn),i|=wo(r,"perfTotal",kn);var q=n[st];if(q){var Xe={};vn(q,function(vt,pt){var Mt=Mn(vt[o]||""+pt),jt=Xe[Mt]||{};fn(vt,function(an,Cn){(an!==o&&en(Cn)||Ko(Cn))&&(jt[an]&&(Cn=jt[an]+";"+Cn),(Cn||!en(Cn))&&(jt[an]=Cn))}),Xe[Mt]=jt}),i|=wo(r,st,Xe)}i|=wo(r,Et,n[Et]),i|=wo(r,kt,n[kt]),i|=wo(r,Rt,n[Rt])}else t.perfMark&&(i|=wo(r,"missing",t.perfAttempts));i&&(e[Vr]=r)}s(Yv,"Cl");var Vr,Ch,Ju,Zv=O(()=>{dr(),wn(),ht(),Vr="properties",Ch=function(){function t(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1}return s(t,"t"),t}(),Ju=function(){function t(e,n,r){var i=this,o=r,a="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new Ch,i.clientFailure=0,i.traceID=e,i.spanID=n,xn(t,i,function(c){c.getAbsoluteUrl=function(){return c.requestUrl?uf(c.requestUrl):null},c.getPathName=function(){return c.requestUrl?Na(o,lf(c.method,c.requestUrl)):null},c.CreateTrackItem=function(u,l,d){if(c.ajaxTotalDuration=Math.round(Lr(c.requestSentTime,c.responseFinishedTime)*1e3)/1e3,c.ajaxTotalDuration<0)return null;var h=(v={id:"|"+c.traceID+"."+c.spanID,target:c.getAbsoluteUrl(),name:c.getPathName(),type:u,startTime:null,duration:c.ajaxTotalDuration,success:+c.status>=200&&+c.status<400,responseCode:+c.status,method:c.method},v[Vr]={HttpMethod:c.method},v);if(c.requestSentTime&&(h.startTime=new Date,h.startTime.setTime(c.requestSentTime)),Yv(c,h),l&&xo(c.requestHeaders).length>0&&(h[Vr]=h[Vr]||{},h[Vr].requestHeaders=c.requestHeaders),d){var g=d();if(g){var p=g.correlationContext;if(p&&(h.correlationContext=p),g.headerMap&&xo(g.headerMap).length>0&&(h[Vr]=h[Vr]||{},h[Vr].responseHeaders=g.headerMap),c.status>=400){var C=g.type;h[Vr]=h[Vr]||{},(C===""||C==="text")&&(h[Vr][a]=g[a]?g.statusText+" - "+g[a]:g.statusText),C==="json"&&(h[Vr][a]=g.response?g.statusText+" - "+JSON.stringify(g.response):g.statusText)}}}return h;var v}})}return s(t,"t"),t}()}),em,tm=O(()=>{wn(),wn(),em=function(){function t(){}return s(t,"t"),t.GetLength=function(e){var n=0;if(!E(e)){var r="";try{r=e.toString()}catch(i){}n=r.length,n=isNaN(n)?0:n}return n},t}()}),Yu,nm=O(()=>{wn(),Yu=function(){function t(e,n){var r=this;r.traceFlag=t.DEFAULT_TRACE_FLAG,r.version=t.DEFAULT_VERSION,e&&t.isValidTraceId(e)?r.traceId=e:r.traceId=Li(),n&&t.isValidSpanId(n)?r.spanId=n:r.spanId=Li().substr(0,16)}return s(t,"t"),t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}()});function rm(){var t=nn();return!t||E(t.Request)||E(t.Request[He])||E(t[ga])?null:t[ga]}s(rm,"El");function im(t){var e=!1;if(typeof XMLHttpRequest!==J&&!E(XMLHttpRequest)){var n=XMLHttpRequest[He];e=!E(n)&&!E(n.open)&&!E(n.send)&&!E(n.abort)}var r=Hc();if(r&&r<9&&(e=!1),e)try{var i=new XMLHttpRequest;i[qr]={};var o=XMLHttpRequest[He].open;XMLHttpRequest[He].open=o}catch(a){e=!1,ja(t,Y.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:hn(a)})}return e}s(im,"wl");function Ys(t){var e="";try{!E(t)&&!E(t[qr])&&!E(t[qr].requestUrl)&&(e+="(url: '"+t[qr].requestUrl+"')")}catch(n){}return e}s(Ys,"bi");function ja(t,e,n,r,i){t[ha]()[el](fe.CRITICAL,e,n,r,i)}s(ja,"Rn");function Zs(t,e,n,r,i){t[ha]()[el](fe.WARNING,e,n,r,i)}s(Zs,"Pi");function Va(t,e,n){return function(r){ja(t,e,n,{ajaxDiagnosticsMessage:Ys(r.inst),exception:hn(r.err)})}}s(Va,"Nn");function fa(t,e){return t&&e?t.indexOf(e):-1}s(fa,"zr");var Zu,ha,qr,el,ga,tl,nl,om=O(()=>{Bt(),dr(),wn(),Zv(),tm(),nm(),ht(),Zu="ai.ajxmn.",ha="diagLog",qr="ajaxData",el="throwInternal",ga="fetch",tl=0,nl=function(t){ee(e,t);function e(){var n=t.call(this)||this;n.identifier=e.identifier,n.priority=120;var r="trackDependencyDataInternal",i=Io(),o=!1,a=!1,c=i&&i.host&&i.host.toLowerCase(),u=e.getEmptyConfig(),l=!1,d=0,h,g,p,C,v=!1,m=0,b=!1,w=[],P={},F;return xn(e,n,function(R,te){R.initialize=function(Ce,ft,Tt,wt){if(!R.isInitialized()){te.initialize(Ce,ft,Tt,wt);var Ot=R._getTelCtx(),tn=e.getDefaultConfig();fn(tn,function(Tr,uo){u[Tr]=Ot.getConfig(e.identifier,Tr,uo)});var Jt=u.distributedTracingMode;if(l=u.enableRequestHeaderTracking,v=u.enableAjaxPerfTracking,m=u.maxAjaxCallsPerView,b=u.enableResponseHeaderTracking,F=u.excludeRequestFromAutoTrackingPatterns,p=Jt===bi.AI||Jt===bi.AI_AND_W3C,g=Jt===bi.AI_AND_W3C||Jt===bi.W3C,v){var Sn=Ce.instrumentationKey||"unkwn";Sn.length>5?C=Zu+Sn.substring(Sn.length-5)+".":C=Zu+Sn+"."}if(u.disableAjaxTracking===!1&&kt(),ge(),Tt.length>0&&Tt){for(var jn=void 0,er=0;!jn&&er<Tt.length;)Tt[er]&&Tt[er].identifier===la&&(jn=Tt[er]),er++;jn&&(h=jn.context)}}},R.teardown=function(){vn(w,function(Ce){Ce.rm()}),w=[],o=!1,a=!1,R.setInitialized(!1)},R.trackDependencyData=function(Ce,ft){R[r](Ce,ft)},R.includeCorrelationHeaders=function(Ce,ft,Tt,wt){var Ot=R._currentWindowHost||c;if(ft){if(vo.canIncludeCorrelationHeader(u,Ce.getAbsoluteUrl(),Ot)){if(Tt||(Tt={}),Tt.headers=new Headers(Tt.headers||(ft instanceof Request?ft.headers||{}:{})),p){var tn="|"+Ce.traceID+"."+Ce.spanID;Tt.headers.set(zn.requestIdHeader,tn),l&&(Ce.requestHeaders[zn.requestIdHeader]=tn)}var Jt=u.appId||h&&h.appId();if(Jt&&(Tt.headers.set(zn.requestContextHeader,zn.requestContextAppIdFormat+Jt),l&&(Ce.requestHeaders[zn.requestContextHeader]=zn.requestContextAppIdFormat+Jt)),g){var Sn=new Yu(Ce.traceID,Ce.spanID);Tt.headers.set(zn.traceParentHeader,Sn.toString()),l&&(Ce.requestHeaders[zn.traceParentHeader]=Sn.toString())}}return Tt}else if(wt){if(vo.canIncludeCorrelationHeader(u,Ce.getAbsoluteUrl(),Ot)){if(p){var tn="|"+Ce.traceID+"."+Ce.spanID;wt.setRequestHeader(zn.requestIdHeader,tn),l&&(Ce.requestHeaders[zn.requestIdHeader]=tn)}var Jt=u.appId||h&&h.appId();if(Jt&&(wt.setRequestHeader(zn.requestContextHeader,zn.requestContextAppIdFormat+Jt),l&&(Ce.requestHeaders[zn.requestContextHeader]=zn.requestContextAppIdFormat+Jt)),g){var Sn=new Yu(Ce.traceID,Ce.spanID);wt.setRequestHeader(zn.traceParentHeader,Sn.toString()),l&&(Ce.requestHeaders[zn.traceParentHeader]=Sn.toString())}}return wt}},R[r]=function(Ce,ft,Tt){if(m===-1||d<m){(u.distributedTracingMode===bi.W3C||u.distributedTracingMode===bi.AI_AND_W3C)&&typeof Ce.id=="string"&&Ce.id[Ce.id.length-1]!=="."&&(Ce.id+="."),E(Ce.startTime)&&(Ce.startTime=new Date);var wt=Ui.create(Ce,Oi.dataType,Oi.envelopeType,R[ha](),ft,Tt);R.core.track(wt)}else d===m&&ja(R,Y.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++d};function ze(Ce){var ft=!0;return(Ce||u.ignoreHeaders)&&vn(u.ignoreHeaders,function(Tt){if(Tt.toLowerCase()===Ce.toLowerCase())return ft=!1,-1}),ft}s(ze,"ye");function ge(){var Ce=rm();if(Ce){var ft=nn(),Tt=Ce.polyfill;u.disableFetchTracking===!1?(w.push(gu(ft,ga,{req:function(wt,Ot,tn){var Jt;if(o&&!Rt(null,Ot,tn)&&!(Tt&&a)){var Sn=wt.ctx();Jt=an(Ot,tn);var jn=R.includeCorrelationHeaders(Jt,Ot,tn);jn!==tn&&wt.set(1,jn),Sn.data=Jt}},rsp:function(wt,Ot){var tn=wt.ctx().data;tn&&(wt.rslt=wt.rslt.then(function(Jt){return Hn(wt,(Jt||{}).status,Jt,tn,function(){var Sn={statusText:Jt.statusText,headerMap:null,correlationContext:hi(Jt)};if(b){var jn={};Jt.headers.forEach(function(er,Tr){ze(Tr)&&(jn[Tr]=er)}),Sn.headerMap=jn}return Sn}),Jt}).catch(function(Jt){throw Hn(wt,0,Ot,tn,null,{error:Jt.message}),Jt}))},hkErr:Va(R,Y.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),o=!0):Tt&&w.push(gu(ft,ga,{req:function(wt,Ot,tn){Rt(null,Ot,tn)}})),Tt&&(ft[ga].polyfill=Tt)}}s(ge,"J");function Et(Ce,ft,Tt){w.push(Xp(Ce,ft,Tt))}s(Et,"de");function kt(){im(R)&&!a&&(Et(XMLHttpRequest,"open",{req:function(Ce,ft,Tt,wt){var Ot=Ce.inst,tn=Ot[qr];!Rt(Ot,Tt)&&st(Ot,!0)&&(!tn||!tn.xhrMonitoringState.openDone)&&kn(Ot,ft,Tt,wt)},hkErr:Va(R,Y.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),Et(XMLHttpRequest,"send",{req:function(Ce,ft){var Tt=Ce.inst,wt=Tt[qr];st(Tt)&&!wt.xhrMonitoringState.sendDone&&(Mt("xhr",wt),wt.requestSentTime=Ua(),R.includeCorrelationHeaders(wt,void 0,void 0,Tt),wt.xhrMonitoringState.sendDone=!0)},hkErr:Va(R,Y.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),Et(XMLHttpRequest,"abort",{req:function(Ce){var ft=Ce.inst,Tt=ft[qr];st(ft)&&!Tt.xhrMonitoringState.abortDone&&(Tt.aborted=1,Tt.xhrMonitoringState.abortDone=!0)},hkErr:Va(R,Y.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),l&&Et(XMLHttpRequest,"setRequestHeader",{req:function(Ce,ft,Tt){var wt=Ce.inst;st(wt)&&ze(ft)&&(wt[qr].requestHeaders[ft]=Tt)},hkErr:Va(R,Y.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),a=!0)}s(kt,"be");function Rt(Ce,ft,Tt){var wt=!1,Ot=((en(ft)?ft:(ft||{}).url||"")||"").toLowerCase();if(vn(F,function(Sn){var jn=Sn;en(Sn)&&(jn=new RegExp(Sn)),wt||(wt=jn.test(Ot))}),wt)return wt;var tn=fa(Ot,"?"),Jt=fa(Ot,"#");return(tn===-1||Jt!==-1&&Jt<tn)&&(tn=Jt),tn!==-1&&(Ot=Ot.substring(0,tn)),E(Ce)?E(ft)||(wt=(typeof ft=="object"?ft[ko]===!0:!1)||(Tt?Tt[ko]===!0:!1)):wt=Ce[ko]===!0||Ot[ko]===!0,wt?P[Ot]||(P[Ot]=1):P[Ot]&&(wt=!0),wt}s(Rt,"pt");function st(Ce,ft){var Tt=!0,wt=a;return E(Ce)||(Tt=ft===!0||!E(Ce[qr])),wt&&Tt}s(st,"it");function kn(Ce,ft,Tt,wt){var Ot=h&&h.telemetryTrace&&h.telemetryTrace.traceID||Li(),tn=Li().substr(0,16),Jt=new Ju(Ot,tn,R[ha]());Jt.method=ft,Jt.requestUrl=Tt,Jt.xhrMonitoringState.openDone=!0,Jt.requestHeaders={},Jt.async=wt,Ce[qr]=Jt,q(Ce)}s(kn,"dt");function q(Ce){Ce[qr].xhrMonitoringState.stateChangeAttached=La.Attach(Ce,"readystatechange",function(){try{Ce&&Ce.readyState===4&&st(Ce)&&vt(Ce)}catch(Tt){var ft=hn(Tt);(!ft||fa(ft.toLowerCase(),"c00c023f")===-1)&&ja(R,Y.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Ys(Ce),exception:ft})}})}s(q,"d");function Xe(Ce){try{var ft=Ce.responseType;if(ft===""||ft==="text")return Ce.responseText}catch(Tt){}return null}s(Xe,"T");function vt(Ce){var ft=Ce[qr];ft.responseFinishedTime=Ua(),ft.status=Ce.status;function Tt(wt,Ot){var tn=Ot||{};tn.ajaxDiagnosticsMessage=Ys(Ce),wt&&(tn.exception=hn(wt)),Zs(R,Y.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",tn)}s(Tt,"N"),jt("xmlhttprequest",ft,function(){try{var wt=ft.CreateTrackItem("Ajax",l,function(){var Ot={statusText:Ce.statusText,headerMap:null,correlationContext:pt(Ce),type:Ce.responseType,responseText:Xe(Ce),response:Ce.response};if(b){var tn=Ce.getAllResponseHeaders();if(tn){var Jt=mr(tn).split(/[\r\n]+/),Sn={};vn(Jt,function(jn){var er=jn.split(": "),Tr=er.shift(),uo=er.join(": ");ze(Tr)&&(Sn[Tr]=uo)}),Ot.headerMap=Sn}}return Ot});wt?R[r](wt):Tt(null,{requestSentTime:ft.requestSentTime,responseFinishedTime:ft.responseFinishedTime})}finally{try{Ce[qr]=null}catch(Ot){}}},function(wt){Tt(wt,null)})}s(vt,"D");function pt(Ce){try{var ft=Ce.getAllResponseHeaders();if(ft!==null){var Tt=fa(ft.toLowerCase(),zn.requestContextHeaderLowerCase);if(Tt!==-1){var wt=Ce.getResponseHeader(zn.requestContextHeader);return vo.getCorrelationContext(wt)}}}catch(Ot){Zs(R,Y.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Ys(Ce),exception:hn(Ot)})}}s(pt,"A");function Mt(Ce,ft){if(ft.requestUrl&&C&&v){var Tt=Gi();if(Tt&&Be(Tt.mark)){tl++;var wt=C+Ce+"#"+tl;Tt.mark(wt);var Ot=Tt.getEntriesByName(wt);Ot&&Ot.length===1&&(ft.perfMark=Ot[0])}}}s(Mt,"H");function jt(Ce,ft,Tt,wt){var Ot=ft.perfMark,tn=Gi(),Jt=u.maxAjaxPerfLookupAttempts,Sn=u.ajaxPerfLookupDelay,jn=ft.requestUrl,er=0;s(function Tr(){try{if(tn&&Ot){er++;for(var uo=null,Pc=tn.getEntries(),xa=Pc.length-1;xa>=0;xa--){var gi=Pc[xa];if(gi){if(gi.entryType==="resource")gi.initiatorType===Ce&&(fa(gi.name,jn)!==-1||fa(jn,gi.name)!==-1)&&(uo=gi);else if(gi.entryType==="mark"&&gi.name===Ot.name){ft.perfTiming=uo;break}if(gi.startTime<Ot.startTime-1e3)break}}}!Ot||ft.perfTiming||er>=Jt||ft.async===!1?(Ot&&Be(tn.clearMarks)&&tn.clearMarks(Ot.name),ft.perfAttempts=er,Tt()):setTimeout(Tr,Sn)}catch(Xl){wt(Xl)}},"We")()}s(jt,"_");function an(Ce,ft){var Tt=h&&h.telemetryTrace&&h.telemetryTrace.traceID||Li(),wt=Li().substr(0,16),Ot=new Ju(Tt,wt,R[ha]());Ot.requestSentTime=Ua(),Ce instanceof Request?Ot.requestUrl=Ce?Ce.url:"":Ot.requestUrl=Ce;var tn="GET";ft&&ft.method?tn=ft.method:Ce&&Ce instanceof Request&&(tn=Ce.method),Ot.method=tn;var Jt={};if(l){var Sn=new Headers((ft?ft.headers:0)||(Ce instanceof Request?Ce.headers||{}:{}));Sn.forEach(function(jn,er){ze(er)&&(Jt[er]=jn)})}return Ot.requestHeaders=Jt,Mt("fetch",Ot),Ot}s(an,"j");function Cn(Ce){var ft="";try{E(Ce)||(typeof Ce=="string"?ft+="(url: '"+Ce+"')":ft+="(url: '"+Ce.url+"')")}catch(Tt){ja(R,Y.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:hn(Tt)})}return ft}s(Cn,"Z");function Hn(Ce,ft,Tt,wt,Ot,tn){if(!wt)return;function Jt(Sn,jn,er){var Tr=er||{};Tr.fetchDiagnosticsMessage=Cn(Tt),jn&&(Tr.exception=hn(jn)),Zs(R,Sn,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",Tr)}s(Jt,"V"),wt.responseFinishedTime=Ua(),wt.status=ft,jt("fetch",wt,function(){var Sn=wt.CreateTrackItem("Fetch",l,Ot);Sn?R[r](Sn):Jt(Y.FailedMonitorAjaxDur,null,{requestSentTime:wt.requestSentTime,responseFinishedTime:wt.responseFinishedTime})},function(Sn){Jt(Y.FailedMonitorAjaxGetCorrelationHeader,Sn,null)})}s(Hn,"ie");function hi(Ce){if(Ce&&Ce.headers)try{var ft=Ce.headers.get(zn.requestContextHeader);return vo.getCorrelationContext(ft)}catch(Tt){Zs(R,Y.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:Cn(Ce),exception:hn(Tt)})}}s(hi,"Ht")}),n}return s(e,"e"),e.getDefaultConfig=function(){var n={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:bi.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]};return n},e.getEmptyConfig=function(){var n=this.getDefaultConfig();return fn(n,function(r){n[r]=void 0}),n},e.prototype.processTelemetry=function(n,r){this.processNext(n,r)},e.identifier="AjaxDependencyPlugin",e}(Po)}),Sh=O(()=>{om()}),rl,il,bh,_h,ol,Eh=O(()=>{wn(),Vf(),oh(),yh(),Sh(),dr(),il=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],bh={Default:0,Required:1,Array:2,Hidden:4},_h={__proto__:null,PropertiesPluginIdentifier:la,BreezeChannelIdentifier:Gs,AnalyticsPluginIdentifier:Wu,Util:Pu,CorrelationIdHelper:vo,UrlHelper:pf,DateTimeUtils:vf,ConnectionStringParser:Sf,FieldType:bh,RequestHeaders:zn,DisabledPropertyName:ko,ProcessLegacy:oa,SampleRate:Ls,HttpMethod:Ns,DEFAULT_BREEZE_ENDPOINT:bu,AIData:Au,AIBase:Ru,Envelope:ku,Event:_i,Exception:Nr,Metric:Ni,PageView:Ei,PageViewData:Vs,RemoteDependencyData:Oi,Trace:Yi,PageViewPerformance:Zi,Data:eo,SeverityLevel:Ha,ConfigurationManager:Hf,ContextTagKeys:Ks,DataSanitizer:Jd,TelemetryItemCreator:Ui,CtxTagKeys:Wn,Extensions:Or,DistributedTracingModes:bi},ol=function(){function t(e){var n=this;n._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var r=e.config||{};if(r.connectionString){var i=yf(r.connectionString),o=i.ingestionendpoint;r.endpointUrl=o?o+"/v2/track":r.endpointUrl,r.instrumentationKey=i.instrumentationkey||r.instrumentationKey}n.appInsights=new zu,n.properties=new Xu,n.dependencies=new nl,n.core=new uu,n._sender=new Gu,n.snippet=e,n.config=r,n.getSKUDefaults()}return s(t,"t"),t.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},t.prototype.trackEvent=function(e,n){this.appInsights.trackEvent(e,n)},t.prototype.trackPageView=function(e){var n=e||{};this.appInsights.trackPageView(n)},t.prototype.trackPageViewPerformance=function(e){var n=e||{};this.appInsights.trackPageViewPerformance(n)},t.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},t.prototype._onerror=function(e){this.appInsights._onerror(e)},t.prototype.trackTrace=function(e,n){this.appInsights.trackTrace(e,n)},t.prototype.trackMetric=function(e,n){this.appInsights.trackMetric(e,n)},t.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},t.prototype.stopTrackPage=function(e,n,r,i){this.appInsights.stopTrackPage(e,n,r,i)},t.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,n,r){this.appInsights.stopTrackEvent(e,n,r)},t.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},t.prototype.setAuthenticatedUserContext=function(e,n,r){r===void 0&&(r=!1),this.properties.context.user.setAuthenticatedUserContext(e,n,r)},t.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},t.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},t.prototype.flush=function(e){var n=this;e===void 0&&(e=!0),Jo(this.core,function(){return"AISKU.flush"},function(){vn(n.core.getTransmissionControls(),function(r){vn(r,function(i){i.flush(e)})})},null,e)},t.prototype.onunloadFlush=function(e){e===void 0&&(e=!0),vn(this.core.getTransmissionControls(),function(n){vn(n,function(r){r.onunloadFlush?r.onunloadFlush():r.flush(e)})})},t.prototype.loadAppInsights=function(e,n,r){var i=this;e===void 0&&(e=!1);var o=this;function a(c){if(c){var u="";E(o._snippetVersion)||(u+=o._snippetVersion),e&&(u+=".lg"),o.context&&o.context.internal&&(o.context.internal.snippetVer=u||"-"),fn(o,function(l,d){en(l)&&!Be(d)&&l&&l[0]!=="_"&&il.indexOf(l)===-1&&(c[l]=d)})}}return s(a,"o"),e&&o.config.extensions&&o.config.extensions.length>0&&ki("Extensions not allowed in legacy mode"),Jo(o.core,function(){return"AISKU.loadAppInsights"},function(){var c=[];c.push(o._sender),c.push(o.properties),c.push(o.dependencies),c.push(o.appInsights),o.core.initialize(o.config,c,n,r),o.context=o.properties.context,rl&&o.context&&(o.context.internal.sdkSrc=rl),a(o.snippet),o.emptyQueue(),o.pollInternalLogs(),o.addHousekeepingBeforeUnload(i)}),o},t.prototype.updateSnippetDefinitions=function(e){ed(e,this,function(n){return n&&il.indexOf(n)===-1})},t.prototype.emptyQueue=function(){var e=this;try{if(vr(e.snippet.queue)){for(var n=e.snippet.queue.length,r=0;r<n;r++){var i=e.snippet.queue[r];i()}e.snippet.queue=void 0,delete e.snippet.queue}}catch(a){var o={};a&&Be(a.toString)&&(o.exception=a.toString())}},t.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},t.prototype.addHousekeepingBeforeUnload=function(e){if(vs()||rd()){var n=s(function(){e.onunloadFlush(!1),vn(e.appInsights.core._extensions,function(i){if(i.identifier===la)return i&&i.context&&i.context._sessionManager&&i.context._sessionManager.backup(),-1})},"r");if(!e.appInsights.config.disableFlushOnBeforeUnload){var r=Ao("beforeunload",n);r=Ao("unload",n)||r,r=Ao("pagehide",n)||r,r=Ao("visibilitychange",n)||r,!r&&!kp()&&e.appInsights.core.logger.throwInternal(fe.CRITICAL,Y.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(Ao("pagehide",n),Ao("visibilitychange",n))}},t.prototype.getSender=function(){return this._sender},t.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},t}(),function(){var t=null,e=!1,n=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var r=(document||{}).currentScript;r&&(t=r.src)}catch(c){}if(t)try{var i=t.toLowerCase();if(i){for(var o="",a=0;a<n.length;a++)if(i.indexOf(n[a])!==-1){o="cdn"+(a+1),i.indexOf("/scripts/")===-1&&(i.indexOf("/next/")!==-1?o+="-next":i.indexOf("/beta/")!==-1&&(o+="-beta")),rl=o+(e?".mod":"");break}}}catch(c){}}()}),xh,Ih,am=O(()=>{dr(),wn(),xh=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],Ih=function(){function t(e,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=t.getDefaultConfig(e.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return s(t,"t"),t.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=30*60*1e3,e.sessionExpirationMs=24*60*60*1e3,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=Un(e.enableDebug),e.disableExceptionTracking=Un(e.disableExceptionTracking),e.disableTelemetry=Un(e.disableTelemetry),e.verboseLogging=Un(e.verboseLogging),e.emitLineDelimitedJson=Un(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=Un(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=Un(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=Un(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=Un(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=Un(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Un(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=Un(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=Un(e.isRetryDisabled),e.isCookieUseDisabled=Un(e.isCookieUseDisabled),e.isStorageUseDisabled=Un(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Un(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=Un(e.enableCorsCorrelation),e},t.prototype.addTelemetryInitializers=function(e){var n=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer(function(r){n._processLegacyInitializers(r)}),this._hasLegacyInitializers=!0),this._queue.push(e)},t.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},t.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},t.prototype.stopTrackPage=function(e,n,r,i){this.appInsightsNew.stopTrackPage(e,n,r)},t.prototype.trackPageView=function(e,n,r,i,o){var a={name:e,uri:n,properties:r,measurements:i};this.appInsightsNew.trackPageView(a)},t.prototype.trackEvent=function(e,n,r){this.appInsightsNew.trackEvent({name:e})},t.prototype.trackDependency=function(e,n,r,i,o,a,c){this.appInsightsNew.trackDependencyData({id:e,target:r,type:i,duration:o,properties:{HttpMethod:n},success:a,responseCode:c})},t.prototype.trackException=function(e,n,r,i,o){this.appInsightsNew.trackException({exception:e})},t.prototype.trackMetric=function(e,n,r,i,o,a){this.appInsightsNew.trackMetric({name:e,average:n,sampleCount:r,min:i,max:o})},t.prototype.trackTrace=function(e,n,r){this.appInsightsNew.trackTrace({message:e,severityLevel:r})},t.prototype.flush=function(e){this.appInsightsNew.flush(e)},t.prototype.setAuthenticatedUserContext=function(e,n,r){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,n,r)},t.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},t.prototype._onerror=function(e,n,r,i,o){this.appInsightsNew._onerror({message:e,url:n,lineNumber:r,columnNumber:i,error:o})},t.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,n,r){this.appInsightsNew.stopTrackEvent(e,n,r)},t.prototype.downloadAndSetup=function(e){ki("downloadAndSetup not implemented in web SKU")},t.prototype.updateSnippetDefinitions=function(e){ed(e,this,function(n){return n&&xh.indexOf(n)===-1})},t.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var n=this.trackPageView;this.trackPageView=function(o,a,c){n.apply(e,[null,o,a,c])}}var r="logPageView";typeof this.snippet[r]=="function"&&(this[r]=function(o,a,c){e.trackPageView(null,o,a,c)});var i="logEvent";return typeof this.snippet[i]=="function"&&(this[i]=function(o,a,c){e.trackEvent(o,a,c)}),this},t.prototype._processLegacyInitializers=function(e){return e.tags[oa]=this._queue,e},t}()}),Dh,sm=O(()=>{am(),Eh(),wn(),Dh=function(){function t(){}return s(t,"t"),t.getAppInsights=function(e,n){var r=new ol(e),i=n!==2;if(na(),n===2)return r.updateSnippetDefinitions(e),r.loadAppInsights(i),r;var o=new Ih(e,r);return o.updateSnippetDefinitions(e),r.loadAppInsights(i),o},t}()}),Th={};un(Th,{AppInsightsCore:()=>uu,ApplicationAnalytics:()=>zu,ApplicationInsights:()=>ol,ApplicationInsightsContainer:()=>Dh,BaseCore:()=>su,BaseTelemetryPlugin:()=>Po,CoreUtils:()=>Ms,DependenciesPlugin:()=>nl,DistributedTracingModes:()=>bi,Event:()=>_i,Exception:()=>Nr,LoggingSeverity:()=>fe,Metric:()=>Ni,NotificationManager:()=>cu,PageView:()=>Ei,PageViewPerformance:()=>Zi,PerfEvent:()=>Yo,PerfManager:()=>jc,PropertiesPlugin:()=>Xu,RemoteDependencyData:()=>Oi,Sender:()=>Gu,SeverityLevel:()=>Ha,Telemetry:()=>_h,Trace:()=>Yi,Util:()=>Pu,_InternalMessageId:()=>Y,doPerf:()=>Jo});var cm=O(()=>{Eh(),sm(),wn(),dr(),oh(),Vf(),yh(),Sh()}),um=s((t,e,n)=>_(void 0,null,function*(){let r=yield Promise.resolve().then(Vn.bind(Vn,850)),i=yield Promise.resolve().then(Vn.bind(Vn,156)),o=new r.AppInsightsCore,a=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(n){c.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[a.identifier]=l}let u=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(c,[]),o.addTelemetryInitializer(l=>{var d,h;!u||(l.ext=(d=l.ext)!=null?d:{},l.ext.utc=(h=l.ext.utc)!=null?h:{},l.ext.utc.flags=8462029)}),o}),"wc"),lm=s((t,e,n)=>_(void 0,null,function*(){let r=yield um(t,e,n);return{logEvent:(i,o)=>{try{r==null||r.track({name:i,baseData:{name:i,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements}})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},logException:(i,o)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:()=>_(void 0,null,function*(){try{r==null||r.unload()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}})}}),"yo"),dm=s(class{constructor(t,e){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t}logEvent(t,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}flush(){return _(this,null,function*(){this._telemetryClient&&(yield this._telemetryClient.flush(),this._telemetryClient=void 0)})}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=2,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=2}))}},"Ln"),Hi=s(class{constructor(t){this.vscodeAPI=t}getTelemetryLevel(){let t="telemetry",e="enableTelemetry";try{let n=this.vscodeAPI.env.telemetryConfiguration;return n.isUsageEnabled&&n.isErrorsEnabled&&n.isCrashEnabled?"on":n.isErrorsEnabled&&n.isCrashEnabled?"error":"off"}catch(n){return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(t).get(e)?"on":"off"}}static applyReplacements(t,e){for(let n of Object.keys(t))for(let r of e)r.lookup.test(n)&&(r.replacementString!==void 0?t[n]=r.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getInstance(t){return Hi._instance||(Hi._instance=new Hi(t)),Hi._instance}},"je"),fm=s(class{constructor(t,e,n,r,i,o){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),i.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(i.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=Hi.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(n=>{t.indexOf(`${n}`)===0&&(e=n)}),e}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let n={};for(let r in t)n[r]=e(r,t[r]);return n}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let t={};if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(t["common.vscodemachineid"]=this.vscodeAPI.env.machineId,t["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,t["common.vscodeversion"]=this.vscodeAPI.version,t["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",t["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:t["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return t}anonymizeFilePaths(t,e){let n;if(t==null)return"";let r=[];this.vscodeAPI.env.appRoot!==""&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of r)for(;(n=l.exec(t))&&n;)o.push([n.index,l.lastIndex]);let a=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,c=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,u=0;for(i="";(n=c.exec(t))&&n;)n[0]&&!a.test(n[0])&&o.every(([l,d])=>n.index<l||n.index>=d)&&(i+=t.substring(u,n.index)+"<REDACTED: user-file-path>",u=c.lastIndex);u<t.length&&(i+=t.substr(u))}for(let o of r)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e={};for(let n of Object.keys(t)){let r=t[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,o=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,a=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;o.test(r.toLowerCase())?e[n]="<REDACTED: secret>":i.test(r)?e[n]="<REDACTED: email>":a.test(r)?e[n]="<REDACTED: token>":e[n]=r}return e}get telemetryLevel(){switch(Hi.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(t,e,n,r,i){if((this.userOptIn||i)&&t!==""){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:e,measurements:n})}}sendTelemetryEvent(t,e,n){this.internalSendTelemetryEvent(t,e,n,!0,!1)}sendRawTelemetryEvent(t,e,n){this.internalSendTelemetryEvent(t,e,n,!1,!1)}sendDangerousTelemetryEvent(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(t,e,n,r,!0)}internalSendTelemetryErrorEvent(t,e,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&t!==""){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:e,measurements:n})}}sendTelemetryErrorEvent(t,e,n){this.internalSendTelemetryErrorEvent(t,e,n,!0,!1)}sendDangerousTelemetryErrorEvent(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(t,e,n,r,!0)}internalSendTelemetryException(t,e,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&t){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},this.telemetryAppender.logException(t,{properties:e,measurements:n})}}sendTelemetryException(t,e,n){this.internalSendTelemetryException(t,e,n,!0,!1)}sendDangerousTelemetryException(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(t,e,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},"_n"),hm=s((t,e)=>_(void 0,null,function*(){let n;try{let r=yield Promise.resolve().then(()=>(cm(),Th)),i;t&&t.indexOf("AIF-")===0&&(i="https://vscode.vortex.data.microsoft.com/collect/v1"),n=new r.ApplicationInsights({config:{instrumentationKey:t,endpointUrl:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),n.loadAppInsights(),i&&fetch(i).catch(()=>n=void 0)}catch(r){return Promise.reject(r)}return{logEvent:(r,i)=>{let o=dt(dt({},i==null?void 0:i.properties),i==null?void 0:i.measurements);e!=null&&e.length&&Hi.applyReplacements(o,e),n==null||n.trackEvent({name:r},o)},logException:(r,i)=>{let o=dt(dt({},i==null?void 0:i.properties),i==null?void 0:i.measurements);e!=null&&e.length&&Hi.applyReplacements(o,e),n==null||n.trackException({exception:r,properties:o})},flush:()=>_(void 0,null,function*(){n==null||n.flush()})}}),"Al"),gm=s(class extends fm{constructor(t,e,n,r,i){let o=s(c=>hm(c,i),"o");Hi.shouldUseOneDataSystemSDK(n)&&(o=s(c=>lm(c,f),"o"));let a=new dm(n,o);n&&(n.indexOf("AIF-")===0||Hi.shouldUseOneDataSystemSDK(n))&&(r=!0),super(t,e,a,{release:navigator.appVersion,platform:"web",architecture:"web"},f,r)}},"go");/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */const pm="Type of classified event does not match event properties",al=s(class{constructor(t){this.context=t,this.sharedProperties={},al._instance=this,this.reporter=new gm(t.extension.id,t.extension.packageJSON.version,al.ingestionKey,!0)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==pm&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";f.env.appHost==="github.dev"&&(ce.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},f.commands.executeCommand(e,t).then(n=>{},n=>{ce.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let qa=al;qa.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function Ka(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}s(Ka,"hrtime");let sl=0;function vm(){return sl===Number.MAX_SAFE_INTEGER&&(sl=0),++sl}s(vm,"getNextInstanceId");const Oo=s(class{constructor(t,e,...n){this.context=t,this.instance=`[${vm().toString().padStart(5)}] `;var r,i,o,a,c,u;let l;if(typeof(e==null?void 0:e.log)=="boolean"?l=e.log?{}:void 0:l=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:mn.Info,this.time=Ka(),l){if(!ce.enabled(this.logLevel))return;n.length?ec(this.logLevel,`${this.instance}${(o=l.prefix)!=null?o:""}${t}${(a=l.message)!=null?a:""}`,...n):ec(this.logLevel,`${this.instance}${(c=l.prefix)!=null?c:""}${t}${(u=l.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:Ka(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=Ka()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,o,a,c,u,l;if(!ce.enabled(this.logLevel))return;let d="";if(this.step){const[C,v]=Ka(this.step.time),m=C*1e3+Math.floor(v/1e6);d=`${this.step.label?`${this.step.label} took `:""}${m} ms`}if(!n){ec(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${d?` ${d}`:""}${(o=e==null?void 0:e.suffix)!=null?o:""}`);return}const[h,g]=Ka(this.time),p=h*1e3+Math.floor(g/1e6);ec(p>500?mn.Warn:this.logLevel,`${this.instance}${(a=e==null?void 0:e.prefix)!=null?a:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${p} ms${d?` (${d})`:""}${(l=e==null?void 0:e.suffix)!=null?l:""}`)}static start(t,e,...n){var r;(r=Oo.watches.get(t))==null||r.log(),Oo.watches.set(t,new Oo(t,e,...n))}static log(t,e){var n;(n=Oo.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Oo.watches.get(t))==null||n.stop(e),Oo.watches.delete(t)}},"_Stopwatch");let Fn=Oo;Fn.watches=new Map;function ec(t,e,...n){switch(t){case mn.Warn:ce.warn(e,...n);break;case mn.Info:ce.log(e,...n);break;default:ce.debug(e,...n);break}}s(ec,"log");class Ph{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=f.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),mt.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(o=>{ce.error(o)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=A(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const o=i();this.services.set(n,{service:o});break}}}}repositoryClosed(e){const n=A(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(A(e.uri)))}}s(Ph,"CodeNavigationServices");const Ga=globalThis.fetch;async function mm(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new CancellationError:i}}s(mm,"fetchWithCancellation");async function iy(t,e,n,r,i){if(n===0)throw new CancellationError;const o=new CancellationTokenSource;r.onCancellationRequested(()=>o.cancel());try{const a=await mm(t,e,o.token);if(a.body){const c=[];let u=0;const l=a.body.getReader();let d=3;for(;;){let{done:h,value:g}=await l.read();if(h){const C=c.reduce((b,w)=>b+w.length,0),v=new Uint8Array(C);let m=0;for(const b of c)v.set(b,m),m+=b.length;return v}g&&(c.push(g),u+=g.length);const p=Math.floor(u/(1024*1024));if(d<p){d=p;const C={message:p+" MB"};i.report(C)}if(n!==void 0&&u>n)throw l.cancel(),o.cancel(),new Error("LIMIT_HIT")}}}catch(a){throw r.isCancellationRequested?new CancellationError:a}throw new CancellationError}s(iy,"fetchUInt8ArrayWithMaxSizeAndCancellation");/*! (c) Andrea Giammarchi - ISC */var tc={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;tc.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,o=e.defineProperty,a=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},d={append:function(w,P){C(this._ungap,w,P)},delete:function(w){delete this._ungap[w]},get:function(w){return this.has(w)?this._ungap[w][0]:null},getAll:function(w){return this.has(w)?this._ungap[w].slice(0):[]},has:function(w){return w in this._ungap},set:function(w,P){this._ungap[w]=[n(P)]},forEach:function(w,P){var F=this;for(var R in F._ungap)F._ungap[R].forEach(te,R);function te(ze){w.call(P,ze,n(R),F)}s(te,"invoke")},toJSON:function(){return{}},toString:function(){var w=[];for(var P in this._ungap)for(var F=m(P),R=0,te=this._ungap[P];R<te.length;R++)w.push(F+"="+m(te[R]));return w.join("&")}};for(var h in d)o(g.prototype,h,{configurable:!0,writable:!0,value:d[h]});tc.URLSearchParams=g;function g(w){var P=i(null);switch(o(this,"_ungap",{value:P}),!0){case!w:break;case typeof w=="string":w.charAt(0)==="?"&&(w=w.slice(1));for(var F=w.split("&"),R=0,te=F.length;R<te;R++){var ze=F[R],ge=ze.indexOf("=");-1<ge?C(P,v(ze.slice(0,ge)),v(ze.slice(ge+1))):ze.length&&C(P,v(ze),"")}break;case r(w):for(var R=0,te=w.length;R<te;R++){var ze=w[R];C(P,ze[0],ze[1])}break;case"forEach"in w:w.forEach(p,P);break;default:for(var Et in w)C(P,Et,w[Et])}}s(g,"URLSearchParams");function p(w,P){C(this,P,w)}s(p,"addEach");function C(w,P,F){var R=r(F)?F.join(","):F;P in w?w[P].push(R):w[P]=[R]}s(C,"appendTo");function v(w){return decodeURIComponent(w.replace(c,"%25").replace(u," "))}s(v,"decode");function m(w){return encodeURIComponent(w).replace(a,b)}s(m,"encode");function b(w){return l[w]}s(b,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=s(function(i,o){var a=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=a.getAll(u)).forEach(function(l){i.call(o,l,u,a)})})},"forEach")),"keys"in t||(t.keys=s(function(){return n(this,function(i,o){this.push(o)})},"keys")),"values"in t||(t.values=s(function(){return n(this,function(i,o){this.push(i)})},"values")),"entries"in t||(t.entries=s(function(){return n(this,function(i,o){this.push([o,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=s(function(){for(var i=this.entries(),o=i.next(),a=o.done,c=[],u=Object.create(null),l,d,h;!a;)h=o.value,d=h[0],c.push(d),d in u||(u[d]=[]),u[d].push(h[1]),o=i.next(),a=o.done;for(c.sort(),l=0;l<c.length;l++)this.delete(c[l]);for(l=0;l<c.length;l++)d=c[l],this.append(d,u[d].shift())},"sort"));function n(r,i){var o=[];return r.forEach(i,o),e?o[Symbol.iterator]():{next:function(){var a=o.shift();return{done:a===void 0,value:a}}}}s(n,"iterator"),function(r){var i=r.defineProperty,o=r.getOwnPropertyDescriptor,a=s(function(h){function g(v,m){t.append.call(this,v,m),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}s(g,"append");function p(v){t.delete.call(this,v),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}s(p,"del");function C(v,m){t.set.call(this,v,m),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}return s(C,"set"),function(v,m){return v.append=g,v.delete=p,v.set=C,i(v,"_usp",{configurable:!0,writable:!0,value:m})}},"createSearchParamsPollute"),c=s(function(h){return function(g,p){return i(g,"_searchParams",{configurable:!0,writable:!0,value:h(p,g)}),p}},"createSearchParamsCreate"),u=s(function(h){var g=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=g},"updateSearchParams"),l=s(function(h,g){if(!(h instanceof g))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+g.name)},"verifySearchParams"),d=s(function(h){var g=h.prototype,p=o(g,"searchParams"),C=o(g,"href"),v=o(g,"search"),m;!p&&v&&v.set&&(m=c(a(v)),r.defineProperties(g,{href:{get:function(){return C.get.call(this)},set:function(b){var w=this._searchParams;C.set.call(this,b),w&&u(w)}},search:{get:function(){return v.get.call(this)},set:function(b){var w=this._searchParams;v.set.call(this,b),w&&u(w)}},searchParams:{get:function(){return l(this,h),this._searchParams||m(this,new URLSearchParams(this.search.slice(1)))},set:function(b){l(this,h),m(this,b)}}}))},"upgradeClass");try{d(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&d(URL)}catch(h){}}(Object)})(tc.URLSearchParams.prototype,Object);const Rh=tc.URLSearchParams;var nc,ym=new Uint8Array(16);function wm(){if(!nc&&(nc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nc(ym)}s(wm,"rng");const Cm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sm(t){return typeof t=="string"&&Cm.test(t)}s(Sm,"validate");const bm=Sm;for(var yr=[],cl=0;cl<256;++cl)yr.push((cl+256).toString(16).substr(1));function _m(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(yr[t[e+0]]+yr[t[e+1]]+yr[t[e+2]]+yr[t[e+3]]+"-"+yr[t[e+4]]+yr[t[e+5]]+"-"+yr[t[e+6]]+yr[t[e+7]]+"-"+yr[t[e+8]]+yr[t[e+9]]+"-"+yr[t[e+10]]+yr[t[e+11]]+yr[t[e+12]]+yr[t[e+13]]+yr[t[e+14]]+yr[t[e+15]]).toLowerCase();if(!bm(n))throw TypeError("Stringified UUID is invalid");return n}s(_m,"stringify");const Em=_m;function xm(t,e,n){t=t||{};var r=t.random||(t.rng||wm)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Em(r)}s(xm,"v4");const Ah=xm,Wt=de.loadMessageBundle(),ul=60,ll=ul*60,Qa=ll*24,kh=Qa*7,Mh=Qa*30,Fh=Qa*365;function pa(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return Wt("date.fromNow.in","in {0}",pa(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.short.ago","secs ago"):Wt("date.fromNow.seconds.ago","A few seconds ago"):(e==null?void 0:e.short)?Wt("date.fromNow.now.short","now"):Wt("date.fromNow.now","Just now");let r;return n<ul?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.singular.short.ago","{0} sec ago",r):Wt("date.fromNow.seconds.singular.ago","{0} second ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.seconds.plural.short.ago","{0} secs ago",r):Wt("date.fromNow.seconds.plural.ago","{0} seconds ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.singular.short","{0} sec",r):Wt("date.fromNow.seconds.singular","{0} second",r):(e==null?void 0:e.short)?Wt("date.fromNow.seconds.plural.short","{0} secs",r):Wt("date.fromNow.seconds.plural","{0} seconds",r)):n<ll?(r=Math.floor(n/ul),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.minutes.singular.short.ago","{0} min ago",r):Wt("date.fromNow.minutes.singular.ago","{0} minute ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.minutes.plural.short.ago","{0} mins ago",r):Wt("date.fromNow.minutes.plural.ago","{0} minutes ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.minutes.singular.short","{0} min",r):Wt("date.fromNow.minutes.singular","{0} minute",r):(e==null?void 0:e.short)?Wt("date.fromNow.minutes.plural.short","{0} mins",r):Wt("date.fromNow.minutes.plural","{0} minutes",r)):n<Qa?(r=Math.floor(n/ll),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.hours.singular.short.ago","{0} hr ago",r):Wt("date.fromNow.hours.singular.ago","{0} hour ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.hours.plural.short.ago","{0} hrs ago",r):Wt("date.fromNow.hours.plural.ago","{0} hours ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.hours.singular.short","{0} hr",r):Wt("date.fromNow.hours.singular","{0} hour",r):(e==null?void 0:e.short)?Wt("date.fromNow.hours.plural.short","{0} hrs",r):Wt("date.fromNow.hours.plural","{0} hours",r)):n<kh?(r=Math.floor(n/Qa),(e==null?void 0:e.ago)?r===1?Wt("date.fromNow.days.singular.ago","{0} day ago",r):Wt("date.fromNow.days.plural.ago","{0} days ago",r):r===1?Wt("date.fromNow.days.singular","{0} day",r):Wt("date.fromNow.days.plural","{0} days",r)):n<Mh?(r=Math.floor(n/kh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.weeks.singular.short.ago","{0} wk ago",r):Wt("date.fromNow.weeks.singular.ago","{0} week ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.weeks.plural.short.ago","{0} wks ago",r):Wt("date.fromNow.weeks.plural.ago","{0} weeks ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.weeks.singular.short","{0} wk",r):Wt("date.fromNow.weeks.singular","{0} week",r):(e==null?void 0:e.short)?Wt("date.fromNow.weeks.plural.short","{0} wks",r):Wt("date.fromNow.weeks.plural","{0} weeks",r)):n<Fh?(r=Math.floor(n/Mh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.months.singular.short.ago","{0} mo ago",r):Wt("date.fromNow.months.singular.ago","{0} month ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.months.plural.short.ago","{0} mos ago",r):Wt("date.fromNow.months.plural.ago","{0} months ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.months.singular.short","{0} mo",r):Wt("date.fromNow.months.singular","{0} month",r):(e==null?void 0:e.short)?Wt("date.fromNow.months.plural.short","{0} mos",r):Wt("date.fromNow.months.plural","{0} months",r)):(r=Math.floor(n/Fh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.years.singular.short.ago","{0} yr ago",r):Wt("date.fromNow.years.singular.ago","{0} year ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.years.plural.short.ago","{0} yrs ago",r):Wt("date.fromNow.years.plural.ago","{0} years ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.years.singular.short","{0} yr",r):Wt("date.fromNow.years.singular","{0} year",r):(e==null?void 0:e.short)?Wt("date.fromNow.years.plural.short","{0} yrs",r):Wt("date.fromNow.years.plural","{0} years",r))}s(pa,"fromNow");var Lh,Ir;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ir||(Ir={}));class Nh{constructor(){this[Lh]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Ir.None){const r=this._map.get(e);if(!!r)return n!==Ir.None&&this.touch(r,n),r.value}set(e,n,r=Ir.None){let i=this._map.get(e);if(i)i.value=n,r!==Ir.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ir.None:this.addItemLast(i);break;case Ir.First:this.addItemFirst(i);break;case Ir.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(Lh=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ir.First&&n!==Ir.Last)){if(n===Ir.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ir.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}s(Nh,"LinkedMap");class no extends Nh{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ir.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ir.None)}set(e,n){return super.set(e,n,Ir.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}s(no,"LRUCache");class Oh{constructor(e){this.menuItem=e}get label(){return`${this.menuItem.icon?`${this.menuItem.icon} `:""}${this.menuItem.title}`}get description(){return this.menuItem.extension.builtin?"Built-in":this.menuItem.extension.name||this.menuItem.extension.id}async execute(e){return void await f.commands.executeCommand(this.menuItem.command,e)}}s(Oh,"ContinueOnCommandQuickPickItem");var dl;(function(t){async function e(n,r,i){const o=Im(n).map(u=>new Oh(u)),a=f.window.createQuickPick(),c=[];try{return await new Promise(l=>{c.push(a.onDidHide(()=>l(void 0)),a.onDidAccept(()=>{if(a.activeItems.length!==0){const[d]=a.activeItems;l(d)}})),a.title=i,a.placeholder=r,a.items=o,a.show()})}finally{a.dispose(),c.forEach(u=>void u.dispose())}}s(e,"show"),t.show=e})(dl||(dl={}));function Im(t){var e,n,r,i,o;const a=new Map,[,c]=t.split(".");for(const l of f.extensions.all){const{name:d,displayName:h,contributes:g}=l.packageJSON;if(!g)continue;const p=(n=(e=g.virtualWorkspaces)==null?void 0:e.menus)==null?void 0:n.continueOn;if(p==null?void 0:p.length){const C=new Map(((r=g.commands)!=null?r:[]).map(v=>[v.command,v]));for(const v of p){if(!v.command)continue;if(a.has(v.command)){ce.warn(`Duplicate 'continueOn' menu command: ${v.command}`);continue}const m=C.get(v.command);if(!m){ce.warn(`Unable to find 'continueOn' menu command: ${v.command}`);continue}if(!Dm(v.when))continue;const b=(o=(i=v.group)==null?void 0:i.lastIndexOf("@"))!=null?o:-1;a.set(v.command,{extension:{id:d,name:h,builtin:d===c},command:m.command,title:m.title,icon:typeof m.icon=="string"?m.icon:void 0,group:b>0?v.group.substr(0,b):v.group,order:b>0?Number(v.group.substr(b+1)):0,category:m.category})}}}function u(l,d){const h=l.group,g=d.group;if(h!==g){if(!h)return 1;if(!g||h==="navigation")return-1;if(g==="navigation")return 1;const p=h.localeCompare(g);if(p!==0)return p}return l.order<d.order?-1:l.order>d.order?1:l.title.localeCompare(d.title)}return s(u,"compareMenuItems"),[...a.values()].sort(u)}s(Im,"getContinueOnContributions");function Dm(t){return t?t.split("&&").every(e=>{const n=/^(?:(!)?(\S+)|(\S+)\s?(==|!=|=~)\s?(\S+))$/.exec(e.trim());if(!n)return!0;const[,r,i,o,a,c]=n;if(i){if(i==="false")return!1;if(!Ge(i))return!0;const u=Ve(i);return r?!u:u}if(o&&a&&c)switch(a){case"==":return!Ge(o)||!Ge(c)||Ve(o)==Ve(c);case"!=":return!Ge(o)||!Ge(c)||Ve(o)!=Ve(c);case"=~":{if(!Ge(o))return!0;const u=Ve(o);try{return new RegExp(c.slice(1,-1)).test(String(u!=null?u:""))}catch{return!1}}}return!0}):!0}s(Dm,"evaluateWhenClause");function Tm(t){return t!==void 0&&typeof t.then=="function"}s(Tm,"isPromise");const Pm="";function Rm(...t){if(t.length===1){const e=t[0];return e===void 0?Pm:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof f.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}s(Rm,"defaultResolver");function Bi(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const o=`$gate$${n}`;r.value=function(...a){const c=a.length===0?o:`${o}$${(t!=null?t:Rm)(...a)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let l;try{if(l=i.apply(this,a),l==null||!Tm(l))return l;this[c]=u=l.then(d=>(this[c]=void 0,d)).catch(d=>{throw this[c]=void 0,d})}catch(d){throw this[c]=void 0,d}}return u}}}s(Bi,"gate");var Am=Object.defineProperty,km=Object.getOwnPropertyDescriptor,Xa=s((t,e,n,r)=>{for(var i=r>1?void 0:r?km(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&Am(e,n,i),i},"__decorateClass");const Kr=de.loadMessageBundle();class Uo{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=Kr("unable to open repo confirm","Open Repository");await f.window.showErrorMessage(Kr("repository not valid","The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&f.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return f.window.showErrorMessage(Kr("github 500 error notification","GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),Kr("ok","OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void f.window.showErrorMessage(Kr("401 error notification","The provided credentials are either invalid or expired."),Kr("ok","OK"));const n=Kr("401 error notification confirm","Reauthenticate");await f.window.showErrorMessage(Kr("401 error notification with reauth","The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void f.window.showErrorMessage(Kr("403 error notification","The provided credentials do not have the required access."),Kr("ok","OK"));const n=Kr("403 error notification confirm","Reauthenticate"),r=Kr("403 error notification with reauth","The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await f.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=Mm.get(e.id);if(n&&f.extensions.getExtension(n[0])===void 0){const r=Kr("provider extension missing install","Install");if(await f.window.showInformationMessage(Kr("provider extension not installed","Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await f.commands.executeCommand("workbench.extensions.installExtension",n[0]),await f.commands.executeCommand("workbench.action.reloadWindow")}}}s(Uo,"Messages"),Xa([Bi(()=>"")],Uo.prototype,"showRepositoryNotValidMessage",1),Xa([Bi(()=>"")],Uo.prototype,"showGitHubStatus500Message",1),Xa([Bi(()=>"")],Uo.prototype,"showStatus401Message",1),Xa([Bi(()=>"")],Uo.prototype,"showStatus403Message",1),Xa([Bi()],Uo.prototype,"showProviderNotFoundMessage",1);const Mm=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),rc=new Uo,ic=de.loadMessageBundle();async function xi(t,e,n){var r,i,o,a,c;if(qa.instance.publicLog2("openWorkspace",{location:e.location}),e.location===$.AddToWorkspace){const l=(i=(r=f.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void f.workspace.updateWorkspaceFolders(l,0,{uri:e.uri,name:e.name})}if(e.location===$.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const l=await t.getWorkspaceProvidersWithChanges();if(l.length){const d={title:ic("continue","Continue")},h={title:ic("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(Tn?ic("open folder uncommitted changes web",`You have uncommitted changes.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,l.map(p=>p.name).join(", ")):ic("open folder uncommitted changes",`You have uncommitted changes.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,l.map(p=>p.name).join(", ")),{modal:!0},d,h)!==d){qa.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=f.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===$.CurrentWindow&&u===void 0&&((o=f.workspace.workspaceFolders)==null?void 0:o.length)===1&&f.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((a=Dc())==null?void 0:a.openPendingFiles(e.uri,e.filesToOpen)):await((c=Dc())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),qa.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void f.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===$.NewWindow,forceLocalWindow:u})}s(xi,"openWorkspace");const On=de.loadMessageBundle(),Uh="vscode.experimental.editSession.continue";function Fm(t,e,n){let r=!1;async function i(){var a;if(await Br(t,void 0),!r){const u=t.getRemoteSourceProviders(),l=await((a=f.extensions.getExtension("vscode.git-base"))==null?void 0:a.activate()),d=l==null?void 0:l.getAPI(1);if(!d)return;u.map(h=>d.registerRemoteSourceProvider(h)),r=!0}const c=await f.commands.executeCommand("git-base.api.getRemoteSources",{title:On("open remote repository","Open Remote Repository"),placeholder:On("open repo placeholder","Enter a remote url, or select a remote provider"),showRecentSources:!0,providerLabel:u=>{var l;return(l=u.label)!=null?l:On("open repo from","Open Repository from {0}",u.name)},urlLabel:u=>{const l=t.canOpenRemoteUrl(u);if(l){const{provider:d,urlType:h}=l;switch(h){case lt.Branch:return On("remote url picker open branch","Open Branch from {0} Repository",d.name);case lt.Tag:return On("remote url picker open tag","Open Tag from {0} Repository",d.name);case lt.Commit:return On("remote url picker open commit","Open Commit from {0} Repository",d.name);case lt.File:return On("remote url picker open file","Open File from {0} Repository",d.name);case lt.PullRequest:return On("remote url picker open pull request","Open Pull Request from {0} Repository",d.name);default:return On("remote url picker open repository","Open {0} Repository",d.name)}}return On("remote url picker open unknown","Enter a Remote Url")}});if(!c){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{const l=f.workspace.getConfiguration("window").get("openFoldersInNewWindow")==="on"?$.NewWindow:$.CurrentWindow,d=await t.createWorkspaceForRemoteUrl(c,void 0,l);if(!d){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});const h=On("install","Install");await f.window.showInformationMessage(On("unable to open url","Extension 'GitHub Repositories' is not installed or enabled. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},h)===h&&(await f.commands.executeCommand("workbench.extensions.installExtension","github.remotehub"),await f.commands.executeCommand("workbench.action.reloadWindow"))}if(!d)return;await xi(t,d)}catch(u){if(n.sendException(u),be.asVirtualProviderErrorCode(u)===ne.InvalidCredentialsError){const{action:l}=u;if(l){rc.showStatus401Message(()=>l());return}}ce.error(u)}}s(i,"openRepository");async function o(a,c,u){if(u==null?void 0:u.workspaceFolder){const d=t.getRepository(u.workspaceFolder,c);if(d!==void 0)return d}const l=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(l.length!==0){if(l.length>1){const d=await f.window.showQuickPick(l.map(h=>({label:h.name,description:h.provider.name,repository:h})),{placeHolder:a});return d?d.repository:void 0}return l[0]}}return s(o,"getRepository"),[f.commands.registerCommand("remoteHub.openRepository",()=>(n.publicLog2("command.openRepository"),i())),f.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(n.publicLog2("command.continueOn.openRepository"),i())),f.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),f.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),f.commands.registerCommand("remoteHub.continueOn",async()=>{var a;const c=await o(On("continue on choose repository placeholder","Choose which repository to continue working on elsewhere"));if(c===void 0)return;n.publicLog2("command.continueOn");const u=await dl.show(e,On("continue on placeholder","Choose how you would like to continue working"),On("continue on title","Continue '{0}' on",c.name));if(!u){n.publicLog2("command.continueOn.abort",{reason:"abandoned"});return}if(await t.changeStoreHasChanges(c.uri)&&f.workspace.getConfiguration("workbench.experimental.editSessions").get("enabled")!==!0){const d={title:On("continue","Continue")},h={title:On("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(On("continue on uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from elsewhere.`),{modal:!0},d,h)!==d){n.publicLog2("command.continueOn.abort",{reason:"abandoned uncommitted changes prompt"});return}}const{HEAD:l}=await c.getMetadata();if(((a=l.branch)==null?void 0:a.remote)!==void 0){const h=t.getRemoteUri(c.provider.id,{repo:l.branch.remote.repo}).toString(!0),g=await t.createWorkspaceForRemoteUrl(h);if(!g)throw new Error(`Unable to create workspace for URL: ${h}`);await u.execute({provider:c.provider,workspaceFolder:g.uri,name:l.branch.remote.name,url:h,ref:l.branch.name})}else{const d=t.getRemoteUri(c.provider.id,{repo:c.id});await u.execute({provider:c.provider,workspaceFolder:c.uri,name:c.name,url:d==null?void 0:d.toString(!0),ref:l.name})}}),f.commands.registerCommand("remoteHub.openOnDesktop",async a=>{if(!Tn)return;const c=await o(On("continue on desktop choose repository placeholder","Choose which repository to open on the desktop"),void 0,a);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u===void 0)return;n.publicLog2("command.openOnDesktop");const l=f.Uri.parse(`${f.env.uriScheme}://${e}/open?url=${encodeURIComponent(u.toString(!0))}`);try{await f.commands.executeCommand(Uh,l)}catch(d){f.env.openExternal(l)}}),f.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Tn)return;const a=await o(On("continue on web choose repository placeholder","Choose which repository to open on the web"));if(a===void 0)return;const c=await t.getBestRemoteUri(a.uri);if(c===void 0)return;const u=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${u}/${c.authority}`})}),f.commands.registerCommand("remoteHub.openOnWeb",async a=>{if(Tn)return;const c=await o(On("continue on web choose repository placeholder","Choose which repository to open on the web"),void 0,a);if(c===void 0)return;const u=await t.getBestRemoteUri(c.uri);if(u===void 0)return;const l=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=u.with({authority:`${l}/${u.authority}`});n.publicLog2("command.openOnWeb");try{await f.commands.executeCommand(Uh,d)}catch(h){f.env.openExternal(d)}}),f.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const a=await o(On("open on remote choose repository placeholder","Choose which repository to open on the remote"));if(!a)return;const c={provider:a.provider,repo:a.id};return f.commands.executeCommand("remoteHub.openOnRemote",c)}),f.commands.registerCommand("remoteHub.openOnRemote",async a=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=a,l=t.getRemoteUri(c.id,u);if(l){await f.env.openExternal(l);return}f.window.showErrorMessage(On("open on remote command provider not supported","Unable to open the resource on {0}",a.provider.name))}),f.commands.registerCommand("remoteHub.clone",async a=>{const c=await o(On("clone placeholder","Choose which repository to clone"),void 0,a);if(c!==void 0){if(n.publicLog2("command.clone"),a===void 0&&await t.changeStoreHasChanges(c.uri)){const u={title:On("continue","Continue")},l={title:On("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(On("clone uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},u,l)!==u){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}await t.clone(c.uri)}}),f.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),f.commands.registerCommand("remoteHub.enableDebugLogging",()=>mt.updateEffective("logLevel",mn.Debug)),f.commands.registerCommand("remoteHub.disableDebugLogging",()=>mt.updateEffective("logLevel",mn.Warn)),f.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),f.commands.registerCommand("remoteHub.setContext",async(a,c)=>{if(!a.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await _t(a,c)}),f.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const a={title:On("continue on","Continue Working On...")};await f.window.showInformationMessage(On("notebook continue on","Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},a)===a&&await f.commands.executeCommand("remoteHub.continueOn")}),f.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Tn?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}s(Fm,"registerCommands");function Ii(t){return t}s(Ii,"command");async function Hh(t,e){return f.commands.executeCommand(t,e)}s(Hh,"executeCommand");function Lm(t,e){return t.reduce((r,i)=>{const o=e(i),a=r.get(o);return a===void 0?r.set(o,[i]):a.push(i),r},new Map)}s(Lm,"groupBy");function oy(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}s(oy,"isBinary");function Nm(t,e,n=r=>r){return[...t.reduce((i,o)=>{const a=e(o),c=i.get(a);if(c===void 0)i.set(a,o);else{const u=n(c,o);u!==void 0&&i.set(a,u)}return i},new Map).values()]}s(Nm,"uniqueBy");function oc(t,e){switch(t){case H.Branch:case H.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case H.Tag:return"$(tag)";case H.Commit:return"$(git-commit)"}}s(oc,"headTypeToCodicon");function Bh(t){switch(t){case z.Active:return"$(layers-active)";case z.Match:return"$(layers-dot)";case z.Indexed:return"$(layers)"}}s(Bh,"indexTypeToCodicon");function Om(t,e){switch(t){case H.Branch:case H.RemoteBranch:return e?new f.ThemeIcon("git-pull-request"):new f.ThemeIcon("git-branch");case H.Tag:return new f.ThemeIcon("tag");case H.Commit:return new f.ThemeIcon("git-commit")}}s(Om,"headTypeToThemeIcon");function*Um(t,e){for(const n of t)yield*e(n)}s(Um,"flatMap");function*Hm(t,e){for(const n of t)e(n)&&(yield n)}s(Hm,"filter");function*ay(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}s(ay,"filterMap");function sy(t,e){for(const n of t)if(e(n))return n}s(sy,"find");function Bm(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const o=i.value.toString();if(i=r.next(),i.done){n+=o;break}n+=o,n+=e}return n}s(Bm,"join");function*fl(t,e){for(const n of t)yield e(n)}s(fl,"map");function cy(t,e){for(const n of t)if(e(n))return!0;return!1}s(cy,"some");function*uy(...t){for(const e of t)for(const n of e)yield n}s(uy,"union");function*Wm(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}s(Wm,"unique");const $m="";function zm(...t){if(t.length===1){const e=t[0];return e===void 0?$m:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof f.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}s(zm,"serialize_defaultResolver");function ac(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const o=`$serialize$${n}`;r.value=function(...a){const c=a.length===0?o:`${o}$${(t!=null?t:zm)(...a)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const l=s(()=>i.apply(this,a),"run");return u===void 0?u=l():u=u.then(l,l),this[c]=u,u}}}s(ac,"serialize");let hl=0;function jm(){return hl===Number.MAX_SAFE_INTEGER&&(hl=0),String(++hl)}s(jm,"getNextLockId");class Wh{constructor(){this.id=jm()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}s(Wh,"Lock");class Ja{constructor(e){this.lock=new Wh,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new Fn(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:mn.Debug});let o;await this.lock.synchronize(async()=>{this.writer&&await this.writer,o=new Promise(a=>r=a),this.readers.add(o)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),o!==void 0&&this.readers.delete(o),r()}}async synchronizeWrite(e,n){let r;const i=new Fn(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:mn.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const o=[...this.readers];this.readers.clear(),await Promise.all(o)}this.writer=new Promise(o=>r=o)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}s(Ja,"ReaderWriterLock");class $h{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Ja(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Ja(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}s($h,"KeyedReaderWriterLock");const ii=de.loadMessageBundle(),Ya=s(class{constructor(t,e,n,r){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this._onDidChange=new f.EventEmitter,this.cache=new Map,this.lock=new Ja("WorkspaceRepositories"),this.disposable=f.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await f.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void f.window.showTextDocument(t)}onChangeStoreChanged(t){const e=Nm(t.map(n=>n.rootUri),n=>A(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=A(t);e=e.filter(r=>A(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Ya.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${A(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),o=await i.getChanges(r.uri);if(o.length!==0){const a={title:ii("remove remote repo prompt confirm","Yes")},c={title:ii("remove remote repo prompt cancel","No"),isCloseAffordance:!0};if(await f.window.showWarningMessage(o.length===1?ii("remove remote repo prompt file changed",`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):ii("remove remote repo prompt files changes",`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,o.length),{modal:!0},a,c)!==a)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Ya.storageKey,this.toStorage(e))}catch(a){throw ce.error(a,"Failed to save workspace repositories"),a}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},o]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),a=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${A(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(o==null?void 0:o.type)&&z.hasIndex(o.type)?{type:o.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:qm(a),timestamp:Date.now()})}try{await this.storageService.store(Ya.storageKey,this.toStorage(e))}catch(n){throw ce.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?f.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return ce.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Ya.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let zh=Ya;zh.storageKey="workspaceRepositories",zh.storageSchemaVersion=1;function jh(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}s(jh,"hasChanges");function Vm(t){return jh(t.changes)}s(Vm,"hasUncommittedChanges");function qm(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case I.Created:e++;break;case I.Changed:n++;break;case I.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}s(qm,"toChangesSummary");function gl(t,{compact:e=!0,preamble:n,separator:r=", ",short:i=!1,single:o=!1}={}){if(!jh(t))return ii("no changes","Everything up to date");const{added:a,changed:c,deleted:u}=t;if(o){const d=a+c+u;return d===1?ii("summary change","{0} change",d):ii("changes changes","{0} changes",d)}let l=`${n!=null?n:""}`;return(a||!e)&&(l+=i?`+${a}`:a===1?ii("file added","{0} file added",a):ii("files added","{0} files added",a),(c||u||!e)&&(l+=r)),(c||!e)&&(l+=i?`~${c}`:c===1?ii("file changed","{0} file changed",c):ii("files changed","{0} files changed",c),(u||!e)&&(l+=r)),(u||!e)&&(l+=i?`-${u}`:u===1?ii("file deleted","{0} file deleted",u):ii("files deleted","{0} files deleted",u)),l}s(gl,"formatChangesSummary");class Ur extends Error{constructor(e){var n;const r=typeof e=="string"?e:Hr.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,Ur)}}s(Ur,"ProviderNotFoundError");class Vh{constructor(e,n,r,i,o){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:o.id,name:o.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}s(Vh,"VirtualRepository");var Di;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(Di||(Di={}));var Dn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Dn||(Dn={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}s(e,"hasIndex"),t.hasIndex=e}(Dn||(Dn={}));var pl;(function(t){function e(n){return n!==void 0&&n.type===3}s(e,"isActive"),t.isActive=e})(pl||(pl={}));var oi;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(oi||(oi={}));var Ho;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(W(r.idx))return{type:2,sha:r.idx}}}s(e,"decode"),t.decode=e})(Ho||(Ho={}));var ly=Vn(724),Km=Object.defineProperty,Gm=Object.getOwnPropertyDescriptor,Qm=s((t,e,n,r)=>{for(var i=r>1?void 0:r?Gm(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&Km(e,n,i),i},"providers_decorateClass");const Xm=de.loadMessageBundle(),qh="remoteHub.metadata.migration.invalidTagSha",Gr=s(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new f.EventEmitter,this._onDidChangeChangeStore=new f.EventEmitter,this._onDidChangeWorkspaceRepositories=new f.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new f.EventEmitter,this._onDidChangeRepository=new f.EventEmitter,this._onDidSyncRepository=new f.EventEmitter,this._onDidRefresh=new f.EventEmitter,this._onWillRefresh=new f.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=f.Disposable.from(f.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(A(t.uri));!e||(ce.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added){const n=A(e.uri);if(e.uri.scheme!==Gr.scheme||this._repositories.has(n))continue;const r=this.getProvider(e.uri);if(!r)continue;this._repositories.set(n,null);const{repo:i,name:o}=this.getVirtualUriMetadata(e.uri),a=new Vh(this,e.uri,i,o,r);this._repositories.set(n,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:r.id,repositories:this._repositories.size.toString()})}if(t.removed.length)for(const e of t.removed){const n=A(e.uri);if(e.uri.scheme!==Gr.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}_t(ve.HasVirtualFolders,this._repositories.size!==0),_t(ve.VirtualFolderProviders,Bm(Wm(fl(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...fl(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,o,a,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const l={id:t,name:e,provider:n,fs:r,storage:i,changeStore:o,metadataStore:a,workspaceRepositories:c};this._providers.set(t,l);const d=f.Disposable.from(l.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),l.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),l.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();_t(ve.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[l],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=f.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[g,p]of[...this._repositories])(p==null?void 0:p.provider.id)===t&&(this._repositories.delete(g),h.push(p));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[l]}),d.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...fl(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){const n=f.workspace.getWorkspaceFolder(t);if(!n||n.uri.scheme!==Gr.scheme)return;const r=this._repositories.get(A(n.uri));if(!(e!==void 0&&(r==null?void 0:r.provider.id)!==e))return r!=null?r:void 0}getRepositories(t){return Hm(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:Gr.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:Gr.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Ur(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Ur(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Ur(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Ur(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Ur(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Ur(t)}async getRecentRemoteSourceProviders(){return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:Xm("pick","Choose a recent repository"),getRemoteSources:async()=>{const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return Promise.all(t.sort((e,n)=>n.timestamp-e.timestamp).map(async e=>({providerId:e.provider.id,name:e.name,icon:"repo",description:pa(e.timestamp,{ago:!0}),detail:`${e.provider.name}${e.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${e.pullRequest.id}`:""}${k.isCanonicalUri(e.uri)?"":`\xA0\xA0\u2022\xA0\xA0${oc(e.ref.type)} ${e.ref.name}`}\xA0\xA0\u2022\xA0\xA0${gl(e.changes)}${e.idx?`\xA0\xA0\u2022\xA0\xA0${Bh(e.idx.type)}`:""}`,url:(await this.getBestRemoteUri(e.uri)).toString()})))}}}getRemoteSourceProviders(t){const e=s(n=>n.provider.getRemoteSourceProviders().map(i=>{var o;return{...i,getRecentRemoteSources:(o=i.getRecentRemoteSources)!=null?o:async()=>{var a;const c=(a=await n.workspaceRepositories.getRemoteWorkspaceSourceProvider(n.id))!=null?a:[];return Promise.all(c.map(async u=>({providerId:u.provider.id,name:u.name,icon:"repo",timestamp:u.timestamp,description:pa(u.timestamp,{ago:!0}),detail:`${u.provider.name}${u.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${u.pullRequest.id}`:""}${k.isCanonicalUri(u.uri)?"":`\xA0\xA0\u2022\xA0\xA0${oc(u.ref.type)} ${u.ref.name}`}\xA0\xA0\u2022\xA0\xA0${gl(u.changes)}${u.idx?`\xA0\xA0\u2022\xA0\xA0${Bh(u.idx.type)}`:""}`,url:(await this.getBestRemoteUri(u.uri)).toString()})))}}}),"createRemoteSourceProviders");if(t){const n=this.getProvider(t);return n?e(n):[]}return[...Um(this._providers.values(),n=>{var r;return(r=e(n))!=null?r:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=f.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===k.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Ur(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=$.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return xi(this,t,e)}createProviderUri(t,e,n){return k.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(Gr.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return k.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===Gr.scheme?k.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return k.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(Gr.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e){const{provider:n,repo:r,ref:i}=this.getVirtualUriMetadata(t);if(e===Di.Repository)return this.getRemoteUri(n.id,{repo:r});if(e===Di.PullRequest||e===void 0&&(i==null?void 0:i.type)===N.PullRequest){if((i==null?void 0:i.type)===N.PullRequest)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:i.id}});const{pullRequest:o}=await this.getMetadata(t);if(e===Di.PullRequest&&o)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:o.id}})}if(e===Di.Branch||e===void 0&&(i==null?void 0:i.type)===N.Branch){if((i==null?void 0:i.type)===N.Branch)return this.getRemoteUri(n.id,{repo:r,branch:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===H.Branch||o.type===H.RemoteBranch&&e===Di.Branch)return this.getRemoteUri(n.id,{repo:r,branch:o.branch.name})}if(e===Di.Tag||e===void 0&&(i==null?void 0:i.type)===N.Tag){if((i==null?void 0:i.type)===N.Tag)return this.getRemoteUri(n.id,{repo:r,tag:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===H.Tag)return this.getRemoteUri(n.id,{repo:r,tag:o.detached.name})}if(e===Di.Commit||e===void 0&&((i==null?void 0:i.type)===N.Commit||(i==null?void 0:i.type)===N.Tree&&W(i.id))){if((i==null?void 0:i.type)===N.Commit||(i==null?void 0:i.type)===N.Tree&&W(i.id))return this.getRemoteUri(n.id,{repo:r,sha:i.id});const{HEAD:o}=await this.getMetadata(t);if(e===Di.Commit||o.type===H.Commit)return this.getRemoteUri(n.id,{repo:r,sha:o.sha})}if(e===void 0)return this.getRemoteUri(n.id,{repo:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(Gr.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){var n,r;return(r=(n=this.getRepositoryProvider(t)).getRemoteUri)==null?void 0:r.call(n,e)}getProviderRootUri(t){return t=k.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=k.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=k.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(Gr.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return k.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=f.workspace.getWorkspaceFolder(k.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const o=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,o)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(o=>{const a=this.getRelativeFilePath(t,o.uri);switch(o.type){case I.Created:case I.Changed:return{type:o.type,path:a,fileType:o.fileType,content:n.readFile(o.uri).then(async c=>{if(!c)throw this.telemetryService.sendErrorEvent("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await cr(c)!==o.hash)throw this.telemetryService.sendErrorEvent("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case I.Deleted:return{type:o.type,path:a,fileType:o.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return mt.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=A(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);const o=(i==null?void 0:i.HEAD.type)===H.Tag;if(i!==void 0&&(!o||this.workspaceState.get(qh)))return i;const a=this.getProvider(t);if(!a)throw new Ur(t);const c=Ho.decode(t);(c==null?void 0:c.type)===oi.SHA&&(r=c.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const u=await n;return await this.updateMetadataCore(t,u,{silent:!0}),o&&await this.workspaceState.update(qh,!0),u}catch(u){throw be.asVirtualProviderErrorCode(u)===ne.InvalidRepositoryError&&rc.showRepositoryNotValidMessage(),u}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new Fn(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e,n)}async clone(t){const{cloneUrl:e}=await this.getMetadata(t),r=mt.get("gitProtocol")==="http"?e.http:e.ssh;if(!r)throw new Error("No url found for clone");if(Tn)return void f.env.openExternal(f.Uri.parse(`${f.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(r)}`));const i=s(async o=>{try{await o.activate(),await f.commands.executeCommand("git.clone",r)}catch(a){ce.error(a,"Unable to clone repository")}},"cloneRepository");if(f.workspace.isTrusted){const o=f.extensions.getExtension("vscode.git");if(o)await i(o);else throw new Error("Git extension not found")}else{const o=f.extensions.onDidChange(async()=>{const c=f.extensions.getExtension("vscode.git");c&&(await i(c),o.dispose())});await f.workspace.requestWorkspaceTrust()||o.dispose()}}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,o){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,o)}createPullRequest(t,e,n,r,i){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(A(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new Ur(t);let{to:o,reason:a,...c}=e!=null?e:{};o===void 0&&i&&(o=await i.resolveIndexRef(t,a==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw be.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ae.Abort,...c,to:o})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=f.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Lm(t.sort((e,n)=>n.timestamp-e.timestamp),e=>A(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(Gr.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(Gr.authoritySeparator)===-1}},"_VirtualProviderService");let Hr=Gr;Hr.scheme="vscode-vfs",Hr.authoritySeparator="+",Hr.baseVirtualWorkspaceUri=f.Uri.parse(`${Gr.scheme}://`),Qm([ac()],Hr.prototype,"getMetadataCore",1);function Jm(t,e,n){return new Co(new vl(t),new vl(e)).ComputeDiff(n).changes}s(Jm,"stringDiff");class ro{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}s(ro,"DiffChange");var Kh;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Kh||(Kh={}));function Gh(t,e){return(e<<5)-e+t|0}s(Gh,"numberHash");function Ym(t,e){e=Gh(149417,e);for(let n=0,r=t.length;n<r;n++)e=Gh(t.charCodeAt(n),e);return e}s(Ym,"stringHash");class vl{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}s(vl,"StringDiffSequence");class Bo{static Assert(e,n){if(!e)throw new Error(n)}}s(Bo,"Debug");class Wo{static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}}s(Wo,"MyArray");var Qh;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(Qh||(Qh={}));class ml{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ro(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}s(ml,"DiffChangeHelper");class Co{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,o,a]=Co._getElements(e),[c,u,l]=Co._getElements(n);this._hasStrings=a&&l,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Co._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=Ym(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=Co._getStrictElement(this._originalSequence,e),i=Co._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,o){const a=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,a);return o&&(c=this.PrettifyChanges(c)),{quitEarly:a[0],changes:c}}ComputeDiffRecursive(e,n,r,i,o){for(o[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(Bo.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new ro(e,0,r,i-r+1)]):e<=n?(Bo.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new ro(e,n-e+1,r,0)]):(Bo.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Bo.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const a=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,a,c,o),l=a[0],d=c[0];if(u!==null)return u;if(!o[0]){const h=this.ComputeDiffRecursive(e,l,r,d,o);let g=[];return o[0]?g=[new ro(l+1,n-(l+1)+1,d+1,i-(d+1)+1)]:g=this.ComputeDiffRecursive(l+1,n,d+1,i,o),this.ConcatenateChanges(h,g)}return[new ro(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,o,a,c,u,l,d,h,g,p,C,v,m,b,w){let P=null,F=null,R=new ml,te=n,ze=r,ge=p[0]-m[0]-i,Et=-1073741824,kt=this.m_forwardHistory.length-1;do{const Rt=ge+e;Rt===te||Rt<ze&&l[Rt-1]<l[Rt+1]?(h=l[Rt+1],C=h-ge-i,h<Et&&R.MarkNextChange(),Et=h,R.AddModifiedElement(h+1,C),ge=Rt+1-e):(h=l[Rt-1]+1,C=h-ge-i,h<Et&&R.MarkNextChange(),Et=h-1,R.AddOriginalElement(h,C+1),ge=Rt-1-e),kt>=0&&(l=this.m_forwardHistory[kt],e=l[0],te=1,ze=l.length-1)}while(--kt>=-1);if(P=R.getReverseChanges(),w[0]){let Rt=p[0]+1,st=m[0]+1;if(P!==null&&P.length>0){const kn=P[P.length-1];Rt=Math.max(Rt,kn.getOriginalEnd()),st=Math.max(st,kn.getModifiedEnd())}F=[new ro(Rt,g-Rt+1,st,v-st+1)]}else{R=new ml,te=a,ze=c,ge=p[0]-m[0]-u,Et=1073741824,kt=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Rt=ge+o;Rt===te||Rt<ze&&d[Rt-1]>=d[Rt+1]?(h=d[Rt+1]-1,C=h-ge-u,h>Et&&R.MarkNextChange(),Et=h+1,R.AddOriginalElement(h+1,C+1),ge=Rt+1-o):(h=d[Rt-1],C=h-ge-u,h>Et&&R.MarkNextChange(),Et=h,R.AddModifiedElement(h+1,C+1),ge=Rt-1-o),kt>=0&&(d=this.m_reverseHistory[kt],o=d[0],te=1,ze=d.length-1)}while(--kt>=-1);F=R.getChanges()}return this.ConcatenateChanges(P,F)}ComputeRecursionPoint(e,n,r,i,o,a,c){let u=0,l=0,d=0,h=0,g=0,p=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const C=n-e+(i-r),v=C+1,m=new Int32Array(v),b=new Int32Array(v),w=i-r,P=n-e,F=e-r,R=n-i,ze=(P-w)%2==0;m[w]=e,b[P]=n,c[0]=!1;for(let ge=1;ge<=C/2+1;ge++){let Et=0,kt=0;d=this.ClipDiagonalBound(w-ge,ge,w,v),h=this.ClipDiagonalBound(w+ge,ge,w,v);for(let st=d;st<=h;st+=2){st===d||st<h&&m[st-1]<m[st+1]?u=m[st+1]:u=m[st-1]+1,l=u-(st-w)-F;const kn=u;for(;u<n&&l<i&&this.ElementsAreEqual(u+1,l+1);)u++,l++;if(m[st]=u,u+l>Et+kt&&(Et=u,kt=l),!ze&&Math.abs(st-P)<=ge-1&&u>=b[st])return o[0]=u,a[0]=l,kn<=b[st]&&1447>0&&ge<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,R,m,b,u,n,o,l,i,a,ze,c):null}const Rt=(Et-e+(kt-r)-ge)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Et,Rt))return c[0]=!0,o[0]=Et,a[0]=kt,Rt>0&&1447>0&&ge<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,R,m,b,u,n,o,l,i,a,ze,c):(e++,r++,[new ro(e,n-e+1,r,i-r+1)]);g=this.ClipDiagonalBound(P-ge,ge,P,v),p=this.ClipDiagonalBound(P+ge,ge,P,v);for(let st=g;st<=p;st+=2){st===g||st<p&&b[st-1]>=b[st+1]?u=b[st+1]-1:u=b[st-1],l=u-(st-P)-R;const kn=u;for(;u>e&&l>r&&this.ElementsAreEqual(u,l);)u--,l--;if(b[st]=u,ze&&Math.abs(st-w)<=ge&&u<=m[st])return o[0]=u,a[0]=l,kn>=m[st]&&1447>0&&ge<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,R,m,b,u,n,o,l,i,a,ze,c):null}if(ge<=1447){let st=new Int32Array(h-d+2);st[0]=w-d+1,Wo.Copy2(m,d,st,1,h-d+1),this.m_forwardHistory.push(st),st=new Int32Array(p-g+2),st[0]=P-g+1,Wo.Copy2(b,g,st,1,p-g+1),this.m_reverseHistory.push(st)}}return this.WALKTRACE(w,d,h,F,P,g,p,R,m,b,u,n,o,l,i,a,ze,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,o=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,a=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<o&&(!a||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const l=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!l)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,o=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}const a=r.originalLength>0,c=r.modifiedLength>0;let u=0,l=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const g=r.originalStart-h,p=r.modifiedStart-h;if(g<i||p<o||a&&!this.OriginalElementsAreEqual(g,g+r.originalLength)||c&&!this.ModifiedElementsAreEqual(p,p+r.modifiedLength))break;const v=(g===i&&p===o?5:0)+this._boundaryScore(g,r.originalLength,p,r.modifiedLength);v>l&&(l=v,u=h)}r.originalStart-=u,r.modifiedStart-=u;const d=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],d)){e[n-1]=d[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],o=e[n],a=o.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=o.originalStart+o.originalLength,l=u-c,d=i.modifiedStart,h=o.modifiedStart+o.modifiedLength,g=h-d;if(a<5&&l<20&&g<20){const p=this._findBetterContiguousSequence(c,l,d,g,a);if(p){const[C,v]=p;(C!==i.originalStart+i.originalLength||v!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=C-i.originalStart,i.modifiedLength=v-i.modifiedStart,o.originalStart=C+a,o.modifiedStart=v+a,o.originalLength=u-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,o){if(n<o||i<o)return null;const a=e+n-o+1,c=r+i-o+1;let u=0,l=0,d=0;for(let h=e;h<a;h++)for(let g=r;g<c;g++){const p=this._contiguousSequenceScore(h,g,o);p>0&&p>u&&(u=p,l=h,d=g)}return u>0?[l,d]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let o=0;o<r;o++){if(!this.ElementsAreEqual(e+o,n+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const o=this._OriginalRegionIsBoundary(e,n)?1:0,a=this._ModifiedRegionIsBoundary(r,i)?1:0;return o+a}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Wo.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Wo.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Wo.Copy(e,0,i,0,e.length),Wo.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Bo.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Bo.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let o=e.originalLength;const a=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new ro(i,o,a,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const o=r,a=i-r-1,c=n%2==0;if(e<0){const u=o%2==0;return c===u?0:1}else{const u=a%2==0;return c===u?i-1:i-2}}}s(Co,"LcsDiff");var yl;(function(t){function e(r,i){return r instanceof va?i:new f.Position(i.line,i.character)}s(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof va?i:new f.Range(i.start.line,i.start.character,i.end.line,i.end.character)}s(n,"makeRange"),t.makeRange=n})(yl||(yl={}));var Xh;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Xh||(Xh={}));const Jh=s(class{constructor(t,e,n,r){this.diffCache=new no(32),this.indexDocumentCache=new no(32),this.codeDocumentCache=new no(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===I.Created||i===I.Deleted)return;const o=await this.getIndexDocument(n);if(o===void 0)return;const a=this.getDiff(2,o,t);if(a.length===0)return e;const c=t.offsetAt(new f.Position(e.line,e.character));let u=c;for(const g of a){if(g.modifiedStart<=c&&c<g.modifiedStart+g.modifiedLength)return;if(u<g.modifiedStart)break;u=u-(g.modifiedLength-g.originalLength)}const l=o.positionAt(u),d=this.getWordAtOffset(o.lineAt(l.line).text,l.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(d===void 0||h===void 0||d!==h))return new f.Position(l.line,l.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof f.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===I.Created||i===I.Deleted)return;const[o,a]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(o===void 0||a===void 0)return;const c=this.getDiff(1,o,a);if(c.length===0)return e;const u=o.offsetAt(e.start);let l=u;const d=o.offsetAt(e.end);let h=d;for(const m of c){if(h<m.originalStart)break;const b=m.modifiedLength-m.originalLength;if(m.originalStart<=u){if(u<m.originalStart+m.originalLength)return;l+=b}else if(d<m.originalStart+m.originalLength)return;if(m.originalStart<=d){if(d<m.originalStart+m.originalLength)return;h+=b}}const g=a.positionAt(l),p=a.positionAt(h),C=o.getText(e),v=a.getText(yl.makeRange(a,{start:g,end:p}));if(C===v)return new f.Range(g.line,g.character,p.line,p.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof f.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new va(t,Number.MAX_VALUE,Jh.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:Jm(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,o=0;for(;o<t.length&&n!=="endFound";){switch(o===e&&(n="findEnd"),t[o]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=o+1;break;case"findEnd":i=o,n="endFound";break}break}o++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let Yh=Jh;Yh.textDecoder=new TextDecoder("utf8");var Zh;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(Zh||(Zh={}));class va{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let o=0;o<e.length;o++){const a=e.charCodeAt(o);(a===13||a===10)&&(a===13&&o+1<e.length&&e.charCodeAt(o+1)===10&&o++,i.push(r+o+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=va.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const o=this._content.substring(r,i);let a=o.length-1;for(;a>=0&&(o[a]===`
`||o[a]==="\r");)a--;return{lineNumber:e,text:o.substr(0,a+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}const o=r-1;return{line:o,character:e-n[o]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}s(va,"TextDocument");var eg;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(eg||(eg={}));var sc;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(sc||(sc={}));var Wi;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=sc.MAX_VALUE),i===Number.MAX_VALUE&&(i=sc.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.objectLiteral(i)&&ie.uinteger(i.line)&&ie.uinteger(i.character)}s(n,"is"),t.is=n})(Wi||(Wi={}));var wr;(function(t){function e(r,i,o,a){if(ie.uinteger(r)&&ie.uinteger(i)&&ie.uinteger(o)&&ie.uinteger(a))return{start:Wi.create(r,i),end:Wi.create(o,a)};if(Wi.is(r)&&Wi.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+o+", "+a+"]")}s(e,"create"),t.create=e;function n(r){var i=r;return ie.objectLiteral(i)&&Wi.is(i.start)&&Wi.is(i.end)}s(n,"is"),t.is=n})(wr||(wr={}));var wl;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.string(i.uri)||ie.undefined(i.uri))}s(n,"is"),t.is=n})(wl||(wl={}));var cc;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.targetRange)&&ie.string(i.targetUri)&&(wr.is(i.targetSelectionRange)||ie.undefined(i.targetSelectionRange))&&(wr.is(i.originSelectionRange)||ie.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(cc||(cc={}));var Cl;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.numberRange(i.red,0,1)&&ie.numberRange(i.green,0,1)&&ie.numberRange(i.blue,0,1)&&ie.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(Cl||(Cl={}));var tg;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){var i=r;return wr.is(i.range)&&Cl.is(i.color)}s(n,"is"),t.is=n})(tg||(tg={}));var ng;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.string(i.label)&&(ie.undefined(i.textEdit)||So.is(i))&&(ie.undefined(i.additionalTextEdits)||ie.typedArray(i.additionalTextEdits,So.is))}s(n,"is"),t.is=n})(ng||(ng={}));var Za;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Za||(Za={}));var rg;(function(t){function e(r,i,o,a,c){var u={startLine:r,endLine:i};return ie.defined(o)&&(u.startCharacter=o),ie.defined(a)&&(u.endCharacter=a),ie.defined(c)&&(u.kind=c),u}s(e,"create"),t.create=e;function n(r){var i=r;return ie.uinteger(i.startLine)&&ie.uinteger(i.startLine)&&(ie.undefined(i.startCharacter)||ie.uinteger(i.startCharacter))&&(ie.undefined(i.endCharacter)||ie.uinteger(i.endCharacter))&&(ie.undefined(i.kind)||ie.string(i.kind))}s(n,"is"),t.is=n})(rg||(rg={}));var Sl;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wl.is(i.location)&&ie.string(i.message)}s(n,"is"),t.is=n})(Sl||(Sl={}));var ma;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(ma||(ma={}));var uc;(function(t){t.Unnecessary=1,t.Deprecated=2})(uc||(uc={}));var bl;(function(t){function e(n){var r=n;return r!=null&&ie.string(r.href)}s(e,"is"),t.is=e})(bl||(bl={}));var lc;(function(t){function e(r,i,o,a,c,u){var l={range:r,message:i};return ie.defined(o)&&(l.severity=o),ie.defined(a)&&(l.code=a),ie.defined(c)&&(l.source=c),ie.defined(u)&&(l.relatedInformation=u),l}s(e,"create"),t.create=e;function n(r){var i,o=r;return ie.defined(o)&&wr.is(o.range)&&ie.string(o.message)&&(ie.number(o.severity)||ie.undefined(o.severity))&&(ie.integer(o.code)||ie.string(o.code)||ie.undefined(o.code))&&(ie.undefined(o.codeDescription)||ie.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(ie.string(o.source)||ie.undefined(o.source))&&(ie.undefined(o.relatedInformation)||ie.typedArray(o.relatedInformation,Sl.is))}s(n,"is"),t.is=n})(lc||(lc={}));var es;(function(t){function e(r,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var c={title:r,command:i};return ie.defined(o)&&o.length>0&&(c.arguments=o),c}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.title)&&ie.string(i.command)}s(n,"is"),t.is=n})(es||(es={}));var So;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){var a=o;return ie.objectLiteral(a)&&ie.string(a.newText)&&wr.is(a.range)}s(i,"is"),t.is=i})(So||(So={}));var ya;(function(t){function e(r,i,o){var a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&ie.objectLiteral(i)&&ie.string(i.label)&&(ie.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(ie.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(ya||(ya={}));var Dr;(function(t){function e(n){var r=n;return typeof r=="string"}s(e,"is"),t.is=e})(Dr||(Dr={}));var bo;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function n(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){var a=o;return So.is(a)&&(ya.is(a.annotationId)||Dr.is(a.annotationId))}s(i,"is"),t.is=i})(bo||(bo={}));var ts;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&fc.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(ts||(ts={}));var wa;(function(t){function e(r,i,o){var a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&ie.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||ie.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ie.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(wa||(wa={}));var Ca;(function(t){function e(r,i,o,a){var c={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&ie.string(i.oldUri)&&ie.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||ie.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ie.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(Ca||(Ca={}));var Sa;(function(t){function e(r,i,o){var a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&ie.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||ie.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||ie.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(Sa||(Sa={}));var _l;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return ie.string(i.kind)?wa.is(i)||Ca.is(i)||Sa.is(i):ts.is(i)}))}s(e,"is"),t.is=e})(_l||(_l={}));var dc=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return s(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,o;if(r===void 0?i=So.insert(e,n):Dr.is(r)?(o=r,i=bo.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=bo.insert(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.replace=function(e,n,r){var i,o;if(r===void 0?i=So.replace(e,n):Dr.is(r)?(o=r,i=bo.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=bo.replace(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=So.del(e):Dr.is(n)?(i=n,r=bo.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=bo.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),ig=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return s(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Dr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),dy=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new ig(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(ts.is(r)){var i=new dc(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new dc(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return s(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(fc.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],o={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(o),r=new dc(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new dc(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ig,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ya.is(n)||Dr.is(n)?i=n:r=n;var o,a;if(i===void 0?o=wa.create(e,r):(a=Dr.is(i)?i:this._changeAnnotations.manage(i),o=wa.create(e,r,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ya.is(r)||Dr.is(r)?o=r:i=r;var a,c;if(o===void 0?a=Ca.create(e,n,i):(c=Dr.is(o)?o:this._changeAnnotations.manage(o),a=Ca.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(a),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ya.is(n)||Dr.is(n)?i=n:r=n;var o,a;if(i===void 0?o=Sa.create(e,r):(a=Dr.is(i)?i:this._changeAnnotations.manage(i),o=Sa.create(e,r,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t}(),og;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)}s(n,"is"),t.is=n})(og||(og={}));var ag;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&ie.integer(i.version)}s(n,"is"),t.is=n})(ag||(ag={}));var fc;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&(i.version===null||ie.integer(i.version))}s(n,"is"),t.is=n})(fc||(fc={}));var sg;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&ie.string(i.languageId)&&ie.integer(i.version)&&ie.string(i.text)}s(n,"is"),t.is=n})(sg||(sg={}));var io;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(io||(io={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e}(io||(io={}));var El;(function(t){function e(n){var r=n;return ie.objectLiteral(n)&&io.is(r.kind)&&ie.string(r.value)}s(e,"is"),t.is=e})(El||(El={}));var cg;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(cg||(cg={}));var ug;(function(t){t.PlainText=1,t.Snippet=2})(ug||(ug={}));var lg;(function(t){t.Deprecated=1})(lg||(lg={}));var dg;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.newText)&&wr.is(i.insert)&&wr.is(i.replace)}s(n,"is"),t.is=n})(dg||(dg={}));var fg;(function(t){t.asIs=1,t.adjustIndentation=2})(fg||(fg={}));var hg;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})(hg||(hg={}));var gg;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(gg||(gg={}));var hc;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return ie.string(i)||ie.objectLiteral(i)&&ie.string(i.language)&&ie.string(i.value)}s(n,"is"),t.is=n})(hc||(hc={}));var pg;(function(t){function e(n){var r=n;return!!r&&ie.objectLiteral(r)&&(El.is(r.contents)||hc.is(r.contents)||ie.typedArray(r.contents,hc.is))&&(n.range===void 0||wr.is(n.range))}s(e,"is"),t.is=e})(pg||(pg={}));var vg;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(vg||(vg={}));var mg;(function(t){function e(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a={label:n};return ie.defined(r)&&(a.documentation=r),ie.defined(i)?a.parameters=i:a.parameters=[],a}s(e,"create"),t.create=e})(mg||(mg={}));var ns;(function(t){t.Text=1,t.Read=2,t.Write=3})(ns||(ns={}));var yg;(function(t){function e(n,r){var i={range:n};return ie.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(yg||(yg={}));var xl;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(xl||(xl={}));var Il;(function(t){t.Deprecated=1})(Il||(Il={}));var wg;(function(t){function e(n,r,i,o,a){var c={name:n,kind:r,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(wg||(wg={}));var Cg;(function(t){function e(r,i,o,a,c,u){var l={name:r,detail:i,kind:o,range:a,selectionRange:c};return u!==void 0&&(l.children=u),l}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.name)&&ie.number(i.kind)&&wr.is(i.range)&&wr.is(i.selectionRange)&&(i.detail===void 0||ie.string(i.detail))&&(i.deprecated===void 0||ie.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(Cg||(Cg={}));var $i;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})($i||($i={}));var Sg;(function(t){function e(r,i){var o={diagnostics:r};return i!=null&&(o.only=i),o}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.typedArray(i.diagnostics,lc.is)&&(i.only===void 0||ie.typedArray(i.only,ie.string))}s(n,"is"),t.is=n})(Sg||(Sg={}));var bg;(function(t){function e(r,i,o){var a={title:r},c=!0;return typeof i=="string"?(c=!1,a.kind=i):es.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.title)&&(i.diagnostics===void 0||ie.typedArray(i.diagnostics,lc.is))&&(i.kind===void 0||ie.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||es.is(i.command))&&(i.isPreferred===void 0||ie.boolean(i.isPreferred))&&(i.edit===void 0||_l.is(i.edit))}s(n,"is"),t.is=n})(bg||(bg={}));var _g;(function(t){function e(r,i){var o={range:r};return ie.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.undefined(i.command)||es.is(i.command))}s(n,"is"),t.is=n})(_g||(_g={}));var Eg;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.uinteger(i.tabSize)&&ie.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(Eg||(Eg={}));var xg;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.undefined(i.target)||ie.string(i.target))}s(n,"is"),t.is=n})(xg||(xg={}));var Ig;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&wr.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(Ig||(Ig={}));var fy=null,Dg;(function(t){function e(o,a,c,u){return new Zm(o,a,c,u)}s(e,"create"),t.create=e;function n(o){var a=o;return!!(ie.defined(a)&&ie.string(a.uri)&&(ie.undefined(a.languageId)||ie.string(a.languageId))&&ie.uinteger(a.lineCount)&&ie.func(a.getText)&&ie.func(a.positionAt)&&ie.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){for(var c=o.getText(),u=i(a,function(C,v){var m=C.range.start.line-v.range.start.line;return m===0?C.range.start.character-v.range.start.character:m}),l=c.length,d=u.length-1;d>=0;d--){var h=u[d],g=o.offsetAt(h.range.start),p=o.offsetAt(h.range.end);if(p<=l)c=c.substring(0,g)+h.newText+c.substring(p,c.length);else throw new Error("Overlapping edit");l=g}return c}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;var c=o.length/2|0,u=o.slice(0,c),l=o.slice(c);i(u,a),i(l,a);for(var d=0,h=0,g=0;d<u.length&&h<l.length;){var p=a(u[d],l[h]);p<=0?o[g++]=u[d++]:o[g++]=l[h++]}for(;d<u.length;)o[g++]=u[d++];for(;h<l.length;)o[g++]=l[h++];return o}s(i,"mergeSort")})(Dg||(Dg={}));var Zm=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return s(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Wi.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}var a=r-1;return Wi.create(a,e-n[a])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),ie;(function(t){var e=Object.prototype.toString;function n(p){return typeof p!="undefined"}s(n,"defined"),t.defined=n;function r(p){return typeof p=="undefined"}s(r,"undefined"),t.undefined=r;function i(p){return p===!0||p===!1}s(i,"boolean"),t.boolean=i;function o(p){return e.call(p)==="[object String]"}s(o,"string"),t.string=o;function a(p){return e.call(p)==="[object Number]"}s(a,"number"),t.number=a;function c(p,C,v){return e.call(p)==="[object Number]"&&C<=p&&p<=v}s(c,"numberRange"),t.numberRange=c;function u(p){return e.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}s(u,"integer"),t.integer=u;function l(p){return e.call(p)==="[object Number]"&&0<=p&&p<=2147483647}s(l,"uinteger"),t.uinteger=l;function d(p){return e.call(p)==="[object Function]"}s(d,"func"),t.func=d;function h(p){return p!==null&&typeof p=="object"}s(h,"objectLiteral"),t.objectLiteral=h;function g(p,C){return Array.isArray(p)&&p.every(C)}s(g,"typedArray"),t.typedArray=g})(ie||(ie={}));var rs;(function(t){function e(r){return typeof r=="string"||r instanceof String}s(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}s(n,"number"),t.number=n})(rs||(rs={}));var Dl;(function(t){function e(n){const r=n;return r!=null&&(rs.number(r.value)||rs.string(r.value))&&rs.string(r.target)}s(e,"is"),t.is=e})(Dl||(Dl={}));class Tg extends f.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}s(Tg,"ProtocolDiagnostic");var zi;(function(t){const e=Object.prototype.toString;function n(d){return typeof d!="undefined"}s(n,"defined"),t.defined=n;function r(d){return d===!0||d===!1}s(r,"boolean"),t.boolean=r;function i(d){return e.call(d)==="[object String]"}s(i,"string"),t.string=i;function o(d){return e.call(d)==="[object Number]"}s(o,"number"),t.number=o;function a(d){return d!==null&&typeof d=="object"}s(a,"objectLiteral"),t.objectLiteral=a;function c(d){return Array.isArray(d)}s(c,"array"),t.array=c;function u(d){return c(d)&&d.every(h=>i(h))}s(u,"stringArray"),t.stringArray=u;function l(d,h){return Array.isArray(d)&&d.every(h)}s(l,"typedArray"),t.typedArray=l})(zi||(zi={}));var gc;(function(t){function e(n){const r=n;return r&&zi.string(r.language)&&zi.string(r.value)}s(e,"is"),t.is=e})(gc||(gc={}));function e0(t){const e=s(x=>f.Uri.parse(x),"nullConverter"),n=t!=null?t:e;function r(x){return n(x)}s(r,"asUri");function i(x){return x.map(o)}s(i,"asDiagnostics");function o(x){const nt=new Tg(h(x.range),x.message,p(x.severity),x.data);return x.code!==void 0&&(bl.is(x.codeDescription)?nt.code={value:x.code,target:r(x.codeDescription.href)}:Dl.is(x.code)?(nt.hasDiagnosticCode=!0,nt.code={value:x.code.value,target:r(x.code.target)}):nt.code=x.code),x.source&&(nt.source=x.source),x.relatedInformation&&(nt.relatedInformation=a(x.relatedInformation)),Array.isArray(x.tags)&&(nt.tags=u(x.tags)),nt}s(o,"asDiagnostic");function a(x){return x.map(c)}s(a,"asRelatedInformation");function c(x){return new f.DiagnosticRelatedInformation(ge(x.location),x.message)}s(c,"asDiagnosticRelatedInformation");function u(x){if(!x)return;const nt=[];for(const gn of x){const Cr=l(gn);Cr!==void 0&&nt.push(Cr)}return nt.length>0?nt:void 0}s(u,"asDiagnosticTags");function l(x){switch(x){case uc.Unnecessary:return f.DiagnosticTag.Unnecessary;case uc.Deprecated:return f.DiagnosticTag.Deprecated;default:return}}s(l,"asDiagnosticTag");function d(x){if(!!x)return new f.Position(x.line,x.character)}s(d,"asPosition");function h(x){if(!!x)return new f.Range(d(x.start),d(x.end))}s(h,"asRange");function g(x){return x.map(nt=>h(nt))}s(g,"asRanges");function p(x){if(x==null)return f.DiagnosticSeverity.Error;switch(x){case ma.Error:return f.DiagnosticSeverity.Error;case ma.Warning:return f.DiagnosticSeverity.Warning;case ma.Information:return f.DiagnosticSeverity.Information;case ma.Hint:return f.DiagnosticSeverity.Hint}return f.DiagnosticSeverity.Error}s(p,"asDiagnosticSeverity");function C(x){if(zi.string(x))return new f.MarkdownString(x);if(gc.is(x))return new f.MarkdownString().appendCodeblock(x.value,x.language);if(Array.isArray(x)){const gn=[];for(const Cr of x){const hs=new f.MarkdownString;gc.is(Cr)?hs.appendCodeblock(Cr.value,Cr.language):hs.appendMarkdown(Cr),gn.push(hs)}return gn}let nt;switch(x.kind){case io.Markdown:return new f.MarkdownString(x.value);case io.PlainText:return nt=new f.MarkdownString,nt.appendText(x.value),nt;default:return nt=new f.MarkdownString,nt.appendText(`Unsupported Markup content received. Kind is: ${x.kind}`),nt}}s(C,"asHoverContent");function v(x){if(zi.string(x))return x;switch(x.kind){case io.Markdown:return new f.MarkdownString(x.value);case io.PlainText:return x.value;default:return`Unsupported Markup content received. Kind is: ${x.kind}`}}s(v,"asDocumentation");function m(x){if(!!x)return new f.Hover(C(x.contents),h(x.range))}s(m,"asHover");function b(x){if(!!x)return new f.TextEdit(h(x.range),x.newText)}s(b,"asTextEdit");function w(x){if(!!x)return x.map(b)}s(w,"asTextEdits");function P(x){if(!x)return;const nt=new f.SignatureHelp;return zi.number(x.activeSignature)?nt.activeSignature=x.activeSignature:nt.activeSignature=0,zi.number(x.activeParameter)?nt.activeParameter=x.activeParameter:nt.activeParameter=0,x.signatures&&(nt.signatures=F(x.signatures)),nt}s(P,"asSignatureHelp");function F(x){return x.map(R)}s(F,"asSignatureInformations");function R(x){const nt=new f.SignatureInformation(x.label);return x.documentation!==void 0&&(nt.documentation=v(x.documentation)),x.parameters!==void 0&&(nt.parameters=te(x.parameters)),x.activeParameter!==void 0&&(nt.activeParameter=x.activeParameter),nt}s(R,"asSignatureInformation");function te(x){return x.map(ze)}s(te,"asParameterInformations");function ze(x){const nt=new f.ParameterInformation(x.label);return x.documentation&&(nt.documentation=v(x.documentation)),nt}s(ze,"asParameterInformation");function ge(x){if(!!x)return new f.Location(n(x.uri),h(x.range))}s(ge,"asLocation");function Et(x){if(!!x)return st(x)}s(Et,"asDeclarationResult");function kt(x){if(!!x)return st(x)}s(kt,"asDefinitionResult");function Rt(x){if(!x)return;const nt={targetUri:n(x.targetUri),targetRange:h(x.targetSelectionRange),originSelectionRange:h(x.originSelectionRange),targetSelectionRange:h(x.targetSelectionRange)};if(!nt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return nt}s(Rt,"asLocationLink");function st(x){if(!!x)return zi.array(x)?x.length===0?[]:cc.is(x[0])?x.map(Cr=>Rt(Cr)):x.map(gn=>ge(gn)):cc.is(x)?[Rt(x)]:ge(x)}s(st,"asLocationResult");function kn(x){if(!!x)return x.map(nt=>ge(nt))}s(kn,"asReferences");function q(x){if(!!x)return x.map(Xe)}s(q,"asDocumentHighlights");function Xe(x){const nt=new f.DocumentHighlight(h(x.range));return zi.number(x.kind)&&(nt.kind=vt(x.kind)),nt}s(Xe,"asDocumentHighlight");function vt(x){switch(x){case ns.Text:return f.DocumentHighlightKind.Text;case ns.Read:return f.DocumentHighlightKind.Read;case ns.Write:return f.DocumentHighlightKind.Write}return f.DocumentHighlightKind.Text}s(vt,"asDocumentHighlightKind");function pt(x,nt){if(!!x)return x.map(gn=>Cn(gn,nt))}s(pt,"asSymbolInformations");function Mt(x){return x<=xl.TypeParameter?x-1:f.SymbolKind.Property}s(Mt,"asSymbolKind");function jt(x){switch(x){case Il.Deprecated:return f.SymbolTag.Deprecated;default:return}}s(jt,"asSymbolTag");function an(x){if(x==null)return;const nt=[];for(const gn of x){const Cr=jt(gn);Cr!==void 0&&nt.push(Cr)}return nt.length===0?void 0:nt}s(an,"asSymbolTags");function Cn(x,nt){const gn=new f.SymbolInformation(x.name,Mt(x.kind),h(x.location.range),x.location.uri?n(x.location.uri):nt);return Ce(gn,x),x.containerName&&(gn.containerName=x.containerName),gn}s(Cn,"asSymbolInformation");function Hn(x){if(x!=null)return x.map(hi)}s(Hn,"asDocumentSymbols");function hi(x){var nt;const gn=new f.DocumentSymbol(x.name,(nt=x.detail)!=null?nt:"",Mt(x.kind),h(x.range),h(x.selectionRange));if(Ce(gn,x),x.children!==void 0&&x.children.length>0){const Cr=[];for(const hs of x.children)Cr.push(hi(hs));gn.children=Cr}return gn}s(hi,"asDocumentSymbol");function Ce(x,nt){x.tags=an(nt.tags),nt.deprecated&&(x.tags?x.tags.includes(f.SymbolTag.Deprecated)||(x.tags=x.tags.concat(f.SymbolTag.Deprecated)):x.tags=[f.SymbolTag.Deprecated])}s(Ce,"fillTags");function ft(x){const nt={title:x.title,command:x.command};return x.arguments&&(nt.arguments=x.arguments),nt}s(ft,"asCommand");function Tt(x){if(!!x)return x.map(ft)}s(Tt,"asCommands");const wt=new Map;wt.set($i.Empty,f.CodeActionKind.Empty),wt.set($i.QuickFix,f.CodeActionKind.QuickFix),wt.set($i.Refactor,f.CodeActionKind.Refactor),wt.set($i.RefactorExtract,f.CodeActionKind.RefactorExtract),wt.set($i.RefactorInline,f.CodeActionKind.RefactorInline),wt.set($i.RefactorRewrite,f.CodeActionKind.RefactorRewrite),wt.set($i.Source,f.CodeActionKind.Source),wt.set($i.SourceOrganizeImports,f.CodeActionKind.SourceOrganizeImports);function Ot(x){if(x==null)return;let nt=wt.get(x);if(nt)return nt;const gn=x.split(".");nt=f.CodeActionKind.Empty;for(const Cr of gn)nt=nt.append(Cr);return nt}s(Ot,"asCodeActionKind");function tn(x){if(x!=null)return x.map(nt=>Ot(nt))}s(tn,"asCodeActionKinds");function Jt(x){if(x==null)return;const nt=new f.CodeAction(x.title);return x.kind!==void 0&&(nt.kind=Ot(x.kind)),x.diagnostics&&(nt.diagnostics=i(x.diagnostics)),x.edit&&(nt.edit=Sn(x.edit)),x.command&&(nt.command=ft(x.command)),x.isPreferred!==void 0&&(nt.isPreferred=x.isPreferred),nt}s(Jt,"asCodeAction");function Sn(x){if(!x)return;const nt=new f.WorkspaceEdit;return x.documentChanges?x.documentChanges.forEach(gn=>{if(wa.is(gn))nt.createFile(n(gn.uri),gn.options);else if(Ca.is(gn))nt.renameFile(n(gn.oldUri),n(gn.newUri),gn.options);else if(Sa.is(gn))nt.deleteFile(n(gn.uri),gn.options);else if(ts.is(gn))nt.set(n(gn.textDocument.uri),w(gn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(gn,void 0,4)}`)}):x.changes&&Object.keys(x.changes).forEach(gn=>{nt.set(n(gn),w(x.changes[gn]))}),nt}s(Sn,"asWorkspaceEdit");function jn(x){return new f.Color(x.red,x.green,x.blue,x.alpha)}s(jn,"asColor");function er(x){return new f.ColorInformation(h(x.range),jn(x.color))}s(er,"asColorInformation");function Tr(x){if(Array.isArray(x))return x.map(er)}s(Tr,"asColorInformations");function uo(x){const nt=new f.ColorPresentation(x.label);return nt.additionalTextEdits=w(x.additionalTextEdits),x.textEdit&&(nt.textEdit=b(x.textEdit)),nt}s(uo,"asColorPresentation");function Pc(x){if(Array.isArray(x))return x.map(uo)}s(Pc,"asColorPresentations");function xa(x){if(x)switch(x){case Za.Comment:return f.FoldingRangeKind.Comment;case Za.Imports:return f.FoldingRangeKind.Imports;case Za.Region:return f.FoldingRangeKind.Region}}s(xa,"asFoldingRangeKind");function gi(x){return new f.FoldingRange(x.startLine,x.endLine,xa(x.kind))}s(gi,"asFoldingRange");function Xl(x){if(Array.isArray(x))return x.map(gi)}s(Xl,"asFoldingRanges");function Jl(x){return new f.SelectionRange(h(x.range),x.parent?Jl(x.parent):void 0)}s(Jl,"asSelectionRange");function ny(x){if(!Array.isArray(x))return[];const nt=[];for(const gn of x)nt.push(Jl(gn));return nt}return s(ny,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:o,asRange:h,asRanges:g,asPosition:d,asDiagnosticSeverity:p,asDiagnosticTag:l,asHover:m,asTextEdit:b,asTextEdits:w,asSignatureHelp:P,asSignatureInformations:F,asSignatureInformation:R,asParameterInformations:te,asParameterInformation:ze,asDeclarationResult:Et,asDefinitionResult:kt,asLocation:ge,asReferences:kn,asDocumentHighlights:q,asDocumentHighlight:Xe,asDocumentHighlightKind:vt,asSymbolKind:Mt,asSymbolTag:jt,asSymbolTags:an,asSymbolInformations:pt,asSymbolInformation:Cn,asDocumentSymbols:Hn,asDocumentSymbol:hi,asCommand:ft,asCommands:Tt,asCodeAction:Jt,asCodeActionKind:Ot,asCodeActionKinds:tn,asWorkspaceEdit:Sn,asFoldingRangeKind:xa,asFoldingRange:gi,asFoldingRanges:Xl,asColor:jn,asColorInformation:er,asColorInformations:Tr,asColorPresentation:uo,asColorPresentations:Pc,asSelectionRange:Jl,asSelectionRanges:ny}}s(e0,"createConverter");const or=de.loadMessageBundle();var ji;(function(t){function e(r,i){const{provider:o,repo:a}=i instanceof f.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(o.id,{repo:a})}s(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:o,repo:a}=i instanceof f.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(o.id,{repo:a})}s(n,"externalIndexUri"),t.externalIndexUri=n})(ji||(ji={}));var _o;(function(t){function e(i){if(i.HEAD.type===H.Branch||i.HEAD.type===H.RemoteBranch)return i.HEAD.name}s(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==H.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const o=i.HEAD.name;return o===void 0||o.startsWith("refs/heads/")?o:`refs/heads/${o}`}s(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,o,a=hr.timeout){const c=await i.getMetadata(o),u=ji.externalIndexUri(i,c),l=t.getIndexBranchName(c);if(!(u===void 0||l===void 0))return hr.getIndexedTip(u,l,{authentication:i.getAuthentication(o)},a)}s(r,"getIndexedTip"),t.getIndexedTip=r})(_o||(_o={}));var is;(function(t){const e=new no(1024);function n(a,c,u){let l=e.get(u);return l!==void 0||(l=a.getCommit(c,u),e.set(u,l)),l}s(n,"get"),t.get=n;async function r(a,c,u){const l=[];for(const h of u)l.push(n(a,c,h));const d=[];for(const h of await Promise.all(l))h!==void 0&&d.push(h);return d}s(r,"all"),t.all=r;function i(a,c){const u=a.commitDate,l=c.commitDate;return u===void 0&&l===void 0?0:u===void 0?1:l===void 0?-1:u<l?1:u>l?-1:0}s(i,"sort"),t.sort=i;function o(a){const c=a.authorName!==void 0?`  \u2022  ${a.authorName}`:"",u=a.commitDate!==void 0?`  \u2022  ${pa(a.commitDate,{ago:!0})}`:"",l=a.branchName!==void 0?` - ${a.branchName}`:"",d=a.tags!==void 0?typeof a.tags=="string"?`  \u2022  ${a.tags}`:`  \u2022  ${a.tags.join(" ")}`:"";return{author:c,date:u,branch:l,tag:d}}s(o,"getCommitInfo"),t.getCommitInfo=o})(is||(is={}));var Pg;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(Pg||(Pg={}));var pc;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}s(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}s(n,"getBranchName")})(pc||(pc={}));var hr;(function(t){t.timeout=5*60*1e3;const e=new no(32),n=new no(32);async function r(h,g,p,C=t.timeout){const v=await i(h,g,p,C);if(!(v===void 0||v.length===0))return v[0]}s(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,g,p,C=t.timeout){const v=c(h,g);let m=e.get(v);if(m===void 0||m!==void 0&&Date.now()-m.time>C){const b=ai.getAllWorkspaceSnapshots(h,p,g);m={time:Date.now(),promise:b,snapshots:void 0},e.set(v,m)}if(m.snapshots!==null){if(m.snapshots===void 0){let b=await m.promise;if(b===void 0){m.snapshots=null;return}b.sort((w,P)=>P.creationDate.getTime()-w.creationDate.getTime()),b=b.filter(w=>w.state===5||w.state===3),m.snapshots=b}return m.snapshots}}s(i,"all"),t.all=i;async function o(h,g,p,C,v=t.timeout){const m=a(h,g);let b=n.get(m);if(b===null)return;if(b!==void 0)return b;const w=c(h,p),P=e.get(w);if(P!==void 0&&Date.now()-P.time<=v){if(P.snapshots===null)return;const F=P.snapshots!==void 0?P.snapshots:await i(h,p,C);if(F!==void 0){for(const R of F)if(R.commitId===g)return n.set(m,R),R}return}if(b=await ai.getWorkspaceSnapshot(g,C),b===void 0){n.set(m,null);return}return n.set(m,b),b}s(o,"single"),t.single=o;function a(h,g){return`${h.toString()}/${g}`}s(a,"getSingleCacheKey");function c(h,g){return g!==void 0?`${g}\\${h.toString()}`:h.toString()}s(c,"getAllCacheKey");async function u(h,g,p,C=t.timeout){return await o(h,g,void 0,p,C)!==void 0}s(u,"exists"),t.exists=u;async function l(h,g,p,C=t.timeout){return await i(h,g,p,C)!==void 0}s(l,"branch"),t.branch=l;async function d(h,g,p){const C=new Map(p.map(b=>[b.commitId,b])),v=await is.all(h,g.uri,p.map(b=>b.commitId));if(v.length===0)return;const m=[];for(const b of v){const w=C.get(b.hash);w!==void 0&&m.push({...w,commit:b})}if(m.length!==0)return m}s(d,"resolve"),t.resolve=d})(hr||(hr={}));var Vi;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}s(e,"create"),t.create=e})(Vi||(Vi={}));var ai;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function r(w,P,F){var R;const te=await Ga(w,{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json",...(await F.authentication).getRichNavigationHeaders(),"x-correlation-id":(R=F.correlationId)!=null?R:Ah()}});if(!!te.ok)return te.json()}s(r,"postRequest");async function i(w,P,F){const R=await Ga(w,{method:"POST",body:P,headers:(await F.authentication).getRichNavigationHeaders()});if(!!R.ok)return await R.json()}s(i,"postForm");function o(w,P){return`${n}/${e}/HttpLanguageService/${w}/${P}`}s(o,"makeRequestUrl");async function a(w,P){const F=await Ga(`${n}/${e}/WorkspaceSnapshot?commitId=${w}`,{headers:(await P.authentication).getRichNavigationHeaders()});if(F.ok){const R=await F.json();return{workspaceId:R.workspaceId,snapshotId:R.snapshotId,state:R.state,commitId:w.toLowerCase(),branchName:void 0,creationDate:new Date}}}s(a,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=a;async function c(w,P,F){const R=new Rh;R.append("uriString",w.toString(!0)),F!==void 0&&R.append("branchName",F);try{const te=await i(`${n}/${e}/WorkspaceSnapshot/all`,R,P);return te===void 0?void 0:te.map(pc.asWorkspaceSnapshot)}catch(te){ce.error(te);return}}s(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(w,P,F){const R=new Rh;R.append("uriString",w.toString(!0)),F!==void 0&&R.append("branchName",F);try{const te=await i(`${n}/${e}/WorkspaceSnapshot/latest`,R,P);return te===void 0?void 0:pc.asWorkspaceSnapshot(te)}catch(te){ce.error(te);return}}s(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function l(w,P,F){try{return r(o(w,"textDocument/capabilities"),P,F)}catch(R){ce.error(R);return}}s(l,"capabilities"),t.capabilities=l;async function d(w,P,F){try{return r(o(w,"textDocument/hover"),P,F)}catch(R){ce.error(R);return}}s(d,"provideHover"),t.provideHover=d;async function h(w,P,F){try{return r(o(w,"textDocument/definition"),P,F)}catch(R){ce.error(R);return}}s(h,"provideDefinition"),t.provideDefinition=h;async function g(w,P,F){try{return r(o(w,"textDocument/declaration"),P,F)}catch(R){ce.error(R);return}}s(g,"provideDeclaration"),t.provideDeclaration=g;async function p(w,P,F){try{return r(o(w,"textDocument/typeDefinition"),P,F)}catch(R){ce.error(R);return}}s(p,"provideTypeDefinition"),t.provideTypeDefinition=p;async function C(w,P,F){try{return r(o(w,"textDocument/references"),P,F)}catch(R){ce.error(R);return}}s(C,"provideReferences"),t.provideReferences=C;async function v(w,P,F){try{return r(o(w,"textDocument/foldingRange"),P,F)}catch(R){ce.error(R);return}}s(v,"providerFoldingRanges"),t.providerFoldingRanges=v;async function m(w,P,F){if(P=="")return;const R=await Ga(`${n}/${e}/Search/${w}/${P}`,{headers:(await F.authentication).getRichNavigationHeaders()});if(R.ok)return await R.json()}s(m,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=m;async function b(w,P,F){const R=f.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${w}/${P}/assets/designtime`,query:`id=${F}`});try{const te=await Ga(R.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return te.ok?te.text():void 0}catch(te){ce.error(te);return}}s(b,"getDesignTimeFileContent"),t.getDesignTimeFileContent=b})(ai||(ai={}));class Rg{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var o;for(const a of i.added){const c=a.uri,u=mt.getIndexMemento(c);if(u!==void 0){const l=ji.externalIndexUri(this.providerService,c);l!==void 0&&(typeof((o=u.branch)==null?void 0:o.name)=="string"?hr.all(l,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&W(u.ref)&&hr.single(l,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(l=>{const d={},h=l.pullRequest===void 0?_o.getIndexBranchName(l):void 0;h!==void 0?d.branch={name:h}:d.ref=l.HEAD.sha,mt.setIndexMemento(c,d).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const o=i.repository.uri,a=A(o);this.metadata.delete(a),this.getIndexMetadata(o).catch(void 0)})),this.disposable=f.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Ho.decode(e);if(i!==void 0){if(i.type===oi.Latest)return r===Je.Branch?this.getIndexedTip(e,n?0:hr.timeout):void 0;if(i.type===oi.SHA){const a=ji.externalIndexUri(this.providerService,e);return a===void 0?void 0:await hr.exists(a,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:hr.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===rt.Latest)return this.getIndexedTip(e,n?0:hr.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=A(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=hr.timeout){const r=await _o.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new Fn(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=ji.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),o=this.providerService.getModeRefType(e,i),a=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=a.pullRequest===void 0?_o.getIndexBranchName(a):void 0,l=await hr.single(r,a.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(a.HEAD.type===H.Branch||a.HEAD.type===H.RemoteBranch){const p=Ho.decode(e);if(p!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),l===void 0?p.type===oi.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await hr.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:Dn.Indexed}:{type:Dn.NotIndexed}):{type:Dn.NotIndexed}:p.type===oi.Latest||p.type===oi.SHA?{type:Dn.Active,sha:Promise.resolve(l.commitId),branch:{name:l.branchName}}:{type:Dn.Match,sha:Promise.resolve(l.commitId),branch:{name:l.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await o),g=this.providerService.getVirtualUriMetadata(e);if((h.index===rt.Latest||h.index===rt.Match)&&l!==void 0)return{type:Dn.Active,sha:Promise.resolve(l.commitId),branch:{name:l.branchName}};if(h.index===rt.TipPlusLatest&&g.provider.id==="github"){if(l!==void 0&&l.commitId===a.HEAD.sha)return{type:Dn.Active,sha:Promise.resolve(l.commitId),branch:{name:l.branchName}};if(a.HEAD.type===H.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const p=await hr.all(r,u,{authentication:c});if(p!==void 0&&p.length>0)return{type:Dn.Active,sha:this.computeClosestIndex(e,a.HEAD.sha,p),branch:{name:u}}}}return l!==void 0?{type:Dn.Indexed}:a.HEAD.type===H.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await hr.branch(r,u,{authentication:c}))?{type:Dn.Indexed}:{type:Dn.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(d=>d.commitId)),o=await this.providerService.getCommits(e,{ref:n,limit:100});if(o===void 0)return;let a;for(const d of o.commits)if(d.hash===n){a=d;break}if(a===void 0)return;const c=new Map(o.commits.map(d=>[d.hash,d])),u=[a];let l;for(;u.length>0;){for(l=u.shift();l!==void 0&&!i.has(l.hash);)if(l.parents.length>0){for(let d=1;d<l.parents.length;d++){const h=c.get(l.parents[d]);h!==void 0&&u.push(h)}l=c.get(l.parents[0])}if(l!==void 0)break}return l!==void 0?l.hash:void 0}async getSnapshots(e,n){const r=ji.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await hr.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const o=[];for(const a of i)a.branchName!==void 0&&o.push({workspaceId:a.workspaceId,snapshotId:a.snapshotId,hash:a.commitId,branch:{name:a.branchName}});return o}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),o=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:a}=n,c=[];if(r!==void 0){let u;const l=[`${we(a.sha)}`];if(r.type===Dn.Active){const d=await r.sha;o.index===rt.Latest||o.index===rt.Match?(u=o.display===Z.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",l.push(or("statusbar.active",`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):o.index===rt.TipPlusLatest&&(u="$(layers-dot)",d!==n.HEAD.sha?l.push(or("statusbar.tipPlusLatest","The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):l.push(or("statusbar.tipPlusLatest","The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===Dn.Match?(u="$(layers)",l.push(or("statusbar.match",`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===Dn.Indexed&&(u="$(layers)",l.push(or("statusbar.indexed",`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(Ii({command:"remoteHub.indexMode.select",title:u,tooltip:l.join(`
`),arguments:[{uri:e}]}))}return c}}s(Rg,"RichNavIndexProvider");var $o;(function(t){let e;function n(){return e=f.window.createStatusBarItem(f.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,f.window.onDidChangeActiveTextEditor(()=>{u()}),f.commands.registerCommand("remoteHub.indexMode.select",d=>{l(d).catch(h=>ce.log("Selecting index mode failed.",h))})]}s(n,"create"),t.create=n;const r=new Map;function i(d){r.set(d.key(),d)}s(i,"addService"),t.addService=i;function o(d){r.delete(d.key())}s(o,"removeService"),t.removeService=o;function a(d){return r.get(A(d))}s(a,"getService");async function c(d){for(const h of r.values())if(await h.handles(d))return h}s(c,"getServiceForDocument");async function u(){try{let d=s(function(C){const v=C.lastIndexOf("/");return v<=0?C:C.substr(v+1)},"basename");const h=f.window.activeTextEditor;if(h===void 0){e.hide();return}const g=await c(h.document);if(g===void 0){e.hide();return}const p=await g.isDocumentIndexed(h.document);p===vc.Indexed?(e.text="$(compass)",e.tooltip=new f.MarkdownString(or("isIndexed","The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",d(h.document.uri.path))),e.show()):p===vc.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new f.MarkdownString(or("isIndexed","The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",d(h.document.uri.path))),e.show()):e.hide()}catch(d){e.hide()}}s(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function l(d){var h;const g=d.uri,p=a(g);if(p===void 0)return;const[C,v,m,b]=await Promise.all([p.getBranchName(),p.getMetadata(),p.getIndexMetadata(),p.getModeRefType(g)]);if(m===void 0||!Dn.hasIndex(m.type))return;let w,P=!1;const F=Ho.decode(g);(F==null?void 0:F.type)===oi.Latest||(F==null?void 0:F.type)===oi.SHA?(P=!0,w={display:Z.Browse,index:F.type===oi.Latest?rt.Latest:rt.Match}):w=(h=p.getCurrentIndexMode())!=null?h:p.getModeConfig(g,b);const R=p.getUriMetadata(),te=or("current item","{0} current","$(check)"),ze={indexKind:"disable",label:or("RichNavStatus.disable.label","Disable"),description:w.index===rt.None?`  \u2022  ${te}`:void 0,detail:or("RichNavStatus.disable.detail","Disable rich navigation.")};let ge,Et;if(b===Je.PullRequestBranch||b===Je.PullRequestRemoteBranch||b===Je.Commit||b===Je.Tag){const kt={indexKind:"match",label:or("RichNavStatus.match.label","Current indexed commit - readonly"),description:w.index===rt.Match&&w.display===Z.Browse?`  \u2022  ${te}`:void 0,detail:or("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be read-only.")},Rt={indexKind:"match+writeable",label:or("RichNavStatus.matchWritable.label","Current indexed commit - writable"),description:w.index===rt.Match&&w.display===Z.Edit?`  \u2022  ${te}`:void 0,detail:or("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be writable.")};let st=R.provider.id==="github";st&&(st=v.HEAD.type===H.RemoteBranch?v.HEAD.branch.remote.accessLevel>=xe.Write:!0);const kn=st?[kt,Rt,ze]:[kt,ze];Et=await f.window.showQuickPick(kn,{placeHolder:"Pick a rich navigation mode"})}else if(b===Je.Branch||b===Je.RemoteBranch){const kt={indexKind:"latest",label:or("RichNavStatus.latestIndexed.label","Latest indexed commit"),description:w.index===rt.Latest?`  \u2022  ${te}`:void 0,detail:or("RichNavStatus.latestIndexed.detail","Enable rich navigation on the latest indexed commit. Files will be read-only.")},Rt={indexKind:"tip+latest",label:or("RichNavStatus.matchLatestIndexed.label","Current commit & latest index"),description:w.index===rt.TipPlusLatest?`  \u2022  ${te}`:void 0,detail:or("RichNavStatus.matchLatestIndexed.detail","Enable rich navigation on the current commit using the latest index. Files will be writeable.")},st=R.provider.id==="github"?[kt,Rt,ze]:[kt,ze];Et=await f.window.showQuickPick(st,{placeHolder:or("RichNavStatus.placeHolder","Pick a rich navigation mode for branch {0}",C)})}if(Et!==void 0&&(Et.indexKind==="disable"?ge={display:Z.Edit,index:rt.None}:Et.indexKind==="match"?ge={display:Z.Browse,index:rt.Match}:Et.indexKind==="match+writeable"?ge={display:Z.Edit,index:rt.Match}:Et.indexKind==="tip+latest"?ge={display:Z.Edit,index:rt.TipPlusLatest}:Et.indexKind==="latest"&&(ge={display:Z.Browse,index:rt.Latest}),ge!==void 0&&!_e.equals(w,ge))){if(await p.hasChanges()&&ge.display===Z.Browse){await f.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await p.updateIndexMode(ge),P){const kt=await p.getNonIndexedWorkspaceDescriptor();kt!==void 0&&xi(p.getProviderService(),kt)}}}s(l,"toggleIndexMode")})($o||($o={}));class Tl{constructor(e){this.telemetryService=e}static createStatus(){return $o.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===Dn.NotIndexed))return()=>new Rl(e,n,this.telemetryService)}}s(Tl,"RichNavServiceProvider");var os;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const o=e.exec(i);if(o===null||o.length!==5)return;const a={v:1,w:o[1],s:o[2],a:o[3]};return f.Uri.from({scheme:oo.scheme,authority:U(JSON.stringify(a)),path:o[4]})}s(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==oo.scheme)return;let o;try{return o=JSON.parse(pe(i.authority)),o===void 0?void 0:{workspaceId:o.w,snapshotId:o.s,assetId:`${o.a}${i.path}`}}catch{return}}s(r,"toRichNavComponents"),t.toRichNavComponents=r})(os||(os={}));const Pl=s(class{constructor(){this._onDidChangeFile=new f.EventEmitter,this.cache=new no(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return Pl.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw f.FileSystemError.FileNotFound();return{type:f.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:f.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw f.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw f.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw f.FileSystemError.NoPermissions()}delete(t,e){throw f.FileSystemError.NoPermissions()}rename(t,e,n){throw f.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==Pl.scheme)return;const n=os.toRichNavComponents(t);if(n===void 0)return;const r=await ai.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let oo=Pl;oo.scheme="vsck-fs",oo.emptyDisposable={dispose:()=>{}};var vc;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(vc||(vc={}));const Ti=s(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const o=this.localCapabilities.get(t);return(o==null?void 0:o[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=s((o=!1)=>{const a=this.repository.uri;o||(this.metadata=this.providerService.getMetadata(a),this.indexMetadata=this.providerService.getIndexMetadata(a)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(a,this.metadata)]).then(async c=>{var u,l;const[d,h,g]=this.currentlyResolved,[p,C,v]=c,m=this.providerService.getModeConfig(a,v);if(d!==void 0&&h!==void 0&&g!==void 0&&d.HEAD.sha===p.HEAD.sha&&C!==void 0&&h.type===C.type&&g.index===m.index&&g.display===m.display){const w=(h==null?void 0:h.type)===Dn.Active?await h.sha:void 0,P=(C==null?void 0:C.type)===Dn.Active?await C.sha:void 0;if(w===P)return}const b={newDisplayMode:m.display,newIndexMode:m.index,newIndexType:(C==null?void 0:C.type)===void 0?"undefined":Dn[C==null?void 0:C.type],currentDisplayMode:(u=g==null?void 0:g.display)!=null?u:"undefined",currentIndexMode:(l=g==null?void 0:g.index)!=null?l:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":Dn[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",b),this.currentlyResolved=[p,C,m];for(const w of this.registeredFeatures.values())w.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,pl.isActive(C)){const w=ji.externalIndexUri(this.providerService,p),P=await C.sha;if(w!==void 0&&P!==void 0){const F=await hr.single(w,P,_o.getIndexBranchName(p),{authentication:this.providerService.getAuthentication(a)});F!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:F.snapshotId}),this.workspaceSnapshot=F,this.documentListeners=this.installDocumentListeners(),((m==null?void 0:m.display)===Z.Edit||p.HEAD.sha!==P)&&(this.mapper=new Yh(this.providerService,a,P,p.HEAD.sha)))}}await $o.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new no(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(o=>{A(o.repository.uri)===A(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(o=>{for(const a of o)if(A(a)===A(this.repository.uri)){r();break}})),this.environmentListeners=f.Disposable.from(...i),r(!0),$o.addService(this),this.indexMetadata.then(async o=>{var a;const c=this.repository.uri;let u=!1;const l=Ho.decode(this.repository.uri);if(l!==void 0&&o!==void 0&&(l.type===oi.Latest&&o.type!==Dn.Active||l.type===oi.SHA&&(o.type!==Dn.Active||await o.sha!==l.sha))&&(u=!0),!u){await this.metadata;const d=await this.providerService.getModeRefType(c,this.metadata),h=(a=this.currentlyResolved[2])!=null?a:this.providerService.getModeConfig(c,d,!0);h!==void 0&&h.display===Z.Browse&&o!==void 0&&h.index!==rt.None&&o.type!==Dn.Active?u=!0:(o==null?void 0:o.type)===Dn.Active&&await o.sha===void 0&&((h==null?void 0:h.display)===Z.Browse,u=!0)}u&&f.window.showWarningMessage(or("RichNavService.latest.notIndexed","The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Ti.fileSystemProvider===void 0&&(Ti.fileSystemProvider=new oo,f.workspace.registerFileSystemProvider(oo.scheme,Ti.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(o=>setTimeout(o,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===rt.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===rt.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await mt.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return A(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),$o.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Hr.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return _o.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:$.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===Dn.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=ji.externalIndexUri(this.providerService,t),n=_o.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await hr.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await is.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=ji.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([is.get(this.providerService,this.repository.uri,t),hr.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=s(async n=>{const r=n.uri.scheme;if(Hr.scheme!==r&&oo.scheme!==r)return;const i=n.uri.toString();if(r===Hr.scheme&&!i.startsWith(this.repositoryRoot)||r===oo.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const o=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(o===void 0)return;let a=this.capabilitiesCache.get(i);if(a!==null){if(a===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),a=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,a===void 0?null:a)}a===void 0||!f.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,a,o)}},"openHandler");return t.push(f.workspace.onDidOpenTextDocument(e)),f.workspace.textDocuments.forEach(e),t.push(f.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),f.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,a=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((v,m)=>{const b=`/${r.snapshotId}/source/`;this.metadata.then(w=>{v(e0(P=>{const F=f.Uri.parse(P);if(w===void 0)return F;try{if(F.scheme==="vsck"&&F.authority===r.workspaceId&&F.path.startsWith(b))return this.repository.createRelativeUri(F.path.substr(b.length));const R=os.toVSCode(P);return R!==void 0?(this.knownDesignTimeFiles.add(R.toString()),R):F}catch(R){return F}}))},m)}),l=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function d(v){const m=l.exec(v);return m===null||m.length===2}s(d,"designTimeFilter");function h(v){if(v==null)return v;if(Array.isArray(v)){if(v.length===0)return[];const m=v[0];return typeof m.uri=="string"?v.filter(P=>d(P.uri)):typeof m.targetUri=="string"?v.filter(P=>d(P.targetUri)):[]}return l.exec(v.uri)===null?v:void 0}s(h,"filterDesignTimeFiles");async function g(v,m,b){var w,P,F;if(b==null||v===void 0)return b;const R=new Map(f.workspace.textDocuments.map(ze=>[ze.uri.toString(!0),ze]));if(Array.isArray(b)){const ze=[],ge=[];if(b.length===0)return[];for(const Et of b){const kt=Et;if(kt.uri instanceof f.Uri){const Rt=await v.mapRangeFromIndexToCode((w=R.get(kt.uri.toString()))!=null?w:kt.uri,kt.range);Rt!==void 0&&ze.push(new f.Location(kt.uri,Rt))}else{const Rt=Et,st=(P=R.get(Rt.targetUri.toString()))!=null?P:Rt.targetUri,kn=Rt.originSelectionRange?await v.mapRangeFromIndexToCode(m,Rt.originSelectionRange):void 0;if(kn!==void 0||Rt.originSelectionRange===void 0){const q=await v.mapRangeFromIndexToCode(st,Rt.targetRange);if(q!==void 0){const Xe=Rt.targetSelectionRange?await v.mapRangeFromIndexToCode(st,Rt.targetSelectionRange):void 0;(Xe!==void 0||Rt.targetSelectionRange===void 0)&&ge.push({targetUri:Rt.targetUri,targetRange:q,targetSelectionRange:Xe,originSelectionRange:kn})}}}}return ze.length>0?ze:ge}const te=await v.mapRangeFromIndexToCode((F=R.get(b.uri.toString()))!=null?F:b.uri,b.range);if(te!==void 0)return new f.Location(b.uri,te)}s(g,"mapLocations");const p=s(v=>({authentication:this.providerService.getAuthentication(v.uri),correlationId:Ah()}),"getRestApiOptions"),C=s((v,m)=>{const b={method:v,correlationId:m.correlationId};this.telemetryService.publicLog2("codex.restAPICall",b)},"sendTelemetry");Ti.registerCapability(i,"hoverProvider",e)&&c.push(f.languages.registerHoverProvider(a,{provideHover:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideHover",w),(await u).asHover(await ai.provideHover(n,b,w))}})),Ti.registerCapability(i,"definitionProvider",e)&&c.push(f.languages.registerDefinitionProvider(a,{provideDefinition:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideDefinition",w),g(this.mapper,v,(await u).asDefinitionResult(h(await ai.provideDefinition(n,b,w))))}})),Ti.registerCapability(i,"declarationProvider",e)&&c.push(f.languages.registerDeclarationProvider(a,{provideDeclaration:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideDeclaration",w),g(this.mapper,v,(await u).asDeclarationResult(h(await ai.provideDeclaration(n,b,w))))}})),Ti.registerCapability(i,"typeDefinitionProvider",e)&&c.push(f.languages.registerTypeDefinitionProvider(a,{provideTypeDefinition:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideTypeDefinition",w),g(this.mapper,v,(await u).asDefinitionResult(h(await ai.provideTypeDefinition(n,b,w))))}})),Ti.registerCapability(i,"referencesProvider",e)&&c.push(f.languages.registerReferenceProvider(a,{provideReferences:async(v,m,b)=>{const w=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(v,m):m;if(w===void 0)return;const P={position:{line:w.line,character:w.character},textDocument:{uri:this.createRichNavDocumentUri(v.uri).toString(!0)},context:{includeDeclaration:b.includeDeclaration}},F=p(v);return C("codex.provideReferences",F),g(this.mapper,v,(await u).asReferences(h(await ai.provideReferences(n,P,F))))}})),Ti.registerCapability(i,"foldingRangeProvider",e)&&c.push(f.languages.registerFoldingRangeProvider(a,{provideFoldingRanges:async v=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(v))return;const m=p(v);return C("codex.provideFoldingRanges",m),(await u).asFoldingRanges(await ai.providerFoldingRanges(n,this.createTextDocumentParams(v.uri),m))}})),Ti.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(f.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async v=>{const m=p(t),b=await ai.provideWorkspaceSymbols(n,v,m);if(b!==void 0)return(await u).asSymbolInformations(b)}})),this.registeredFeatures.set(t.uri.toString(),f.Disposable.from(...c)),$o.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await ai.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===oo.scheme){const r=os.toRichNavComponents(t);return r===void 0?t:f.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return f.Uri.file(n.substr(e.length))}},"_RichNavService");let Rl=Ti;Rl.localCapabilities=new Map([["javascript",Object.assign(Vi.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(Vi.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(Vi.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(Vi.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Rl.disabledCapabilities=new Map([["javascript",Object.assign(Vi.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(Vi.create(),{declarationProvider:!0})],["typescript",Object.assign(Vi.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(Vi.create(),{declarationProvider:!0})]]);var Ag=s((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),Eo=s((t,e,n)=>(Ag(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),t0=s((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),n0=s((t,e,n,r)=>(Ag(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),Pi;class kg{constructor(e){t0(this,Pi,void 0),n0(this,Pi,e)}async getMetadata(e){const n=Eo(this,Pi).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:o}=await Eo(this,Pi).getMetadata(e);return{type:o.type,name:o.name,revision:o.sha}}}}getProvider(e){return Eo(this,Pi).getRegisteredProvider(e)}getProviderUri(e){return k.getProviderUri(e)}getProviderRootUri(e){return Eo(this,Pi).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Hr.scheme&&Eo(this,Pi).hasProvider(e,n)}getVirtualUri(e){return k.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Eo(this,Pi).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==k.scheme)return!1;const n=Eo(this,Pi).getProviderRootUri(e);return n.scheme!=="github"?!1:Eo(this,Pi).loadWorkspaceContents(n)}}s(kg,"ExtensionApi"),Pi=new WeakMap;var r0=Object.defineProperty,i0=Object.getOwnPropertyDescriptor,Al=s((t,e,n,r)=>{for(var i=r>1?void 0:r?i0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&r0(e,n,i),i},"fs_decorateClass");const kl=f.FileSystemError.FileNotFound().code;class as{constructor(e){this.providerService=e,this._onDidChangeFile=new f.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.disposable=f.Disposable.from(f.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),f.workspace.registerFileSearchProvider(this.scheme,this),f.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case I.Created:return{type:f.FileChangeType.Created,uri:i.uri};case I.Changed:return{type:f.FileChangeType.Changed,uri:i.uri};case I.Deleted:return{type:f.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Hr.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(ce.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=k.getOpenUris(this.scheme,e);for(const[i,o]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(a=>X(o,a))&&(this.implicitlyWatchedUris.delete(i),n.set(i,o));ce.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(A(i),i);const r=[...n.values()].map(i=>({type:f.FileChangeType.Changed,uri:i}));setTimeout(()=>{ce.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=A(e);this.watchedUris.set(r,e);const i=Br(this.providerService,e).then(()=>this.providerService.watch(k.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new Fn(`fs.stat(${e.toString()})`);await Br(this.providerService,e);let r;try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){if(n.logStep("ChangeStore query"),r=await this.providerService.changeStoreStat(e),r!==void 0)return r;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(A(e),e);return r=await this.providerService.stat(k.getProviderUri(e)),r}finally{r===void 0&&this.implicitlyWatchedUris.delete(A(e)),n.stop()}}async readDirectory(e){const n=new Fn(`fs.readDirectory(${e.toString()})`);await Br(this.providerService,e),this.implicitlyWatchedUris.set(A(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(k.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new Fn(`fs.createDirectory(${e.toString()})`);await Br(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw ce.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new Fn(`fs.readFile(${e.toString()})`),r=A(e);let i;await Br(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const o=await this.providerService.changeStoreReadFile(e);if(o!==void 0)return o;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(k.getProviderUri(e)),i}catch(o){throw o instanceof Ur&&rc.showProviderNotFoundMessage(o),o}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new Fn(`fs.writeFile(${e.toString()})`,{},n.length,r);await Br(this.providerService,e);try{let o;try{if(o=await this.stat(e),!r.overwrite)throw f.FileSystemError.FileExists()}catch(a){if(a instanceof f.FileSystemError&&a.code===kl){if(!r.create)throw f.FileSystemError.FileNotFound(e)}else throw a}try{if(o===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let a;try{a=await this.providerService.readFile(k.getProviderUri(e))}catch(c){if(c instanceof f.FileSystemError&&c.code===kl)a=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,a)}}catch(a){throw ce.error(a,i.context),a}}catch(o){throw o instanceof Ur&&rc.showProviderNotFoundMessage(o),o}finally{i.stop()}}async delete(e,n){const r=new Fn(`fs.delete(${e.toString()})`,{},n);await Br(this.providerService,e);try{switch((await this.stat(e)).type){case f.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case f.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw f.FileSystemError.NoPermissions()}}catch(i){throw ce.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new Fn(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,o])=>o===f.FileType.Directory))throw f.FileSystemError.NoPermissions();for(const[o,a]of i)a===f.FileType.Directory?await this.deleteDirectory(f.Uri.joinPath(e,o),n):await this.providerService.changeStoreDeleteFile(f.Uri.joinPath(e,o))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw ce.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new Fn(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Br(this.providerService,e);try{switch((await this.stat(e)).type){case f.FileType.File:{const a=await this.readFile(e);await this.writeFile(n,a,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case f.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw f.FileSystemError.NoPermissions()}}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async renameDirectory(e,n,r){const i=new Fn(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async copy(e,n,r){const i=new Fn(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case f.FileType.File:{const a=await this.readFile(e);await this.writeFile(n,a,{create:!0,overwrite:r.overwrite});break}case f.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw f.FileSystemError.NoPermissions()}}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async copyDirectory(e,n,r){const i=new Fn(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw f.FileSystemError.FileExists();try{await this.createDirectory(n);const o=await this.readDirectory(e);for(const[a,c]of o)c===f.FileType.Directory?await this.copyDirectory(f.Uri.joinPath(e,a),f.Uri.joinPath(n,a),r):await this.copy(f.Uri.joinPath(e,a),f.Uri.joinPath(n,a),r)}catch(o){throw ce.error(o,i.context),o}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof f.FileSystemError&&n.code===kl)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const o=new Fn(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:mn.Debug});await Br(this.providerService,n.folder);let a;try{return a=await this.providerService.provideFileSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},r),a==null?void 0:a.map(c=>k.getVirtualUri(c))}catch(c){throw ce.error(c,o.context),c}finally{o.stop({suffix:` \u2022 ${(i=a==null?void 0:a.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Br(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},{report:o=>r.report({...o,uri:k.getVirtualUri(o.uri)})},i)}}s(as,"ChangeTrackingFileSystem"),Al([ac()],as.prototype,"stat",1),Al([ac()],as.prototype,"readDirectory",1),Al([ac()],as.prototype,"readFile",1);const zo=de.loadMessageBundle(),Mg=s(class{constructor(t){this.providerService=t,this.lock=new Ja("PendingRepositoryOpenActions"),this.disposable=f.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),this.fetchOrSync(e).then(async()=>{const r=mt.get("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:a}=await this.providerService.getMetadata(e.uri);if(a===void 0||a.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?zo("prompt uncommitted changes file","You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):zo("prompt uncommitted changes files","You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let l="";a.behind===1?l=zo("prompt incoming changes commit",`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,a.behind.toString()):a.behind>1&&(l=zo("prompt incoming changes commits",`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,a.behind.toString()));const d=[u,l].join(`

`),h={title:zo("sync uncommitted changes","Sync")},g={title:zo("continue uncommitted changes","Continue Without Syncing"),isCloseAffordance:!0},p={title:zo("don't show again","Don't Show Again")},C=await f.window.showInformationMessage(d,{modal:!0},h,g,p);switch(C==null?void 0:C.title){case h.title:await f.commands.executeCommand("remoteHub.sync");break;case p.title:await mt.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){ce.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){ce.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){ce.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,o;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),o=Number(r.groups.end),isNaN(o)&&(o=void 0),n=n.substring(0,r.index));const a=f.Uri.joinPath(t,n);let c;try{c=await f.workspace.fs.stat(a)}catch{}if((c==null?void 0:c.type)===f.FileType.Directory)f.commands.executeCommand("revealInExplorer",a);else{let u;i!==void 0&&(u={selection:new f.Range(Number(i)-1,0,o!=null?o:i,0)}),f.commands.executeCommand("vscode.open",a,u)}}}}setChangesetToApply(t,e){return ce.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return ce.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){ce.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){ce.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${A(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?f.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return ce.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Mg.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Fg=Mg;Fg.storageSchemaVersion=1;function ao(){}s(ao,"Diff"),ao.prototype={diff:s(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var o=this;function a(v){return i?(setTimeout(function(){i(void 0,v)},0),!0):v}s(a,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,l=1,d=c+u,h=[{newPos:-1,components:[]}],g=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&g+1>=u)return a([{value:this.join(n),count:n.length}]);function p(){for(var v=-1*l;v<=l;v+=2){var m=void 0,b=h[v-1],w=h[v+1],P=(w?w.newPos:0)-v;b&&(h[v-1]=void 0);var F=b&&b.newPos+1<c,R=w&&0<=P&&P<u;if(!F&&!R){h[v]=void 0;continue}if(!F||R&&b.newPos<w.newPos?(m=a0(w),o.pushComponent(m.components,void 0,!0)):(m=b,m.newPos++,o.pushComponent(m.components,!0,void 0)),P=o.extractCommon(m,n,e,v),m.newPos+1>=c&&P+1>=u)return a(o0(o,m.components,n,e,o.useLongestToken));h[v]=m}l++}if(s(p,"execEditLength"),i)s(function v(){setTimeout(function(){if(l>d)return i();p()||v()},0)},"exec")();else for(;l<=d;){var C=p();if(C)return C}},"diff"),pushComponent:s(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:s(function(e,n,r,i){for(var o=n.length,a=r.length,c=e.newPos,u=c-i,l=0;c+1<o&&u+1<a&&this.equals(n[c+1],r[u+1]);)c++,u++,l++;return l&&e.components.push({count:l}),e.newPos=c,u},"extractCommon"),equals:s(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return e.split("")},"tokenize"),join:s(function(e){return e.join("")},"join")};function o0(t,e,n,r,i){for(var o=0,a=e.length,c=0,u=0;o<a;o++){var l=e[o];if(l.removed){if(l.value=t.join(r.slice(u,u+l.count)),u+=l.count,o&&e[o-1].added){var h=e[o-1];e[o-1]=e[o],e[o]=h}}else{if(!l.added&&i){var d=n.slice(c,c+l.count);d=d.map(function(p,C){var v=r[u+C];return v.length>p.length?v:p}),l.value=t.join(d)}else l.value=t.join(n.slice(c,c+l.count));c+=l.count,l.added||(u+=l.count)}}var g=e[a-1];return a>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(e[a-2].value+=g.value,e.pop()),e}s(o0,"buildValues");function a0(t){return{newPos:t.newPos,components:t.components.slice(0)}}s(a0,"clonePath");var s0=new ao;function hy(t,e,n){return s0.diff(t,e,n)}s(hy,"diffChars");function Lg(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}s(Lg,"generateOptions");var Ng=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Og=/\S/,mc=new ao;mc.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Og.test(t)&&!Og.test(e)},mc.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Ng.test(e[n])&&Ng.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function gy(t,e,n){return n=Lg(n,{ignoreWhitespace:!0}),mc.diff(t,e,n)}s(gy,"diffWords");function py(t,e,n){return mc.diff(t,e,n)}s(py,"diffWordsWithSpace");var yc=new ao;yc.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function c0(t,e,n){return yc.diff(t,e,n)}s(c0,"diffLines");function vy(t,e,n){var r=Lg(n,{ignoreWhitespace:!0});return yc.diff(t,e,r)}s(vy,"diffTrimmedLines");var Ug=new ao;Ug.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function my(t,e,n){return Ug.diff(t,e,n)}s(my,"diffSentences");var Hg=new ao;Hg.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function yy(t,e,n){return Hg.diff(t,e,n)}s(yy,"diffCss");function wc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wc=s(function(e){return typeof e},"_typeof"):wc=s(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),wc(t)}s(wc,"_typeof");function so(t){return u0(t)||l0(t)||d0(t)||f0()}s(so,"_toConsumableArray");function u0(t){if(Array.isArray(t))return Ml(t)}s(u0,"_arrayWithoutHoles");function l0(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}s(l0,"_iterableToArray");function d0(t,e){if(!!t){if(typeof t=="string")return Ml(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ml(t,e)}}s(d0,"_unsupportedIterableToArray");function Ml(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}s(Ml,"_arrayLikeToArray");function f0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s(f0,"_nonIterableSpread");var h0=Object.prototype.toString,ba=new ao;ba.useLongestToken=!0,ba.tokenize=yc.tokenize,ba.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a=="undefined"?n:a}:r;return typeof t=="string"?t:JSON.stringify(Fl(t,null,null,i),i,"  ")},ba.equals=function(t,e){return ao.prototype.equals.call(ba,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function wy(t,e,n){return ba.diff(t,e,n)}s(wy,"diffJson");function Fl(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(h0.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=Fl(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),wc(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),o=0;o<c.length;o+=1)u=c[o],a[u]=Fl(t[u],e,n,r,u);e.pop(),n.pop()}else a=t;return a}s(Fl,"canonicalize");var Cc=new ao;Cc.tokenize=function(t){return t.slice()},Cc.join=Cc.removeEmpty=function(t){return t};function Cy(t,e,n){return Cc.diff(t,e,n)}s(Cy,"diffArrays");function ss(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function a(){var l={};for(i.push(l);o<n.length;){var d=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(d))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(d);h&&(l.index=h[1]),o++}for(c(l),c(l),l.hunks=[];o<n.length;){var g=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(g))break;if(/^@@/.test(g))l.hunks.push(u());else{if(g&&e.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(g));o++}}}s(a,"parseIndex");function c(l){var d=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(d){var h=d[1]==="---"?"old":"new",g=d[2].split("	",2),p=g[0].replace(/\\\\/g,"\\");/^".*"$/.test(p)&&(p=p.substr(1,p.length-2)),l[h+"FileName"]=p,l[h+"Header"]=(g[1]||"").trim(),o++}}s(c,"parseFileHeader");function u(){var l=o,d=n[o++],h=d.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),g={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};g.oldLines===0&&(g.oldStart+=1),g.newLines===0&&(g.newStart+=1);for(var p=0,C=0;o<n.length&&!(n[o].indexOf("--- ")===0&&o+2<n.length&&n[o+1].indexOf("+++ ")===0&&n[o+2].indexOf("@@")===0);o++){var v=n[o].length==0&&o!=n.length-1?" ":n[o][0];if(v==="+"||v==="-"||v===" "||v==="\\")g.lines.push(n[o]),g.linedelimiters.push(r[o]||`
`),v==="+"?p++:v==="-"?C++:v===" "&&(p++,C++);else break}if(!p&&g.newLines===1&&(g.newLines=0),!C&&g.oldLines===1&&(g.oldLines=0),e.strict){if(p!==g.newLines)throw new Error("Added line count did not match for hunk at line "+(l+1));if(C!==g.oldLines)throw new Error("Removed line count did not match for hunk at line "+(l+1))}return g}for(s(u,"parseHunk");o<n.length;)a();return i}s(ss,"parsePatch");function g0(t,e,n){var r=!0,i=!1,o=!1,a=1;return s(function c(){if(r&&!o){if(i?a++:r=!1,t+a<=n)return a;o=!0}if(!i)return o||(r=!0),e<=t-a?-a++:(i=!0,c())},"iterator")}s(g0,"distanceIterator");function Bg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=ss(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=e.hunks,a=n.compareLine||function(Xe,vt,pt,Mt){return vt===Mt},c=0,u=n.fuzzFactor||0,l=0,d=0,h,g;function p(Xe,vt){for(var pt=0;pt<Xe.lines.length;pt++){var Mt=Xe.lines[pt],jt=Mt.length>0?Mt[0]:" ",an=Mt.length>0?Mt.substr(1):Mt;if(jt===" "||jt==="-"){if(!a(vt+1,r[vt],jt,an)&&(c++,c>u))return!1;vt++}}return!0}s(p,"hunkFits");for(var C=0;C<o.length;C++){for(var v=o[C],m=r.length-v.oldLines,b=0,w=d+v.oldStart-1,P=g0(w,l,m);b!==void 0;b=P())if(p(v,w+b)){v.offset=d+=b;break}if(b===void 0)return!1;l=v.offset+v.oldStart+v.oldLines}for(var F=0,R=0;R<o.length;R++){var te=o[R],ze=te.oldStart+te.offset+F-1;F+=te.newLines-te.oldLines;for(var ge=0;ge<te.lines.length;ge++){var Et=te.lines[ge],kt=Et.length>0?Et[0]:" ",Rt=Et.length>0?Et.substr(1):Et,st=te.linedelimiters[ge];if(kt===" ")ze++;else if(kt==="-")r.splice(ze,1),i.splice(ze,1);else if(kt==="+")r.splice(ze,0,Rt),i.splice(ze,0,st),ze++;else if(kt==="\\"){var kn=te.lines[ge-1]?te.lines[ge-1][0]:null;kn==="+"?h=!0:kn==="-"&&(g=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else g&&(r.push(""),i.push(`
`));for(var q=0;q<r.length-1;q++)r[q]=r[q]+i[q];return r.join("")}s(Bg,"applyPatch");function Sy(t,e){typeof t=="string"&&(t=ss(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(o,a){if(o)return e.complete(o);var c=Bg(a,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}s(r,"processIndex"),r()}s(Sy,"applyPatches");function Wg(t,e,n,r,i,o,a){a||(a={}),typeof a.context=="undefined"&&(a.context=4);var c=c0(n,r,a);c.push({value:"",lines:[]});function u(b){return b.map(function(w){return" "+w})}s(u,"contextLines");for(var l=[],d=0,h=0,g=[],p=1,C=1,v=s(function(w){var P=c[w],F=P.lines||P.value.replace(/\n$/,"").split(`
`);if(P.lines=F,P.added||P.removed){var R;if(!d){var te=c[w-1];d=p,h=C,te&&(g=a.context>0?u(te.lines.slice(-a.context)):[],d-=g.length,h-=g.length)}(R=g).push.apply(R,so(F.map(function(q){return(P.added?"+":"-")+q}))),P.added?C+=F.length:p+=F.length}else{if(d)if(F.length<=a.context*2&&w<c.length-2){var ze;(ze=g).push.apply(ze,so(u(F)))}else{var ge,Et=Math.min(F.length,a.context);(ge=g).push.apply(ge,so(u(F.slice(0,Et))));var kt={oldStart:d,oldLines:p-d+Et,newStart:h,newLines:C-h+Et,lines:g};if(w>=c.length-2&&F.length<=a.context){var Rt=/\n$/.test(n),st=/\n$/.test(r),kn=F.length==0&&g.length>kt.oldLines;!Rt&&kn&&n.length>0&&g.splice(kt.oldLines,0,"\\ No newline at end of file"),(!Rt&&!kn||!st)&&g.push("\\ No newline at end of file")}l.push(kt),d=0,h=0,g=[]}p+=F.length,C+=F.length}},"_loop"),m=0;m<c.length;m++)v(m);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:o,hunks:l}}s(Wg,"structuredPatch");function p0(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}s(p0,"formatPatch");function v0(t,e,n,r,i,o,a){return p0(Wg(t,e,n,r,i,o,a))}s(v0,"createTwoFilesPatch");function m0(t,e,n,r,i,o){return v0(t,t,e,n,r,i,o)}s(m0,"createPatch");function y0(t,e){return t.length!==e.length?!1:Ll(t,e)}s(y0,"arrayEqual");function Ll(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}s(Ll,"arrayStartsWith");function w0(t){var e=Ol(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}s(w0,"calcLineCount");function by(t,e,n){t=$g(t,n),e=$g(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(zg(t)?zg(e)?(r.oldFileName=Sc(r,t.oldFileName,e.oldFileName),r.newFileName=Sc(r,t.newFileName,e.newFileName),r.oldHeader=Sc(r,t.oldHeader,e.oldHeader),r.newHeader=Sc(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,o=0,a=0,c=0;i<t.hunks.length||o<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},l=e.hunks[o]||{oldStart:1/0};if(jg(u,l))r.hunks.push(Vg(u,a)),i++,c+=u.newLines-u.oldLines;else if(jg(l,u))r.hunks.push(Vg(l,c)),o++,a+=l.newLines-l.oldLines;else{var d={oldStart:Math.min(u.oldStart,l.oldStart),oldLines:0,newStart:Math.min(u.newStart+a,l.oldStart+c),newLines:0,lines:[]};C0(d,u.oldStart,u.lines,l.oldStart,l.lines),o++,i++,r.hunks.push(d)}}return r}s(by,"merge");function $g(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return ss(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Wg(void 0,void 0,e,t)}return t}s($g,"loadPatch");function zg(t){return t.newFileName&&t.newFileName!==t.oldFileName}s(zg,"fileNameChanged");function Sc(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}s(Sc,"selectField");function jg(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}s(jg,"hunkBefore");function Vg(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}s(Vg,"cloneHunk");function C0(t,e,n,r,i){var o={offset:e,lines:n,index:0},a={offset:r,lines:i,index:0};for(Kg(t,o,a),Kg(t,a,o);o.index<o.lines.length&&a.index<a.lines.length;){var c=o.lines[o.index],u=a.lines[a.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))S0(t,o,a);else if(c[0]==="+"&&u[0]===" "){var l;(l=t.lines).push.apply(l,so(jo(o)))}else if(u[0]==="+"&&c[0]===" "){var d;(d=t.lines).push.apply(d,so(jo(a)))}else c[0]==="-"&&u[0]===" "?qg(t,o,a):u[0]==="-"&&c[0]===" "?qg(t,a,o,!0):c===u?(t.lines.push(c),o.index++,a.index++):Nl(t,jo(o),jo(a))}Gg(t,o),Gg(t,a),w0(t)}s(C0,"mergeLines");function S0(t,e,n){var r=jo(e),i=jo(n);if(Qg(r)&&Qg(i)){if(Ll(r,i)&&Xg(n,r,r.length-i.length)){var o;(o=t.lines).push.apply(o,so(r));return}else if(Ll(i,r)&&Xg(e,i,i.length-r.length)){var a;(a=t.lines).push.apply(a,so(i));return}}else if(y0(r,i)){var c;(c=t.lines).push.apply(c,so(r));return}Nl(t,r,i)}s(S0,"mutualChange");function qg(t,e,n,r){var i=jo(e),o=b0(n,i);if(o.merged){var a;(a=t.lines).push.apply(a,so(o.merged))}else Nl(t,r?o:i,r?i:o)}s(qg,"removal");function Nl(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}s(Nl,"conflict");function Kg(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}s(Kg,"insertLeading");function Gg(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}s(Gg,"insertTrailing");function jo(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}s(jo,"collectChange");function b0(t,e){for(var n=[],r=[],i=0,o=!1,a=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(o=o||c[0]!==" ",r.push(u),i++,c[0]==="+")for(a=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):a=!0}if((e[i]||"")[0]==="+"&&o&&(a=!0),a)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}s(b0,"collectContext");function Qg(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}s(Qg,"allRemoves");function Xg(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}s(Xg,"skipRemoveSuperset");function Ol(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Ol(r.mine),o=Ol(r.theirs);e!==void 0&&(i.oldLines===o.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===o.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}s(Ol,"calcOldNewLineCount");function _y(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}s(_y,"convertChangesToDMP");function Ey(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(_0(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}s(Ey,"convertChangesToXML");function _0(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}s(_0,"escapeHTML");var Jg=/[^a-zA-Z0-9]/,Yg=/\s/,Zg=/[\r\n]/,E0=/\n\r?\n$/,x0=/^\r?\n\r?\n/,Ze;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(Ze||(Ze={}));function I0(t,e){return t<e?t:e}s(I0,"min");function D0(t,e){return t>e?t:e}s(D0,"max");var Qr=Ft,cs=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return s(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case Ze.DIFF_INSERT:i="+";break;case Ze.DIFF_DELETE:i="-";break;case Ze.DIFF_EQUAL:i=" ";break}r[o+1]=i+encodeURI(this.diffs[o][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),T0=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return s(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var o=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[Ze.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var a=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var l=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var d=this.diff_compute_(e,n,a,o);return u&&d.unshift([Ze.DIFF_EQUAL,u]),l&&d.push([Ze.DIFF_EQUAL,l]),this.diff_cleanupMerge(d),d},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=Qr.min(e.length,n.length),o=i,a=0;r<o;)e.substring(a,o)===n.substring(a,o)?(r=o,a=r):i=o,o=Math.floor((i-r)/2+r);return o},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=Qr.min(e.length,n.length),o=i,a=0;r<o;)e.substring(e.length-o,e.length-a)===n.substring(n.length-o,n.length-a)?(r=o,a=r):i=o,o=Math.floor((i-r)/2+r);return o},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,o=null,a=0,c=0,u=0,l=0,d=0;a<e.length;)e[a][0]===Ze.DIFF_EQUAL?(r[i++]=a,c=l,u=d,l=0,d=0,o=e[a][1]):(e[a][0]===Ze.DIFF_INSERT?l+=e[a][1].length:d+=e[a][1].length,o&&o.length<=Qr.max(c,u)&&o.length<=Qr.max(l,d)&&(e.splice(r[i-1],0,[Ze.DIFF_DELETE,o]),e[r[i-1]+1][0]=Ze.DIFF_INSERT,i--,i--,a=i>0?r[i-1]:-1,c=0,u=0,l=0,d=0,o=null,n=!0)),a++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]===Ze.DIFF_DELETE&&e[a][0]===Ze.DIFF_INSERT){var h=e[a-1][1],g=e[a][1],p=this.diff_commonOverlap_(h,g),C=this.diff_commonOverlap_(g,h);p>=C?(p>=h.length/2||p>=g.length/2)&&(e.splice(a,0,[Ze.DIFF_EQUAL,g.substring(0,p)]),e[a-1][1]=h.substring(0,h.length-p),e[a+1][1]=g.substring(p),a++):(C>=h.length/2||C>=g.length/2)&&(e.splice(a,0,[Ze.DIFF_EQUAL,h.substring(0,C)]),e[a-1][0]=Ze.DIFF_INSERT,e[a-1][1]=g.substring(0,g.length-C),e[a+1][0]=Ze.DIFF_DELETE,e[a+1][1]=h.substring(C),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],o=e[n+1][1],a=this.diff_commonSuffix(r,i);if(a){var c=i.substring(i.length-a);r=r.substring(0,r.length-a),i=c+i.substring(0,i.length-a),o=c+o}for(var u=r,l=i,d=o,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var g=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,o);g>=h&&(h=g,u=r,l=i,d=o)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=l,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,o=null,a=0,c=!1,u=!1,l=!1,d=!1;a<e.length;)e[a][0]===Ze.DIFF_EQUAL?(e[a][1].length<this.diffEditCost&&(l||d)?(r[i++]=a,c=l,u=d,o=e[a][1]):(i=0,o=null),l=d=!1):(e[a][0]===Ze.DIFF_DELETE?d=!0:l=!0,o&&(c&&u&&l&&d||o.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(l)+Number(d)===3)&&(e.splice(r[i-1],0,[Ze.DIFF_DELETE,o]),e[r[i-1]+1][0]=Ze.DIFF_INSERT,i--,o=null,c&&u?(l=d=!0,i=0):(i--,a=i>0?r[i-1]:-1,l=d=!1),n=!0)),a++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([Ze.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,o="",a="",c;n<e.length;)switch(e[n][0]){case Ze.DIFF_INSERT:i++,a+=e[n][1],n++;break;case Ze.DIFF_DELETE:r++,o+=e[n][1],n++;break;case Ze.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(a,o),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===Ze.DIFF_EQUAL?e[n-r-i-1][1]+=a.substring(0,c):(e.splice(0,0,[Ze.DIFF_EQUAL,a.substring(0,c)]),n++),a=a.substring(c),o=o.substring(c)),c=this.diff_commonSuffix(a,o),c!==0&&(e[n][1]=a.substring(a.length-c)+e[n][1],a=a.substring(0,a.length-c),o=o.substring(0,o.length-c))),n-=r+i,e.splice(n,r+i),o.length&&(e.splice(n,0,[Ze.DIFF_DELETE,o]),n++),a.length&&(e.splice(n,0,[Ze.DIFF_INSERT,a]),n++),n++):n!==0&&e[n-1][0]===Ze.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,o="",a="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,o=0,a=0,c;for(c=0;c<e.length&&(e[c][0]!==Ze.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==Ze.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)o=r,a=i;return e.length!==c&&e[c][0]===Ze.DIFF_DELETE?a:a+(n-o)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,o=/>/g,a=/\n/g,c=0;c<e.length;c++){var u=e[c][0],l=e[c][1],d=l.replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(u){case Ze.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case Ze.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case Ze.DIFF_EQUAL:n[c]="<span>"+d+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==Ze.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==Ze.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o][0],c=e[o][1];switch(a){case Ze.DIFF_INSERT:r+=c.length;break;case Ze.DIFF_DELETE:i+=c.length;break;case Ze.DIFF_EQUAL:n+=Qr.max(r,i),r=0,i=0;break}}return n+=Qr.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case Ze.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case Ze.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case Ze.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,o=0,a=n.split(/\t/g),c=0;c<a.length;c++){var u=a[c].substring(1);switch(a[c].charAt(0)){case"+":try{r[i++]=[Ze.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var l=parseInt(u,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+u);var d=e.substring(o,o+=l);a[c].charAt(0)==="="?r[i++]=[Ze.DIFF_EQUAL,d]:r[i++]=[Ze.DIFF_DELETE,d];break;default:if(a[c])throw new Error("Invalid diff operation in diff_fromDelta: "+a[c])}}if(o!==e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var o=this.diff_linesToCharsMunge_(e,r,i,4e4),a=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:o,chars2:a,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],o=[],a=0;a<i.length;a++)o[a]=n[i.charCodeAt(a)];e[r][1]=o.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=Qr.max(0,Qr.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,o;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,o=this.diff_main(i,n,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")o=e,i=this.diff_text1(o);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,o=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,o=r;else throw new Error("Unknown call format to patch_make");if(o.length===0)return[];for(var a=[],c=new cs,u=0,l=0,d=0,h=i,g=i,p=0;p<o.length;p++){var C=o[p][0],v=o[p][1];switch(!u&&C!==Ze.DIFF_EQUAL&&(c.start1=l,c.start2=d),C){case Ze.DIFF_INSERT:c.diffs[u++]=o[p],c.length2+=v.length,g=g.substring(0,d)+v+g.substring(d);break;case Ze.DIFF_DELETE:c.length1+=v.length,c.diffs[u++]=o[p],g=g.substring(0,d)+g.substring(d+v.length);break;case Ze.DIFF_EQUAL:v.length<=2*this.patchMargin&&u&&o.length!==p+1?(c.diffs[u++]=o[p],c.length1+=v.length,c.length2+=v.length):v.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),a.push(c),c=new cs,u=0,h=g,l=d);break}C!==Ze.DIFF_INSERT&&(l+=v.length),C!==Ze.DIFF_DELETE&&(d+=v.length)}return u&&(this.patch_addContext_(c,h),a.push(c)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],o=new cs,a=0;a<i.diffs.length;a++)o.diffs[a]=[i.diffs[a][0],i.diffs[a][1]];o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,o=[],a=0;a<e.length;a++){var c=e[a].start2+i,u=this.diff_text1(e[a].diffs),l=void 0,d=-1;if(u.length>this.matchMaxBits?(l=this.match_main(n,u.substring(0,this.matchMaxBits),c),l!==-1&&(d=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(d===-1||l>=d)&&(l=-1))):l=this.match_main(n,u,c),l===-1)o[a]=!1,i-=e[a].length2-e[a].length1;else{o[a]=!0,i=l-c;var h=void 0;if(d===-1?h=n.substring(l,l+u.length):h=n.substring(l,d+this.matchMaxBits),u===h)n=n.substring(0,l)+this.diff_text2(e[a].diffs)+n.substring(l+u.length);else{var g=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(g)/u.length>this.patchDeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(g);for(var p=0,C=0,v=0;v<e[a].diffs.length;v++){var m=e[a].diffs[v];m[0]!==Ze.DIFF_EQUAL&&(C=this.diff_xIndex(g,p)),m[0]===Ze.DIFF_INSERT?n=n.substring(0,l+C)+m[1]+n.substring(l+C):m[0]===Ze.DIFF_DELETE&&(n=n.substring(0,l+C)+n.substring(l+this.diff_xIndex(g,p+m[1].length))),m[0]!==Ze.DIFF_DELETE&&(p+=m[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,o]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var o=e[0],a=o.diffs;if(a.length===0||a[0][0]!==Ze.DIFF_EQUAL)a.unshift([Ze.DIFF_EQUAL,r]),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>a[0][1].length){var c=n-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=c,o.start2-=c,o.length1+=c,o.length2+=c}if(o=e[e.length-1],a=o.diffs,a.length===0||a[a.length-1][0]!==Ze.DIFF_EQUAL)a.push([Ze.DIFF_EQUAL,r]),o.length1+=n,o.length2+=n;else if(n>a[a.length-1][1].length){var c=n-a[a.length-1][1].length;a[a.length-1][1]+=r.substring(0,c),o.length1+=c,o.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var o=i.start1,a=i.start2,c="";i.diffs.length!==0;){var u=new cs,l=!0;for(u.start1=o-c.length,u.start2=a-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([Ze.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var d=i.diffs[0][0],h=i.diffs[0][1];d===Ze.DIFF_INSERT?(u.length2+=h.length,a+=h.length,u.diffs.push(i.diffs.shift()),l=!1):d===Ze.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===Ze.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,o+=h.length,l=!1,u.diffs.push([d,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,o+=h.length,d===Ze.DIFF_EQUAL?(u.length2+=h.length,a+=h.length):l=!1,u.diffs.push([d,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var g=this.diff_text1(i.diffs).substring(0,this.patchMargin);g!==""&&(u.length1+=g.length,u.length2+=g.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===Ze.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=g:u.diffs.push([Ze.DIFF_EQUAL,g])),l||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var a=r[i].match(o);if(!a)throw new Error("Invalid patch string: "+r[i]);var c=new cs;n.push(c),c.start1=parseInt(a[1],10),a[2]===""?(c.start1--,c.length1=1):a[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(a[2],10)),c.start2=parseInt(a[3],10),a[4]===""?(c.start2--,c.length2=1):a[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(a[4],10)),i++;for(var u=void 0,l=void 0,d=void 0;i<r.length;){u=r[i].charAt(0),d=r[i].substring(1);try{l=decodeURI(d)}catch(h){throw new Error("Illegal escape in patch_fromText: "+d)}if(u==="-")c.diffs.push([Ze.DIFF_DELETE,l]);else if(u==="+")c.diffs.push([Ze.DIFF_INSERT,l]);else if(u===" ")c.diffs.push([Ze.DIFF_EQUAL,l]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+l)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var o;if(!e)return[[Ze.DIFF_INSERT,n]];if(!n)return[[Ze.DIFF_DELETE,e]];var a=e.length>n.length?e:n,c=e.length>n.length?n:e,u=a.indexOf(c);if(u!==-1)return o=[[Ze.DIFF_INSERT,a.substring(0,u)],[Ze.DIFF_EQUAL,c],[Ze.DIFF_INSERT,a.substring(u+c.length)]],e.length>n.length&&(o[0][0]=Ze.DIFF_DELETE,o[2][0]=Ze.DIFF_DELETE),o;if(c.length===1)return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]];var l=this.diff_halfMatch_(e,n);if(l){var d=l[0],h=l[1],g=l[2],p=l[3],C=l[4],v=this.diff_main(d,g,r,i),m=this.diff_main(h,p,r,i);return v.concat([[Ze.DIFF_EQUAL,C]],m)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var o=i.lineArray,a=this.diff_main(e,n,!1,r);this.diff_charsToLines(a,o),this.diff_cleanupSemantic(a),a.push([Ze.DIFF_EQUAL,""]);for(var c=0,u=0,l=0,d="",h="";c<a.length;){switch(a[c][0]){case Ze.DIFF_INSERT:l++,h+=a[c][1];break;case Ze.DIFF_DELETE:u++,d+=a[c][1];break;case Ze.DIFF_EQUAL:if(u>=1&&l>=1){a.splice(c-u-l,u+l),c=c-u-l;for(var g=this.diff_main(d,h,!1,r),p=g.length-1;p>=0;p--)a.splice(c,0,g[p]);c=c+g.length}l=0,u=0,d="",h="";break}c++}return a.pop(),a},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,o=n.length,a=Math.ceil((i+o)/2),c=a,u=2*a,l=new Array(u),d=new Array(u),h=0;h<u;h++)l[h]=-1,d[h]=-1;l[c+1]=0,d[c+1]=0;for(var g=i-o,p=g%2!=0,C=0,v=0,m=0,b=0,w=0;w<a&&!(Date.now()>r);w++){for(var P=-w+C;P<=w-v;P+=2){var F=c+P,R=void 0;P===-w||P!==w&&l[F-1]<l[F+1]?R=l[F+1]:R=l[F-1]+1;for(var te=R-P;R<i&&te<o&&e.charAt(R)===n.charAt(te);)R++,te++;if(l[F]=R,R>i)v+=2;else if(te>o)C+=2;else if(p){var ze=c+g-P;if(ze>=0&&ze<u&&d[ze]!==-1){var ge=i-d[ze];if(R>=ge)return this.diff_bisectSplit_(e,n,R,te,r)}}}for(var Et=-w+m;Et<=w-b;Et+=2){var ze=c+Et,ge=void 0;Et===-w||Et!==w&&d[ze-1]<d[ze+1]?ge=d[ze+1]:ge=d[ze-1]+1;for(var kt=ge-Et;ge<i&&kt<o&&e.charAt(i-ge-1)===n.charAt(o-kt-1);)ge++,kt++;if(d[ze]=ge,ge>i)b+=2;else if(kt>o)m+=2;else if(!p){var F=c+g-Et;if(F>=0&&F<u&&l[F]!==-1){var R=l[F],te=c+R-F;if(ge=i-ge,R>=ge)return this.diff_bisectSplit_(e,n,R,te,r)}}}}return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,o){var a=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),l=n.substring(i),d=this.diff_main(a,c,!1,o),h=this.diff_main(u,l,!1,o);return d.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var o="",a=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,a),c===-1&&(c=e.length-1);var l=e.substring(a,c+1);(r.hasOwnProperty?r.hasOwnProperty(l):r[l]!==void 0)?o+=String.fromCharCode(r[l]):(u===i&&(l=e.substring(a),c=e.length),o+=String.fromCharCode(u),r[l]=u,n[u++]=l),a=c+1}return o},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var o=Qr.min(r,i);if(e===n)return o;for(var a=0,c=1;;){var u=e.substring(o-c),l=n.indexOf(u);if(l===-1)return a;c+=l,(l===0||e.substring(o-c)===n.substring(0,c))&&(a=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var o=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!o&&!a)return null;a?o?c=o[4].length>a[4].length?o:a:c=a:c=o;var u,l,d,h,g=c[4];return e.length>n.length?(u=c[0],l=c[1],d=c[2],h=c[3]):(d=c[0],h=c[1],u=c[2],l=c[3]),[u,l,d,h,g]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),o="",a,c,u,l,d=n.indexOf(i,0);d!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(d)),g=this.diff_commonSuffix(e.substring(0,r),n.substring(0,d));o.length<g+h&&(o=n.substring(d-g,d)+n.substring(d,d+h),a=e.substring(0,r-g),c=e.substring(r+h),u=n.substring(0,d-g),l=n.substring(d+h)),d=n.indexOf(i,d+1)}return o.length*2>=e.length?[a,c,u,l,o]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),o=r.match(Jg),a=i.match(Jg),c=o&&r.match(Yg),u=a&&i.match(Yg),l=c&&r.match(Zg),d=u&&i.match(Zg),h=l&&e.match(E0),g=d&&n.match(x0);return h||g?5:l||d?4:o&&!c&&u?3:c||u?2:o||a?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),o=this.matchThreshold,a=e.indexOf(n,r);a!==-1&&(o=Qr.min(this.match_bitapScore_(0,a,n,r),o),a=e.lastIndexOf(n,r+n.length),a!==-1&&(o=Qr.min(this.match_bitapScore_(0,a,n,r),o)));var c=1<<n.length-1;a=-1;for(var u,l,d=n.length+e.length,h,g=0;g<n.length;g++){for(u=0,l=d;u<l;)this.match_bitapScore_(g,r+l,n,r)<=o?u=l:d=l,l=Math.floor((d-u)/2+u);d=l;var p=Qr.max(1,r-l+1),C=Qr.min(r+l,e.length)+n.length,v=Array(C+2);v[C+1]=(1<<g)-1;for(var m=C;m>=p;m--){var b=i[e.charAt(m-1)];if(g===0?v[m]=(v[m+1]<<1|1)&b:v[m]=(v[m+1]<<1|1)&b|((h[m+1]|h[m])<<1|1)|h[m+1],v[m]&c){var w=this.match_bitapScore_(g,m-1,n,r);if(w<=o)if(o=w,a=m-1,a>r)p=Qr.max(1,2*r-a);else break}}if(this.match_bitapScore_(g+1,r,n,r)>o)break;h=v}return a},t.prototype.match_bitapScore_=function(e,n,r,i){var o=e/r.length,a=Math.abs(i-n);return this.matchDistance?o+a/this.matchDistance:a?1:o},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var o=n.substring(e.start2-i,e.start2);o&&e.diffs.unshift([Ze.DIFF_EQUAL,o]);var a=n.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push([Ze.DIFF_EQUAL,a]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},t}();function Ul(t,e){let n={};for(let o=0;o<e.length;o++){const a=e[o];n[a]?n[a].push(o):n[a]=[o]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let o=0;o<t.length;o++){const a=t[o],c=n[a]||[];let u=0,l=i[0];for(let d=0;d<c.length;d++){const h=c[d];let g;for(g=u;g<i.length&&!(i[g].buffer2index<h&&(g===i.length-1||i[g+1].buffer2index>h));g++);if(g<i.length){const p={buffer1index:o,buffer2index:h,chain:i[g]};if(u===i.length?i.push(l):i[u]=l,u=g+1,l=p,u===i.length)break}}i[u]=l}return i[i.length-1]}s(Ul,"LCS");function P0(t,e){const n=Ul(t,e);let r=[],i=t.length,o=e.length,a={common:[]};function c(){a.common.length&&(a.common.reverse(),r.push(a),a={common:[]})}s(c,"processCommon");for(let u=n;u!==null;u=u.chain){let l={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)l.buffer1.push(t[i]);for(;--o>u.buffer2index;)l.buffer2.push(e[o]);(l.buffer1.length||l.buffer2.length)&&(c(),l.buffer1.reverse(),l.buffer2.reverse(),r.push(l)),i>=0&&a.common.push(t[i])}return c(),r.reverse(),r}s(P0,"diffComm");function ep(t,e){const n=Ul(t,e);let r=[],i=t.length,o=e.length;for(let a=n;a!==null;a=a.chain){const c=i-a.buffer1index-1,u=o-a.buffer2index-1;i=a.buffer1index,o=a.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[o+1,u],buffer2Content:e.slice(o+1,o+1+u)})}return r.reverse(),r}s(ep,"diffIndices");function xy(t,e){const n=Ul(t,e);let r=[],i=t.length,o=e.length;function a(c,u,l){let d=[];for(let h=0;h<l;h++)d.push(c[u+h]);return{offset:u,length:l,chunk:d}}s(a,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,l=o-c.buffer2index-1;i=c.buffer1index,o=c.buffer2index,(u||l)&&r.push({buffer1:a(t,c.buffer1index+1,u),buffer2:a(e,c.buffer2index+1,l)})}return r.reverse(),r}s(xy,"diffPatch");function R0(t,e,n){let r=[];function i(u,l){r.push({ab:l,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}s(i,"addHunk"),ep(e,t).forEach(u=>i(u,"a")),ep(e,n).forEach(u=>i(u,"b")),r.sort((u,l)=>u.oStart-l.oStart);let o=[],a=0;function c(u){u>a&&(o.push({stable:!0,buffer:"o",bufferStart:a,bufferLength:u-a,bufferContent:e.slice(a,u)}),a=u)}for(s(c,"advanceTo");r.length;){let u=r.shift(),l=u.oStart,d=u.oStart+u.oLength,h=[u];for(c(l);r.length;){const g=r[0],p=g.oStart;if(p>d)break;d=Math.max(d,p+g.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const g=u.ab==="a"?t:n;o.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:g.slice(u.abStart,u.abStart+u.abLength)})}}else{let g={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const w=u.oStart,P=w+u.oLength,F=u.abStart,R=F+u.abLength;let te=g[u.ab];te[0]=Math.min(F,te[0]),te[1]=Math.max(R,te[1]),te[2]=Math.min(w,te[2]),te[3]=Math.max(P,te[3])}const p=g.a[0]+(l-g.a[2]),C=g.a[1]+(d-g.a[3]),v=g.b[0]+(l-g.b[2]),m=g.b[1]+(d-g.b[3]);let b={stable:!1,aStart:p,aLength:C-p,aContent:t.slice(p,C),oStart:l,oLength:d-l,oContent:e.slice(l,d),bStart:v,bLength:m-v,bContent:n.slice(v,m)};o.push(b)}a=d}return c(e.length),o}s(R0,"diff3MergeRegions");function Hl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const o=typeof t=="string",a=typeof e=="string",c=typeof n=="string";o&&(t=t.split(r.stringSeparator)),a&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const l=R0(t,e,n);let d=[];function h(){d.length&&u.push({ok:d}),d=[]}s(h,"flushOk");function g(p,C){if(p.length!==C.length)return!1;for(let v=0;v<p.length;v++)if(p[v]!==C[v])return!1;return!0}return s(g,"isFalseConflict"),l.forEach(p=>{p.stable?d.push(...p.bufferContent):r.excludeFalseConflicts&&g(p.aContent,p.bContent)?d.push(...p.aContent):(h(),u.push({conflict:{a:p.aContent,aIndex:p.aStart,o:p.oContent,oIndex:p.oStart,b:p.bContent,bIndex:p.bStart}}))}),h(),u}s(Hl,"diff3Merge");function Iy(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const o=Hl(t,e,n,r);let a=!1,c=[];return o.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(a=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:a,result:c}}s(Iy,"mergeDiff3");function A0(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const o=Hl(t,e,n,r);let a=!1,c=[];for(let u=0;u<o.length;u++){const l=o[u];l.ok?c=c.concat(l.ok):(a=!0,c=c.concat([`
<<<<<<<<<
`],l.conflict.a,[`
=========
`],l.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:a,result:c}}s(A0,"node_diff3_merge");function Dy(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const o=Hl(t,e,n,r);let a=!1,c=[];for(let u=0;u<o.length;u++){const l=o[u];if(l.ok)c=c.concat(l.ok);else{const d=P0(l.conflict.a,l.conflict.b);for(let h=0;h<d.length;h++){let g=d[h];g.common?c=c.concat(g.common):(a=!0,c=c.concat([`
<<<<<<<<<
`],g.buffer1,[`
=========
`],g.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:a,result:c}}s(Dy,"mergeDigIn");function Ty(t,e){let n=[],r=0;function i(o){for(;r<o;)n.push(t[r]),r++}s(i,"advanceTo");for(let o=0;o<e.length;o++){let a=e[o];i(a.buffer1.offset);for(let c=0;c<a.buffer2.chunk.length;c++)n.push(a.buffer2.chunk[c]);r+=a.buffer1.length}return i(t.length),n}s(Ty,"patch");function Py(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}s(Py,"stripPatch");function Ry(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}s(Ry,"invertPatch");const Bl=new T0;Bl.diffTimeout=0;function tp(t,e,n){return mt.get("experimental.useDiffMatchPatch")===!0?Bl.patch_toText(Bl.patch_make(e,n)):m0(t,e,n)}s(tp,"diffs_createPatch");function np(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return tp(t,e,n);case"add":{let o;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?o=`
\\ No newline at end of file`:o="";const a=/\r?\n/g,c=n.split(a),u=n.match(a)||[],l=c.length,d=[];for(let h=0;h<l;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&d.push("+"),d.push(c[h]),h<u.length&&d.push(u[h]);return n=d.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${l} @@
${n}${o}`}case"delete":{let o=0;return e=e.replace(/\r?\n/g,a=>(o++,`${a}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${o} +0,0 @@
-${e}`}}}s(np,"createPatch2");function rp(t,e,n){return Bg(t,e,n)}s(rp,"diffs_applyPatch");function k0(t,e){const n=[];for(const r of ss(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(o=>o[0]==="-"?`+${o.slice(1)}`:o[0]==="+"?`-${o.slice(1)}`:o)}))}),n.push(r);return n}s(k0,"reversePatch");function ip(t,e,n,r){let i=`
`;const o=t.match(/(?:\r?\n)/g);if(o!==null&&o.length!==0){const l=o.filter(d=>d===`\r
`).length;i=l>o.length-l?`\r
`:`
`}const a=A0(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=a.result;let u=a.conflict;for(let l=0;l<c.length;l+=1)c[l]===`
<<<<<<<<<
`?c[l]="<<<<<<< HEAD":c[l]===`
=========
`?c[l]="=======":c[l]===`
>>>>>>>>>
`&&(c[l]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}s(ip,"diffs_merge");var M0=Object.defineProperty,F0=Object.getOwnPropertyDescriptor,L0=s((t,e,n,r)=>{for(var i=r>1?void 0:r?F0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&M0(e,n,i),i},"changeStore_decorateClass");const ar=de.loadMessageBundle(),N0=f.FileSystemError.FileNotFound().code,op=`===================================================================
`,qi=new TextDecoder,O0=new TextEncoder;function U0(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}s(U0,"isOperation");function bc(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}s(bc,"toEvent");const us=s(class{constructor(t,e,n,r,i,o){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new f.EventEmitter,this.cache=new Map,this.lock=new $h,this.scopedStores=new Map,o===void 0&&(this.disposable=f.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await f.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void f.window.showTextDocument(i)}if(s(n,"exportCore"),t===void 0)for(const r of(e=f.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new Fn("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=f.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===k.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(A(t),async()=>{const i=await this.getWorkingOperations(t),o=[];let a=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){a.push(u);continue}u.fileType===f.FileType.File&&await this.discardWorkingContent(t,u.uri);let l;if(u.type===I.Created&&u.fileType===f.FileType.Directory&&(i.some(d=>V(d.uri,u.uri))||(l={type:I.Deleted,rootUri:t,uri:u.uri})),r.push(l!=null?l:bc(u,t)),u.type===I.Created){let d=u.uri;for(;;){const{parent:h}=this.findParent(d,i,g=>g.type===I.Created);if(h){o.push(h),d=h.uri;continue}break}}}a.length>0&&o.length>0&&(a=a.filter(u=>o.includes(u)?(r.push(bc(u,t)),!1):!0)),await this.saveWorkingOperations(t,a)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){ce.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=j(e),o=r.findIndex(u=>j(u.uri)===i);if(o===-1)return;const[a]=r.splice(o,1);let c;switch(a.type){case I.Created:c=I.Deleted;break;case I.Deleted:c=I.Created;break;default:c=a.type;break}if(n.push({type:c,rootUri:t,uri:e}),a.type===I.Created){let u=a.uri;for(;;){const{parent:l,parentIndex:d}=this.findNewParentWithOnlyChild(u,r);if(l){r.splice(d,1),n.push({type:I.Deleted,rootUri:t,uri:l.uri}),u=l.uri;continue}break}}else if(a.type===I.Deleted){let u=a.uri;const l=this.findDeletedParents(u,r);let d=[...r];l.forEach(({parent:h,parentIndex:g})=>{d[g]=void 0,n.push({type:I.Created,rootUri:t,uri:h.uri})}),r=d.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),a.fileType===f.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;ce.log(r);const i=[];await this.lock.synchronizeWrite(A(t),async()=>{const o=await this.getWorkingOperations(t),a=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!o.some(l=>l.staged));for(const l of o){if(u&&!l.staged){c.push(l);continue}l.fileType===f.FileType.File&&await this.discardWorkingContent(t,l.uri);let d;switch(l.type){case I.Created:d=I.Deleted;break;case I.Deleted:d=I.Created;break;default:d=l.type;break}if(i.push({type:d,rootUri:t,uri:l.uri}),l.type===I.Created){let h=l.uri;for(;;){const{parent:g}=this.findNewParentWithOnlyChild(h,o);if(g){a.push(g),h=g.uri;continue}break}}}c.length>0&&a.length>0&&(c=c.filter(l=>a.includes(l)?(i.push({type:I.Deleted,rootUri:t,uri:l.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,o)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;ce.log(e);const n=[];await this.lock.synchronizeWrite(A(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:o}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,o))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(I.Deleted)){const a=ar("yes","Yes");if(await f.window.showWarningMessage(ar("stage with merge conflicts","Are you sure you want to stage {0} with merge conflicts?",re(e)),{modal:!0},a)!==a)return!1}const[,o]=n.conflicts.status;switch(o){case I.Changed:switch(n.type){case I.Created:return!1;case I.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case I.Deleted:const a=ar("keep theirs","Keep Their Version"),c=ar("delete","Delete File"),u=await f.window.showInformationMessage(ar("deleted by us",`File '{0}' was deleted by us and modified by them.

What would you like to do?`,re(e)),{modal:!0},a,c);return u===a?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case I.Created:switch(n.type){case I.Changed:case I.Deleted:return!1;case I.Created:return await this.spliceOperation(e,i,{...n,type:I.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case I.Deleted:switch(n.type){case I.Created:case I.Changed:{const a=ar("keep ours","Keep Our Version"),c=ar("delete","Delete File"),u=await f.window.showInformationMessage(ar("deleted by them",`File '{0}' was deleted by them and modified by us.

What would you like to do?`,re(e)),{modal:!0},a,c);return u===a?(await this.spliceOperation(e,i,{...n,type:I.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case I.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,o,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;ce.log(e);const n=[];await this.lock.synchronizeWrite(A(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>bc(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=A(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=A(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const o=j(e);return i.some(a=>j(a.uri)===o)}async hasMergeConflicts(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(A(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(A(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:o}=e;r=r.filter(a=>{var c;return(!i||a.conflicts===void 0)&&((c=o==null?void 0:o(a))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(A(t),async()=>{var r,i;const o=await this.getWorkingOperations(t),a={conflicts:[],staged:[],working:[]};for(const c of o)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?a.conflicts.push(c):c.staged?a.staged.push(c):a.working.push(c));return a},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=A(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=qi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return r.conflicts!==void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return r.staged&&r.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(A(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return!r.staged&&r.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let o;U0(n)?o=n:r=r!=null?r:n,ce.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,o==null?void 0:o.uri,r==null?void 0:r.save);const a=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await a.createPatch(e.uri,o==null?void 0:o.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const l=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return qi.decode(await f.workspace.fs.readFile(l))},merge:async(u,l,d)=>{try{const h=k.getProviderUri(u),g=qi.decode(await f.workspace.fs.readFile(h)),p=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,l),e.workspaceId),C=qi.decode(await f.workspace.fs.readFile(p)),v=await this.providerService.getMetadata(p);return{...ip(d,g,C,v.HEAD.sha),baseUri:h,incomingUri:p}}catch(h){throw new Error(`Unable to apply patch to ${l}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(ce.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;ce.debug(r,n==null?void 0:n.save);const i=new f.WorkspaceEdit,o=[],a=new Map;async function c(g){var p;const C=A(g),v=f.workspace.textDocuments.find(m=>A(m.uri)===C);return(p=v==null?void 0:v.getText())!=null?p:qi.decode(await f.workspace.fs.readFile(g))}s(c,"getContent");async function u(g){try{const p=await f.workspace.fs.stat(g);return Boolean(p)}catch{return!1}}s(u,"exists");async function l(g,p,C){let v=rp("",C,{fuzzFactor:0});if(v===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${p}`);v=await n.getIncomingContent(p)}i.createFile(g,{overwrite:!0}),i.replace(g,new f.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),v)}s(l,"applyCreate");async function d(g,p,C,v){const m=await c(g);let b=rp(m,C,{fuzzFactor:1});if(b===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${p}; Resulted in conflicts`);const w={title:ar("apply patch failed prompt confirm","Merge")},P={title:ar("apply patch failed prompt cancel","Skip File"),isCloseAffordance:!0};if(await f.window.showWarningMessage(ar("apply patch failed prompt",`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,p),{modal:!0},w,P)!==w)return;const R=await n.merge(g,p,m);b=R.mergedContent,R.conflicts&&a.set(A(g),{type:v,baseUri:R.baseUri,incomingUri:R.incomingUri})}i.replace(g,new f.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),b)}s(d,"applyModification");const h=(n==null?void 0:n.reverse)?k0(e,{}):ss(e,{});for(const g of h)if(g.oldFileName==="/dev/null"){if(!g.newFileName)continue;const p=g.newFileName.startsWith("b/")?g.newFileName.substr(2):g.newFileName,C=this.providerService.createRelativeVirtualUri(t,p);o.push(A(C)),!await u(C)?await l(C,p,g):await d(C,p,g,I.Created)}else if(g.newFileName==="/dev/null"){if(!g.oldFileName)continue;const p=g.oldFileName.startsWith("a/")?g.oldFileName.substr(2):g.oldFileName,C=this.providerService.createRelativeVirtualUri(t,p);await u(C)&&i.deleteFile(C)}else if(g.oldFileName===g.newFileName){if(!g.newFileName)continue;const p=this.providerService.createRelativeVirtualUri(t,g.newFileName);o.push(A(p)),!await u(p)?await l(p,g.newFileName,g):await d(p,g.newFileName,g,I.Changed)}else throw new Error(`Unable to apply patch to ${g.oldFileName}; Renames aren't currently supported`);if(await f.workspace.applyEdit(i),n.save&&o.length)for(const g of o){const p=f.workspace.textDocuments.find(C=>A(C.uri)===g);await(p==null?void 0:p.save())}a.size&&setTimeout(async()=>{const g=[];await this.lock.synchronizeWrite(A(t),async()=>{const p=await this.getWorkingOperations(t);if(p.length===0)return;let C=-1;for(const v of p){C++;const m=a.get(A(v.uri));m!==void 0&&await this.spliceOperation(v.uri,C,{...v,conflicts:{baseUri:m.baseUri,incomingUri:m.incomingUri,status:[v.type,m.type]},timestamp:Date.now()},g)}},r),g.length!==0&&this._onDidChange.fire(g)},0)}async createChangeset(t){ce.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(ce.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let o=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(o=o.filter(c=>c.staged)),o.length===0)return"";const a=[];for(const c of o){const u=await this.createPatchCore(t,c);a.push(u)}return a.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===I.Created){let u=await this.getContent(e.uri);return np(n,"",u,"add")}if(e.type===I.Deleted){let u=qi.decode(await f.workspace.fs.readFile(k.getProviderUri(e.uri)));return np(n,u,"","delete")}const i=await this.getContent(e.uri),o=qi.decode(await f.workspace.fs.readFile(k.getProviderUri(e.uri))),a=tp(n,o,i),c=a.indexOf(op);return`${r}
${a.substr(c+op.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;ce.log(r,e);const i=[];await this.lock.synchronizeWrite(A(n),async()=>{const{operation:o,index:a}=await this.getWorkingOperation(t,n);if(o===void 0)return;if(e===void 0&&o.conflicts){const[,u]=o.conflicts.status;switch(u){case I.Changed:switch(o.type){case I.Changed:case I.Created:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,type:I.Changed,size:o.size,hash:o.hash,originalHash:o.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Deleted:switch(o.type){case I.Deleted:await this.discardCore(n,t,i);break;case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case I.Changed:switch(o.type){case I.Deleted:await this.spliceOperation(t,a,{...o,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:break;case I.Changed:break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:return;case I.Created:break}break;case I.Deleted:switch(o.type){case I.Deleted:return this.discardCore(n,t,i);case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:return}}const c=e!==void 0?await f.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,a,{...o,type:I.Changed,originalHash:c!==void 0?await cr(c):o.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;ce.log(i,e,n);const o=[];await this.lock.synchronizeWrite(A(r),async()=>{const{operation:a,index:c}=await this.getWorkingOperation(t,r);if(a===void 0)return;switch(e.type){case I.Changed:switch(a.type){case I.Deleted:await this.spliceOperation(t,c,{...a,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);return;case I.Created:break;case I.Changed:break}break;case I.Created:switch(a.type){case I.Deleted:case I.Changed:return;case I.Created:break}break;case I.Deleted:switch(a.type){case I.Deleted:return this.discardCore(r,t,o);case I.Changed:await this.spliceOperation(t,c,{...a,type:I.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);return;case I.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),l=await this.getWorkingContent(r,t),d=a.type===I.Created?new Uint8Array(0):await f.workspace.fs.readFile(n.providerUri),h=await f.workspace.fs.readFile(e.providerUri),g=ip(qi.decode(l),qi.decode(d),qi.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,o,O0.encode(g.mergedContent),h!=null?h:new Uint8Array(0),g.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]}:void 0)},i),o.length!==0&&this._onDidChange.fire(o)}async resolveDiffCommand(t,e,n,r){let i;const o=this.providerService.getVirtualRootUri(t);return o!==void 0&&({operation:i}=await this.getWorkingOperation(t,o)),(i==null?void 0:i.type)===I.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===I.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;ce.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new us.ScopedChangeStore(this,e,this.workspaceId):new us.ScopedChangeStore(new us(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=A(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var o;const{operation:a}=await this.getWorkingOperation(t,n);if(a!==void 0){if(a.type===I.Deleted)throw f.FileSystemError.FileNotFound(`The ${a.fileType===f.FileType.Directory?"folder":"file"} has been deleted.`);return{type:a.fileType,size:(o=a.size)!=null?o:0,ctime:0,mtime:a.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new Fn(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=A(r),o=this.cache.get(i);return(o==null?void 0:o.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const a=this.cache.get(i);if((a==null?void 0:a.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Fn(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e),a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,i===void 0?{type:I.Created,uri:t,fileType:f.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Fn(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,r);const a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:f.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new Fn(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=A(n),o=this.cache.get(i);return(o==null?void 0:o.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:a}=Pe(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case I.Changed:break;case I.Created:{if(V(u.uri,a)){const l=this.providerService.getRelativeFilePath(t,u.uri);e.push([l,u.fileType])}break}case I.Deleted:{if(V(u.uri,a)){const l=this.providerService.getRelativeFilePath(t,u.uri),d=e.findIndex(([h])=>h===l);d!==-1&&e.splice(d,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=new Fn(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const a=[];if(await this.lock.synchronizeWrite(A(i),async()=>this.writeFileCore(i,t,a,e,n,r),o.context),a.length===0)return;this._onDidChange.fire(a)}finally{o.stop()}}async writeFileCore(t,e,n,r,i,o){const a=new Fn(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,o);try{const[{operation:c,index:u},l,d]=await Promise.all([this.getWorkingOperation(e,t),cr(r),cr(i)]);if(l===d&&(!c||(c==null?void 0:c.type)===I.Changed))return this.discardCore(t,e,n);if(l===(c==null?void 0:c.hash)&&d===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:I.Changed,uri:e,fileType:f.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:l,originalHash:d,conflicts:o,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:l,originalHash:d,conflicts:o,staged:!1},n)}finally{a.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new Fn(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(A(n),async()=>{const[{operation:o,index:a},c,u]=await Promise.all([this.getWorkingOperation(t,n),cr(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,a,o===void 0?{type:I.Created,uri:t,fileType:f.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:{...o,type:I.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Fn(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(A(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,r);const[a]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:f.FileType.File,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=De(t),{operation:i,index:o}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:o}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=j(t);return this.findParent(t,e,(r,i)=>r.type===I.Created&&!i.some(o=>V(o.uri,r.uri)&&j(o.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===I.Deleted&&X(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=j(t);let r=-1;const i=e.find((o,a)=>j(o.uri)!==n?!1:(r=a,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=A(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){ce.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=A(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),ce.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw ce.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){ce.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof f.FileSystemError&&n.code===N0)return;throw ce.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){ce.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw ce.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${Q(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=await this.getWorkingOperations(i);e!==-1?o.splice(e,1,n):o.push(n),await this.saveWorkingOperations(i,o),r.push(bc(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?typeof r=="string"?f.Uri.parse(r):f.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw ce.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:us.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Wl=us;Wl.operationsStorageSchemaVersion=1,Wl.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=f.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},L0([Bi()],Wl.prototype,"getWorkingOperations",1);function H0(t){switch(t){case I.Changed:return ar("change type changed","Modified");case I.Created:return ar("change type created","Added");case I.Deleted:return ar("change type deleted","Deleted")}}s(H0,"getStatusText");function B0(t){const[e,n]=t;switch(e){case I.Changed:switch(n){case I.Changed:case I.Created:return ar("conflict status changed both","Modified by Both");case I.Deleted:return ar("conflict status deleted them","Deleted by Incoming")}case I.Created:switch(n){case I.Changed:case I.Created:return ar("conflict status created both","Added by Both");case I.Deleted:return ar("conflict status deleted them","Deleted by Incoming")}case I.Deleted:switch(n){case I.Changed:case I.Created:return ar("conflict status deleted us","Deleted by Current");case I.Deleted:return ar("conflict status deleted both","Deleted by Both")}}}s(B0,"getConflictStatusText");const fi=de.loadMessageBundle();class ap{constructor(e){this.providerService=e,this._onDidChangeFileDecorations=new f.EventEmitter,this._decorations=new Map,this.disposable=f.Disposable.from(f.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){const n=e.map(({uri:r})=>(this._decorations.delete(A(r)),r));setTimeout(()=>this._onDidChangeFileDecorations.fire(n),0)}async provideFileDecoration(e,n){if(e.scheme!==Hr.scheme)return;await Br(this.providerService,e);const r=A(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const o=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let a;o.length>0&&(a=o.find(u=>A(u.uri)===r));const c=await this.providerService.changeStoreGetChange(e);if(c===void 0){if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u2193A",color:new f.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:fi("decoration tooltip incoming change added","Pending Incoming Changes (Added)")};break;case I.Deleted:i={badge:"\u2193D",color:new f.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:fi("decoration tooltip incoming change deleted","Pending Incoming Changes (Deleted)")};break;case I.Changed:i={badge:"\u2193M",color:new f.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:fi("decoration tooltip incoming change modified","Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new f.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:fi("decoration tooltip incoming change","Pending Incoming Changes")};break}return this._decorations.set(r,i!=null?i:null),i}if(c.conflicts)i={badge:"!",color:new f.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:fi("decoration tooltip conflicts","Merge Conflicts ({0})",B0(c.conflicts.status))};else if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:fi("decoration tooltip possible conflict added","Possible Merge Conflicts (Added)")};break;case I.Deleted:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:fi("decoration tooltip possible conflict deleted","Possible Merge Conflicts (Deleted)")};break;case I.Changed:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:fi("decoration tooltip possible conflict","Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:fi("decoration tooltip possible conflict","Possible Merge Conflicts")}}else switch(c.type){case I.Created:i={badge:"A",color:new f.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:fi("decoration tooltip added","Added")};break;case I.Changed:i={badge:"M",color:new f.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:fi("decoration tooltip modified","Modified")};break;case I.Deleted:i={badge:"D",color:new f.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:fi("decoration tooltip deleted","Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}s(ap,"ScmDecorationProvider");class $l{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}s($l,"TaskDebouncer");const W0=de.loadMessageBundle();class co{constructor(e){this.command=e}get label(){return this.command.title}async execute(){var e;return void await f.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}}s(co,"CommandQuickPickItem");var _c;(function(t){async function e(n,r,i,o,a,c){let u;Array.isArray(a)?u=a:c===void 0&&(u=[],c=a);const l=f.window.createQuickPick(),d=new $l(500),h=[d],{defaultBranch:g,HEAD:p}=await n.getMetadata(r);async function C(P){const[F,R,te]=await Promise.all([n.getBranches(r,{query:P,limit:100}),n.getTags(r,{query:P,limit:100}),n.getSnapshots(r)]),ze=new Set,ge=new Set;for(const st of te)ze.add(st.hash),ge.add(st.branch.name);const Et=((c==null?void 0:c.filterBranches)?F.branches.filter(c==null?void 0:c.filterBranches):F.branches).filter(st=>st.name!==g.name),kt=W0("indexedCommit","Open indexed commit"),Rt=[{iconPath:new f.ThemeIcon("layers-active"),tooltip:kt}];return[...u,...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${we(p.sha)}${ze.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:N.Commit,name:void 0,sha:p.sha,buttons:ze.has(p.sha)?Rt:void 0}]:[],{label:`$(git-branch) ${g.name} (default)`,description:`\u2022$(git-commit) ${we(g.sha)}${ge.has(g.name)||ze.has(g.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:N.Branch,name:void 0,sha:g.sha,buttons:ge.has(g.name)||ze.has(g.sha)?Rt:void 0},...Et.map(st=>({label:`$(git-branch) ${st.name}`,description:`\u2022$(git-commit) ${we(st.commit)}${ge.has(st.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:N.Branch,name:st.name,sha:st.commit,buttons:ge.has(st.name)?Rt:void 0})),...R.tags.map(st=>({label:`$(tag) ${st.name}`,description:`\u2022$(git-commit) ${we(st.commit)}${ze.has(st.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:N.Tag,name:st.name,sha:st.commit,buttons:ze.has(st.commit)?Rt:void 0}))]}s(C,"getItems");const v=C(void 0);let m,b=!1;async function w(P){m=void 0;const F=l.activeItems;l.items=P!=null?P:await v,b&&F.length!==0&&(l.activeItems=l.items.filter(R=>F.some(te=>te.label===R.label))),l.busy=!1}s(w,"setItems");try{return await new Promise(F=>{var R;h.push(l.onDidHide(()=>F(void 0)),l.onDidChangeValue(te=>{if(b=!1,te=te.trim(),(c==null?void 0:c.allowResetToSha)&&p.branch&&W(te)){w([{label:`Reset $(git-branch) ${p.branch.name} to $(git-commit) ${te}`,name:p.branch.name,sha:te,type:N.Branch}]);return}l.busy=!0;const ze=d.debounce(te?()=>C(te):()=>v);m===void 0&&(m=ze.then(async ge=>w(ge)))}),l.onDidAccept(()=>{if(l.activeItems.length!==0){const[te]=l.activeItems;F(te)}}),l.onDidTriggerItemButton(te=>{const ze=te.item;ze instanceof co||(ze.useIndex=!0),F(ze)})),l.title=o,l.placeholder=i,l.matchOnDescription=!0,l.ignoreFocusOut=(R=c==null?void 0:c.ignoreFocusOut)!=null?R:!0,l.busy=!0,l.show(),m=d.debounce(async()=>v,0).then(te=>w(te))})}finally{l.dispose(),h.forEach(P=>void P.dispose())}}s(e,"show"),t.show=e})(_c||(_c={}));const se=de.loadMessageBundle(),$0=new TextDecoder;class sp{constructor(e,n,r){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this._onDidCloseRepository=new f.EventEmitter,this._onDidOpenRepository=new f.EventEmitter,this._onDidChangeState=new f.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=f.Disposable.from(mt.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:o})=>{const a=this.getScmProvider(k.getVirtualUri(o.uri));a!==void 0&&await this.updateStatusBarCommands(a,void 0)}),this.providerService.onDidSyncRepository(async({repository:o,syncing:a})=>{const c=this.getScmProvider(k.getVirtualUri(o.uri));c!==void 0&&await this.updateStatusBarCommands(c,{syncing:a})}),this.providerService.onDidRefresh(o=>{for(const a of o)this.update(a)}),this.providerService.onDidChangeChangeStore(o=>this.update(o[0].rootUri)),...this.registerCommands());const i=this.providerService.repositories;this.onRepositoriesChanged({added:i,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=mt.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){mt.changed(e,"staging")&&(this._staging=void 0,mt.changed(e,"staging.enabled")&&this.refresh()),mt.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>A(i.sourceControl.rootUri)===A(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[f.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),f.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),f.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),f.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),f.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(cp(e)){const a=e.resourceStates.filter(ls);if(a.length!==0){if(await jl(a))for(const c of a)await this.providerService.getChangeStore(c.resourceUri).discard(c.resourceUri);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await jl(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),f.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{for(const n of e)!ls(n)||(this.telemetryService.publicLog2("command.discardChanges"),await jl([n])?await this.providerService.getChangeStore(n.resourceUri).discard(n.resourceUri):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),f.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri))}),f.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{for(const n of e)!ls(n)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(n.resourceUri).stage(n.resourceUri))}),f.commands.registerCommand("remoteHub.unstageAllChanges",e=>{const n=this.getSourceControlFrom(e);if((n==null?void 0:n.rootUri)!==void 0)return this.telemetryService.publicLog2("command.unstageAllChanges"),void this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri)}),f.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{for(const n of e)!ls(n)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(n.resourceUri).unstage(n.resourceUri))}),f.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!ls(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),f.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void f.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),f.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(zl(r)){const i=r,o=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:f.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await f.commands.executeCommand(o.command,...(n=o.arguments)!=null?n:[])}else if(r instanceof f.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await f.window.showTextDocument(i)}}),f.commands.registerCommand("remoteHub.createBranch",async e=>{await Hh("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),f.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for create branch placeholder","Choose which repository to create a new branch on"),se("choose repo for create branch title","Create Branch"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);if(i.accessLevel<xe.Write){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions"}),f.window.showErrorMessage(se("no permissions to create branch ","You don't have access to create branches on this repository."));return}let o,a=!1;if(e==null?void 0:e.fromSha)o=e.fromSha,o==="HEAD"&&(o=i.HEAD.sha);else{const p=await _c.show(this.providerService,r,se("select ref for create placeholder","Select a ref to create the new branch from"),se("select ref for create title","Create Branch \u2022 {0}",i.name),{showHead:!0});if(!p){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}o=p.sha,a=Boolean(p.useIndex)}let c;try{c=await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>Ec(this.providerService,r,o,se("create branch","Please provide a new branch name"),se("create branch placeholder","New branch name"),se("create branch title","Create Branch \u2022 {0}",i.name)))}catch(p){ce.error(p),f.window.showErrorMessage(se("unable to create branch","Unable to create the new branch."));return}if(!c){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const u=await this.providerService.switchTo(r,{type:N.Branch,id:c});if(!u)return;const l=await this.providerService.getChangeStore(r).createChangeset(r);l&&await this.openActionsService.setChangesetToApply(u.uri,l);const d=se("switch to branch prompt open","Switch to Branch"),h=se("switch to branch prompt open in new window","Open in New Window"),g=await f.window.showInformationMessage(se("switch to branch prompt",`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,c),{modal:!0},d,h);!g||(u.location=g===h?$.NewWindow:$.CurrentWindow,a&&await mt.setMode(u.uri,Me.getIndexDefault(Je.Branch)),await xi(this.providerService,u,{skipChangesPrompt:!0}))}),f.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=f.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await f.window.showOpenDialog({openLabel:se("open patch","Open Patch"),title:se("open patch","Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=$0.decode(await f.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{f.window.showErrorMessage(se("invalid patch file","Invalid patch file"))}}),f.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let o;zl(r)&&(o=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const a=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,o),c=await f.workspace.openTextDocument({language:"diff",content:a});await f.window.showTextDocument(c)}}),f.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for switch branch placeholder","Choose which repository to switch branches on"),se("choose repo for switch branch title","Switch to Branch or Tag"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const o=[],a=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.accessLevel>=xe.Write&&o.push(new co(Ii({command:"remoteHub.createBranch",title:se("create branch command.v3","{0} Create new branch...","$(add)"),arguments:[{uri:i}]})),new co(Ii({command:"remoteHub.createBranchFrom",title:se("create branch from command.v3","{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}))),a.HEAD.type){case H.Branch:o.push(new co(Ii({command:"remoteHub.openOnRemote",title:se("open branch on remote command.v2","{0} Open Branch on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,branch:a.HEAD.branch.name}]})));break;case H.RemoteBranch:o.push(new co(Ii({command:"remoteHub.openOnRemote",title:se("open remote branch on remote command.v2","{0} Open Remote Branch on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.HEAD.branch.remote.repo,branch:a.HEAD.branch.name}]})));break;case H.Tag:o.push(new co(Ii({command:"remoteHub.openOnRemote",title:se("open tag on remote command.v2","{0} Open Tag on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,tag:a.HEAD.detached.name}]})));break;case H.Commit:o.push(new co(Ii({command:"remoteHub.openOnRemote",title:se("open commit on remote command.v2","{0} Open Commit on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,sha:a.HEAD.sha}]})));break}const c=(r=a.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),l=await _c.show(this.providerService,i,se("choose switch branch placeholder","Choose which branch to switch to"),se("choose switch branch title","Switch to Branch or Tag \u2022 {0}",a.name),o,{allowResetToSha:u,filterBranches:c?d=>d.name!==c:void 0,ignoreFocusOut:!1});if(!l){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return l instanceof co?void l.execute():u&&l.type===N.Branch&&l.name===c&&l.sha?f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:l.sha})}catch(d){ce.error(d),f.window.showErrorMessage(se("reset failed","Unable to reset the repository to commit '{0}'.",we(l.sha)))}}):void f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{const d=await this.providerService.switchTo(i,l.name?{type:l.type,id:l.name}:void 0);if(d!==void 0){if(l.useIndex){const h=await this.providerService.getModeRefType(d.uri);await mt.setMode(d.uri,Me.getIndexDefault(h))}return xi(this.providerService,d)}})}),f.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for fetch placeholder","Choose which repository to fetch"),se("choose repo for fetch title","Fetch Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){f.window.showErrorMessage(se("fetch failed","Unable to fetch repository"))}}}),f.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{const i=[];for(const o of n)try{await this.providerService.fetch(o.uri)}catch(a){i.push(a)}return i})).length&&!(e==null?void 0:e.automated)&&f.window.showErrorMessage(n.length?se("fetch all failed","Unable to fetch repositories"):se("fetch failed","Unable to fetch repository"))}),f.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for pull placeholder","Choose which repository to pull"),se("choose repo for pull title","Pull Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),f.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for sync placeholder","Choose which repository to sync"),se("choose repo for sync title","Synchronize Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),f.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),mt.updateEffective("commitDirectlyWarning",Lt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(be.asVirtualProviderErrorCode(i)===ne.SyncConflictsError){const o={title:se("sync confirm","Continue")},a={title:se("sync cancel","Cancel"),isCloseAffordance:!0};await f.window.showWarningMessage(n?se("sync pull",`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):se("sync",`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},o,a)===o?await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ae.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(be.asVirtualProviderErrorCode(i)===ne.UnresolvedConflictsError)await f.window.showErrorMessage(n?se("pull with unresolved merge conflicts","You must resolve any pending conflicts before pulling."):se("sync with unresolved merge conflicts","You must resolve any pending conflicts before syncing."),{modal:!0});else throw ce.error(i),this.telemetryService.sendException(i),f.window.showErrorMessage(se("sync failed","Unable to sync the repository.")),i}}async commitChanges(e,n){try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(be.asVirtualProviderErrorCode(r)===ne.NothingToCommitError){f.window.showInformationMessage(se("no changes to commit","There are no changes to commit."));return}ce.error(r),f.window.showErrorMessage(se("commit unable","Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new Fn(`VirtualSourceControl.commitChanges(${r.toString()})`);let o;try{const a=await this.providerService.getMetadata(r);let c,u;const l=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(se("commit resolve conflicts","You must resolve any pending conflicts before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),o=": Aborted; Unresolved conflicts";return}const g=await this.providerService.getCommitOperations(r,{staged:l});if(g.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?se("commit no staged changes","There are no staged changes to commit."):se("commit no changes","There are no changes to commit."),f.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),o=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(se("specify commit message","You must specify a commit message before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),o=": Aborted; No message";return}let p,C;if(a.HEAD.type===H.RemoteBranch?(C=a.HEAD.branch.remote.accessLevel<xe.Write,p=C&&a.accessLevel<xe.Write):(p=a.accessLevel<xe.Write,C=p),u===void 0&&p&&(u=await this.providerService.getFork(r),u===void 0)){const v={title:se("fork confirm","Fork Repository")},m={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showInformationMessage(se("fork","You\u2019re trying to make changes in a project you don\u2019t have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},v,m)!==v){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),o=": Aborted; Abandoned fork prompt";return}if(u=await f.window.withProgress({location:f.ProgressLocation.Notification,title:se("fork progress","Forking {0}...",a.name)},()=>this.providerService.fork(r)),u===void 0){f.window.showErrorMessage(se("unable to fork","Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),o=": Aborted; Fork failed";return}}if(u||C){if(u===void 0){const m={title:se("remote branch create branch prompt confirm","Commit to New Branch")},b={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showErrorMessage(se("remote branch create branch prompt",`You\u2019re trying to make changes to a branch you don\u2019t have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},m,b)!==m){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),o=": Aborted; Abandoned commit to new branch prompt";return}}let v=0;try{const m=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const b of m.branches){const w=/^patch-(?<num>\d+)$/.exec(b.name);if(w==null?void 0:w.groups){const P=Number(w.groups.num);P>v&&(v=P)}}}catch{}if(c=await Ec(this.providerService,r,a.HEAD.sha,se("create new branch prompt","Create a new branch to commit your changes to"),se("create new branch placeholder","New branch name"),se("create new branch title","Commit \u2022 Create Branch \u2022 {0}",u?u.name:a.name),u,`patch-${v+1}`),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),o=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,g,c,n,u)}catch(v){const m=be.asVirtualProviderErrorCode(v);if(m===ne.DetachedHEADError){const b={title:se("detached head prompt confirm","Commit to New Branch")},w={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showErrorMessage(se("detached head prompt",`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},b,w)!==b){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),o=": Aborted; Abandoned commit to new branch prompt (detached head)";return}if(c=await Ec(this.providerService,r,a.HEAD.sha,se("create new branch prompt","Create a new branch to commit your changes to"),se("create new branch placeholder","New branch name"),se("create new branch title","Commit \u2022 Create Branch \u2022 {0}",u?u.name:a.name),u),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),o=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(m===ne.MergeConflictError){const b={title:se("push conflicts prompt pull","Pull")},w={title:se("push conflicts prompt sync","Sync (Pull & Push)")},P={title:se("cancel","Cancel"),isCloseAffordance:!0},F=await f.window.showErrorMessage(se("push conflicts prompt",`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},b,w,P);if(F!==b&&F!==w){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),o=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:F===b,conflictResolution:ae.Merge}),F===b){o=': Aborted; Chose "pull" from merge changes prompt';return}continue}else throw ce.error(v),o=`: Aborted; ${String(v)}`,v}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:l}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:l}),Kl(qo.HasCommitted,!0),!u&&!c)return;async function d(){if(u){const C={title:se("commit to fork confirm","Switch to Fork")},v={title:se("cancel","Cancel"),isCloseAffordance:!0},m=await f.window.showInformationMessage(se("commit to fork","Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",a.name),{modal:!0},C,v);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(m===C)}),m===C){let b;c!==void 0?b={type:N.Branch,id:c}:a.HEAD.branch!==void 0&&(b={type:N.Branch,id:a.HEAD.branch.name}),xi(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:b}),location:$.CurrentWindow})}return}const h={title:se("commit to new branch confirm","Switch to Branch")},g={title:se("cancel","Cancel"),isCloseAffordance:!0},p=await f.window.showInformationMessage(se("commit to new branch","Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,g);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(p===h)}),p===h&&xi(this.providerService,{name:a.name,uri:this.providerService.createVirtualUri(r,{repo:a.repo,ref:c?{type:N.Branch,id:c}:void 0}),location:$.CurrentWindow})}s(d,"showSwitchToPrompt"),d.call(this)}finally{i.stop(o?{message:o}:void 0)}}async createPullRequest(e,n){try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=be.asVirtualProviderErrorCode(r);if(i===ne.NothingToCommitError){f.window.showInformationMessage(se("no changes to commit","There are no changes to commit."));return}if(i===ne.CommitFailedError){f.window.showErrorMessage(se("commit unable","Unable to commit."));return}ce.error(r),f.window.showErrorMessage(se("unable to open pr","Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,o=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(o),staging:String(this.staging.enabled)});const a=new Fn(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=s(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),l;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(se("commit resolve conflicts","You must resolve any pending conflicts before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(l=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),l.length===0){e.inputBox.showValidationMessage(this.staging.enabled?se("commit no staged changes","There are no staged changes to commit."):se("commit no changes","There are no changes to commit."),f.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(se("specify commit message","You must specify a commit message before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const g=await this.providerService.getMetadata(i);let p,C;g.HEAD.type===H.RemoteBranch?(C=g.HEAD.branch.remote.accessLevel<xe.Write,p=C&&g.accessLevel<xe.Write):(p=g.accessLevel<xe.Write,C=p);let v=n==null?void 0:n.fork;if(v===void 0&&p&&(v=await this.providerService.getFork(i),v===void 0)){const R={title:se("fork confirm","Fork Repository")},te={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showInformationMessage(se("fork",`You\u2019re trying to make changes in a project you don\u2019t have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},R,te)!==R){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(v=await f.window.withProgress({location:f.ProgressLocation.Notification,title:se("fork progress","Forking {0}...",g.name)},()=>this.providerService.fork(i)),v===void 0){f.window.showErrorMessage(se("unable to fork","Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const m=await f.window.showInputBox({ignoreFocusOut:!0,placeHolder:se("create pr placeholder","Pull request title"),prompt:se("create pr prompt","Enter a title for the new pull request"),title:se("create pr title","New Pull Request"),value:h});if(!m){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function b(R){let te=0;try{const ze=await this.providerService.getBranches(v?this.providerService.createVirtualUri(i,v):i,{query:"patch-"});for(const ge of ze.branches){const Et=/^patch-(?<num>\d+)$/.exec(ge.name);if(Et==null?void 0:Et.groups){const kt=Number(Et.groups.num);kt>te&&(te=kt)}}}catch{}return Ec(this.providerService,i,R,se("create pr branch prompt","Create a new branch for this pull request"),se("create pr branch placeholder","New branch name"),se("create pr branch title","New Pull Request \u2022 Create Branch \u2022 {0}",v?v.name:g.name),v,`patch-${te+1}`)}s(b,"createBranch");const w=await b.call(this,g.HEAD.sha);if(!w){u.call(this);return}(l==null?void 0:l.length)&&await this.providerService.createAndPushCommit(i,h,l,w,void 0,v);const P=await this.providerService.createPullRequest(i,w,m,{draft:o},v);e.inputBox.value="",(l==null?void 0:l.length)&&(v?await this.providerService.getChangeStore(i).discardAll(i,{staged:d}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:d}));async function F(){const R={title:se("created pr notification confirm","Switch to Pull Request")},te={title:se("cancel","Cancel"),isCloseAffordance:!0},ze=await f.window.showInformationMessage(se("created pr notification","Created pull request #{0} in {1}. Do you want to switch to the new pull request?",P.id,g.name),{modal:!0},R,te);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(ze===R)}),ze===R&&xi(this.providerService,{name:g.name,uri:this.providerService.createVirtualUri(i,{repo:g.repo,ref:{type:N.PullRequest,id:P.id}}),location:$.CurrentWindow})}s(F,"showSwitchToPrompt"),F.call(this)}finally{a.stop(c?{message:c}:void 0)}}async update(e){const n=f.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),o=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:d=>d.fileType===f.FileType.File}),a=await Promise.all(o.conflicts.map(async d=>({type:d.type,resourceUri:d.uri,command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,d.conflicts.incomingUri,se("diff title with conflicts","{0} (Incoming Changes \u2194 Current Changes)",re(d.uri)))}))),c=s(d=>this.providerService.createVirtualUri(k.getProviderId(d),{repo:r.repo,ref:{type:N.Commit,id:r.HEAD.sha}},this.providerService.getRelativeFilePath(d)),"getOriginalVirtualUri"),u=await Promise.all(o.staged.map(async d=>({type:d.type,resourceUri:d.uri,command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,c(d.uri),se("diff title index","{0} (Index)",re(d.uri)))}))),l=await Promise.all(o.working.map(async d=>({type:d.type,resourceUri:d.uri,decorations:{strikeThrough:d.type===I.Deleted},command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,c(d.uri),se("diff title working","{0} (Working Tree)",re(d.uri)))})));return this.ensureMergeConflictsGroup(i).resourceStates=a,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?l:[...u,...l],i}async createOrUpdateScmProvider(e,n){var r,i;const o=await this.providerService.getMetadata(e);let a;const c=o.HEAD.branch?o.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=o.name,a=f.scm.createSourceControl(`remoteHub:${o.provider.id}`,n,e),a.quickDiffProvider={provideOriginalResource:d=>k.getProviderUri(d)};const l=this.providerService.createIGitRepository(e,a,o);u={id:o.provider.id,name:o.provider.name,sourceControl:a,groups:[],repository:l},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else a=u.sourceControl;return o.accessLevel>=xe.Write||((i=(r=o.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&o.HEAD.branch.remote.accessLevel>=xe.Write?(a.acceptInputCommand={command:"remoteHub.commit",title:se("scm input accept command title commit","Commit"),arguments:[a]},c?a.inputBox.placeholder=se("scm input placeholder commit","Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,o.provider.name):a.inputBox.placeholder=se("scm input placeholder commit","Message (Ctrl+Enter to commit and push to {0})",o.provider.name),mt.get("commitDirectlyWarning")===Lt.Off?a.inputBox.validateInput=void 0:a.inputBox.validateInput=l=>{if(mt.get("commitDirectlyWarning")===Lt.Auto&&Cp(qo.HasCommitted))return;const d=new f.MarkdownString(c?se("scm input validation commit branch directly","Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,o.provider.name):se("scm input validation commit directly","Your changes will be committed and immediately pushed to {0}.",o.provider.name));return d.isTrusted=!0,d.appendMarkdown(`&nbsp; [${se("scm input validation action","Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${se("scm input validation action tip","Hide")}')`),{message:d,type:f.SourceControlInputBoxValidationType.Information}}):(a.acceptInputCommand={command:"remoteHub.createPullRequest",title:se("scm input accept command title pr","Create a Pull Request"),arguments:[a]},a.inputBox.placeholder=se("scm input placeholder pr","Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},o),u}async updateStatusBarCommands(e,n,r){var i,o,a;const c=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(c);const{HEAD:u}=r,l=await this.providerService.getIndexMetadata(c),d=(l==null?void 0:l.type)===Dn.Active,h=(l==null?void 0:l.type)===Dn.Active,g=Dn.hasIndex(l==null?void 0:l.type),p=await this.providerService.getChangeStore(c).hasChanges(c),C=oc(u.type),v=[];if(v.push(Ii({command:"remoteHub.switchToBranch",title:`${C} ${u.name}${p?"*":""}`,tooltip:`${we(u.sha)}`,arguments:[{uri:c,commands:!0}]})),u.detached||((n==null?void 0:n.syncing)?v.push(Ii({command:"",title:"$(sync~spin)",tooltip:se("sync command syncing","Syncing Changes..."),arguments:[]})):v.push(Ii({command:"remoteHub.sync",title:`$(sync)${((o=(i=r.state)==null?void 0:i.behind)!=null?o:0)>0?` ${(a=r.state)==null?void 0:a.behind}\u2193`:""}`,tooltip:d||h?se("sync index","Sync to latest indexed commit"):se("sync command","Sync (Pull & Push)"),arguments:[{uri:c}]}))),r.pullRequest&&v.push(Ii({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:se("scm statusbar command open pr",`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),g){const m=this.providerService.getIndexProvider(c);m&&v.push(...await m.getStatusBarContributions(c))}e.sourceControl.statusBarCommands=v}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group conflicts","Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group staged","Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group changes","Changes")),e.groups.push(r)),r}getScmProvider(e){const n=A(e);return this._scmProviders.find(r=>A(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(z0(e))n=e;else if(cp(e)){const r=e,i=this._scmProviders.find(o=>o.groups.includes(r));n=i==null?void 0:i.sourceControl}else if(zl(e)){const r=e,i=this._scmProviders.find(o=>o.groups.some(a=>a.resourceStates.includes(r)));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}}s(sp,"VirtualSourceControl");function z0(t){return"rootUri"in t&&"inputBox"in t}s(z0,"isSourceControl");function cp(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}s(cp,"isSourceControlResourceGroup");function zl(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof f.Uri}s(zl,"isSourceControlResourceState");function ls(t){return"type"in t}s(ls,"isTrackedChange");async function jl(t){var e,n,r;if(t.length===0)return!0;let i,o=se("discard","Discard Changes");if(t.length===1){const c=t[0];c.type===I.Created?(i=se("confirm delete",`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,re((e=c.resourceUri)!=null?e:c.uri)),o=se("delete file","Delete file")):c.type===I.Deleted?(o=se("restore file","Restore file"),i=se("confirm restore","Are you sure you want to restore {0}?",re((n=c.resourceUri)!=null?n:c.uri))):i=se("confirm discard","Are you sure you want to discard changes in {0}?",re((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===I.Created)?i=se("confirm delete multiple",`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===I.Deleted)?(o=se("restore files","Restore files"),i=se("confirm restore multiple","Are you sure you want to restore {0} files?",t.length)):i=se("confirm discard multiple","Are you sure you want to discard changes in {0} files?",t.length);return await f.window.showWarningMessage(i,{modal:!0},o)===o}s(jl,"confirmDiscard");async function ds(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await f.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}s(ds,"getOrPickRootUri");async function Ec(t,e,n,r,i,o,a,c){const u=new Set;let l;const d=f.window.createInputBox();d.ignoreFocusOut=!0;try{return await new Promise((h,g)=>{l=f.Disposable.from(d.onDidHide(()=>h(void 0)),d.onDidChangeValue(p=>{if(p=p.trim(),!p){d.validationMessage=se("scm create branch prompt validation missing name","Please enter a valid branch name");return}if(u.has(p)){d.validationMessage=se("scm create branch prompt validation already exists","Branch '{0}' already exists",p);return}if(!je(p)){d.validationMessage=se("scm create branch prompt validation invalid name","'{0}' isn't a valid branch name",p);return}d.validationMessage=void 0}),d.onDidAccept(async()=>{const p=d.value;try{d.enabled=!1,d.busy=!0;const C=await t.createBranch(e,p,n,a);h(C)}catch(C){if(be.asVirtualProviderErrorCode(C)===ne.InvalidBranchNameError){d.enabled=!0,d.busy=!1,d.validationMessage=C.message,u.add(p);return}g(C)}})),d.prompt=r,d.placeholder=i,d.title=o,c&&(d.value=c),d.show()})}finally{d.dispose(),l==null||l.dispose()}}s(Ec,"createBranchWithPrompt");const sr=de.loadMessageBundle();class Ki extends f.TimelineItem{static is(e){return e instanceof Ki}constructor(e,n,r,i,{dateType:o,showAuthor:a,dateFormatter:c}){var u;const l=r.message.indexOf(`
`),d=l!==-1?`${r.message.substring(0,l)} \u2026`:r.message,h=o==="authored"?r.authorDate:r.commitDate;super(d,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${k.scheme}:${n}:file:commit`,this.command=i,a&&(this.description=r.authorName),this.tooltip=sr("timeline item detail",`{0} ({1}) \u2014 {2}
{3}

{4}`,r.authorName,r.authorEmail,we(r.hash),c.format(h),r.message),this.iconPath=new f.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}s(Ki,"CommitTimelineItem");class Vo extends f.TimelineItem{static is(e){return e instanceof Vo}constructor(e,n,r,i,o,{dateFormatter:a}){const c=sr("timeline staged changes","Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${k.scheme}:${n}:file:${this.id}`,this.command=o,this.iconPath=new f.ThemeIcon("git-commit"),this.tooltip=sr("timeline index detail",`{0}  \u2014 {1}
{2}

{3}`,sr("timeline you","You"),sr("timeline index","Index"),a.format(new Date(r.timestamp)),H0(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}s(Vo,"ChangeOperationTimelineItem");class up{constructor(e){this.providerService=e,this._onDidChange=new f.EventEmitter,this.id="github-file-history",this.label=sr("timeline.source","GitHub File History"),this.debouncer=new $l(500),this.disposable=f.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),mt.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);!e.some(r=>A(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);(e.added.some(r=>A(r.uri)===n)||e.removed.some(r=>A(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||A(this.rootUri)!==A(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=A(this.rootUri);e.some(r=>A(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const C of this.providerService.repositories)if(C.uri.path===this.rootUri.path){this.rootUri=C.uri;break}const o=this.providerService.getRelativeFilePath(this.rootUri,e),a=await this.providerService.getMetadata(this.rootUri);if(!a||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:a.HEAD.sha,path:o||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,l=new Intl.DateTimeFormat(f.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),d=mt.getAny("git.timeline.date",void 0,"committed"),h=mt.getAny("git.timeline.showAuthor",void 0,!0),g=await Promise.all(c.commits.map(async C=>new Ki(this.rootUri,a.provider.id,C,await this.resolveDiffCommand(C,a,e,o),{dateType:d,showAuthor:h,dateFormatter:l}))),p=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(p&&Boolean(p.staged&&mt.get("staging.enabled"))){const v=new Vo(this.rootUri,a.provider.id,p,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(p.uri,k.getProviderUri(p.uri),sr("diff title index","{0} (Index)",re(p.uri))),{dateFormatter:l});g.splice(0,0,v)}return{items:g,paging:u}}catch(o){return ce.error(o),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=f.workspace.registerTimelineProvider([Hr.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[f.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Ki.is(n)||f.env.clipboard.writeText(n.hash)}),f.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Ki.is(n)||f.env.clipboard.writeText(n.message)}),f.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var o;!Ki.is(n)&&!Vo.is(n)||n.command!==void 0&&await f.commands.executeCommand(n.command.command,...(o=n.command.arguments)!=null?o:[])}),f.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),f.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),f.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Ki.is(n)&&!Vo.is(n)||(e={uri:r,left:n},await f.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),f.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Ki.is(n)&&!Vo.is(n)||A(r)!==A(e.uri))return;const{left:o}=e,a=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=re(r),l=o.parents[0];let d;l===void 0?d=sr("timeline diff title ref","{0} ({1})",u,we(n.hash)):o.hash===""?d=sr("timeline diff title working","{0} (Working Tree)",u):o.hash==="~"?d=sr("timeline diff title index","{0} (Index)",u):d=sr("timeline diff title ref","{0} ({1})",u,we(o.hash));let h=o.hash===""||o.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:N.Commit,id:l!=null?l:"0000000000000000000000000000000000000000"}},a);l===void 0&&(h=h.with({query:"~"}));const g=n.parents[0];let p;g===void 0?p=sr("timeline diff title ref","{0} ({1})",u,we(n.hash)):g==="~"&&n.hash===""?p=sr("timeline diff title working","{0} (Working Tree)",u):n.hash==="~"?p=sr("timeline diff title index","{0} (Index)",u):p=sr("timeline diff title ref","{0} ({1})",u,we(n.hash));const C=sr("timeline diff title","{0} \u27F7 {1}",d,p),v=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:N.Commit,id:n.hash}},a);await f.commands.executeCommand("vscode.diff",h,v,C)})]}async resolveDiffCommand(e,n,r,i,o){const a=re(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:N.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let l;c===void 0?l=sr("timeline diff title ref","{0} ({1})",a,we(e.hash)):e.hash===""?l=sr("timeline diff title working","{0} (Working Tree)",a):e.hash==="~"?l=sr("timeline diff title index","{0} (Index)",a):l=sr("timeline diff title refs","{0} ({1}) \u27F7  {0} ({2})",a,we(c),we(e.hash)),c===void 0&&(u=u.with({query:"~"}));const d=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:N.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,d,l,o]}}async openOnRemote(e){if(!Ki.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await Hh("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}s(up,"VirtualTimelineProvider");class lp{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=f.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new Fn(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Br(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,o;for(const c of e.query.split("&")){const[u,l]=c.split("=");switch(u){case"url":i=decodeURIComponent(l);break;case"location":o=l===$.CurrentWindow?$.CurrentWindow:$.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),o=o!=null?o:$.NewWindow;const a=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,o);if(!a){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});return}r.log({message:`: Opening ${i} in ${o}`}),xi(this.providerService,a);break}case"/open-files":{let i;for(const a of e.query.split("&")){const[c,u]=a.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const o=await this.providerService.createWorkspaceForRemoteUrl(i);if(!o){r.log({message:`: Unable to open files/folders for ${i}`});return}o.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=Dc())==null?void 0:n.openPendingFiles(o.uri,o.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}s(lp,"RemoteUriHandler");var j0=Object.defineProperty,V0=Object.getOwnPropertyDescriptor,q0=s((t,e,n,r)=>{for(var i=r>1?void 0:r?V0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&j0(e,n,i),i},"view_decorateClass"),_a;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(_a||(_a={}));const dp=s(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof dp}get id(){}toString(){return`${ce.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let Ea=dp;q0([Bi((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],Ea.prototype,"triggerChange",1);class fp{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new f.EventEmitter,this.disposables=[];const o=!1;if(ce.isDebugging&&o){const a=this.getTreeItem;this.getTreeItem=async function(c){var u;const l=await a.apply(this,[c]),d=c.getParent();return l.tooltip===void 0&&(l.tooltip=new f.MarkdownString(l.label!==void 0&&typeof l.label!="string"?l.label.label:(u=l.label)!=null?u:"")),typeof l.tooltip=="string"?l.tooltip=`${l.tooltip}

---
context: ${l.contextValue}
node: ${c.toString()}${d!==void 0?`
parent: ${d.toString()}`:""}`:l.tooltip.appendMarkdown(`

---

context: \`${l.contextValue}\`\\
node: \`${c.toString()}\`${d!==void 0?`\\
parent: \`${d.toString()}\``:""}`),l}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!mt.changed(e,`views.${this.configKey}`)}dispose(){f.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=f.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(mt.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Br(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const o=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&o===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){ce.error(r)}}async show(){try{await f.commands.executeCommand(`${this.id}.focus`)}catch(e){ce.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=mt.get("views")[this.configKey]),this._config}}s(fp,"View");class hp extends Ea{constructor(e,n,r,i,o,a,c){super(e,n);this._message=r,this._description=i,this._tooltip=o,this._iconPath=a,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new f.TreeItem(this._message,f.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:_a.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}s(hp,"MessageNode");var K0=Object.defineProperty,G0=Object.getOwnPropertyDescriptor,Vl=s((t,e,n,r)=>{for(var i=r>1?void 0:r?G0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&K0(e,n,i),i},"workspaceRepositoriesView_decorateClass");const gr=de.loadMessageBundle(),gp=s(class extends Ea{constructor(t,e,n,r,i,o,a){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=o,this.canApplyChanges=a}static getId(t,e,n){return`${fs.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return gp.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new f.TreeItem(t,f.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${_a.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&mt.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=k.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?gr("diff title index","{0} (Index)",re(this.operation.uri),this.workspaceRepository.ref.name):gr("diff title working","{0} (Working Tree)",re(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:N.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?gr("diff title changeset index","{0} (Index of {1})",re(this.operation.uri),this.workspaceRepository.ref.name):gr("diff title changeset working","{0} (Working Tree of {1})",re(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await f.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await f.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){f.window.showErrorMessage(String(e))}}},"_FileChangeNode");let pp=gp;pp.key=":changes";const vp=s(class extends Ea{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${xc.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return vp.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||f.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new pp(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Vm(this.workspaceRepository),n=Hr.isCanonicalUri(this.workspaceRepository.uri)?gr("repositories view repository default ref","{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new f.TreeItem(this.root?this.canonical.name:n,e?f.TreeItemCollapsibleState.Collapsed:f.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${_a.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${pa(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new f.ThemeIcon("check"):this.root?wp(this.canonical.provider.id):Om(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new f.MarkdownString(void 0,!0).appendMarkdown(gr("repositories view repository tooltip",`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?gr("pull request",`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Q0(this.workspaceRepository.ref.type),oc(this.workspaceRepository.ref.type),n,t?` \u2014 _${gr("repositories view repository tooltip active","Active")}_ `:"",pa(this.workspaceRepository.timestamp,{ago:!0}),gl(this.workspaceRepository.changes,{preamble:`${gr("repositories view has changes","Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=f.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){f.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let fs=vp;fs.key=":wsrepo",Vl([Bi()],fs.prototype,"refresh",1);const mp=s(class extends Ea{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return mp.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new hp(this.view,this,gr("repositories view message empty","No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new fs(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new f.TreeItem(this.canonical.name,t?f.TreeItemCollapsibleState.Expanded:f.TreeItemCollapsibleState.Collapsed);return e.contextValue=_a.WorkspaceRepositories,e.iconPath=wp(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let xc=mp;xc.key=":wsrepos",Vl([Bi()],xc.prototype,"refresh",1);class ql extends Ea{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const o=f.Uri.parse(r);try{const{name:a,provider:c}=this.view.providerService.getVirtualUriMetadata(o),u={uri:o,name:a,provider:c,hasActive:i.some(l=>l.workspaceId===this.view.workspaceId)};i.length===1?n.push(new fs(this.view,this,u,i[0],!0)):n.push(new xc(this.view,this,u,i))}catch(a){if(a instanceof Ur)continue;ce.error(a)}}this.children=n}return this.children}getTreeItem(){return new f.TreeItem("Repositories",f.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}s(ql,"WorkspaceRepositoriesViewNode"),Vl([Bi()],ql.prototype,"refresh",1);class yp extends fp{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",gr("remote view title","Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),f.window.registerFileDecorationProvider({provideFileDecoration:(i,o)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new f.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:gr("repositories view decoration has changes","Has Uncommitted Changes")}}}))}getRoot(){return new ql(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[f.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),f.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),xi(this.providerService,{name:e.name,uri:e.uri,location:$.CurrentWindow})),this),f.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),xi(this.providerService,{name:e.name,uri:e.uri,location:$.NewWindow})),this),f.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),f.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),f.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),f.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),f.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=A(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(o=>A(o.canonicalUri)===n);return await X0(r,gr("apply changeset pick repository placeholder","Choose a repository to apply the changeset to"))}}s(yp,"WorkspaceRepositoriesView");function Q0(t,e){switch(t){case H.Branch:return e?gr("type pr branch","Pull Request #{0}",e.id):gr("type branch","Branch");case H.RemoteBranch:return e?gr("type pr remote branch","Pull Request #{0}",e.id):gr("type remote branch","Remote Branch");case H.Tag:return gr("type tag","Tag");case H.Commit:return gr("type commit","Commit")}}s(Q0,"headTypeToString");function wp(t){switch(t){case"github":return new f.ThemeIcon("github");case"azurerepos":return new f.ThemeIcon("azure-devops");default:return new f.ThemeIcon("vm")}}s(wp,"providerToIconPath");async function X0(t,e){if(t.length!==0){if(t.length>1){const n=await f.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}s(X0,"getRepository");let Ic;function Dc(){return Ic}s(Dc,"getOpenActionsService");var qo;(function(t){t.HasCommitted="has:committed",t.Version="version"})(qo||(qo={}));let Tc;function Cp(t){return Tc.globalState.get(t)}s(Cp,"getState");async function Kl(t,e){return Tc.globalState.update(t,e)}s(Kl,"updateState");let Sp=!1;function J0(){return Sp}s(J0,"isPreRelease");async function Y0(t){Tc=t,Pt.configure("remoteHub",t),ce.configure(t,"Remote Repositories",mt.get("logLevel")),Fn.start("Time to root directory",{log:!1});const e=ut.configure(t),n=new qa(t),r=t.extension.packageJSON.version;await Kl(qo.Version,r),await t.workspaceState.update(qo.Version,r);const[,i]=Tc.extension.packageJSON.version.split(".");Sp=Number.parseInt(i)%2==1;try{const o=new Hr(n,t.workspaceState);Ic=new Fg(o);const a=new sp(o,Ic,n),c=new kg(o);return t.subscriptions.push(mt.onDidChange(u=>{!mt.changed(u,"logLevel")||(ce.logLevel=mt.get("logLevel"))}),o.onDidChangeRepositories(async u=>{for(const l of u.added)try{const d=await l.getMetadata(),{HEAD:h,defaultBranch:g,name:p,provider:C,pullRequest:v}=d,m=h.name.replace(/\//g,"\u2009\u2215\u2009");let b=" ";if(v!==void 0)b=` (PR ${v.id}) `;else if(h.type===H.Tag)b=` (${m}) `;else if(h.type===H.Commit)b=` (${m}) `;else if(h.type===H.Branch||h.type===H.RemoteBranch){const P=h.branch.name.replace(/\//g,"\u2009\u2215\u2009");h.branch.name!==g.name&&(b=` (${P})`)}const w={uri:l.uri,type:"folder",label:`${p}${b}[${C.name}]`};f.commands.executeCommand("_workbench.addToRecentlyOpened",w)}catch(d){ce.error(d,"Failed to add repository to recently opened")}}),new ap(o),new as(o),new lp(o,n),...Fm(o,t.extension.id,n),...ty(o,n),...await Z0(o,a,t,n),new up(o),new yp(o,e,n),a,Ic,o,n),n.publicLog2("activate"),Promise.resolve(c)}catch(o){throw ce.error(o),o}}s(Y0,"activate");async function Z0(t,e,n,r){const i=[];if(bp()){const o=new Rg(t,r);t.registerVirtualIndexProvider("github",o),t.registerVirtualIndexProvider("azurerepos",o),i.push(o)}return i.push(ey(t,e)),i}s(Z0,"registerProviders");function ey(t,e){async function n(){var i;try{let o=(i=f.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:f.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");o||(ce.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const g=f.extensions.onDidChange(()=>{var p;o=(p=f.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?p:f.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),o&&(g.dispose(),h())})})),ce.log("[ GHPR] Registering..."),_t(ve.HasPullRequestExtension,!0);const a=await o.activate();if(!a)throw new Error("Unable to get registration api");const c=a.registerGitProvider(e),u=t.onDidChangeRepositories(h=>l(h));async function l(h){const g=h.added.filter(p=>p.provider.id==="github");if(g.length!==0){ce.log("[ GHPR] Checking for opened PRs...");for(const p of g){const C=await t.getBestRemoteUri(p.uri,Di.PullRequest);if(!!C){u.dispose(),ce.log("[ GHPR] Opened PR found; preloading"),f.commands.executeCommand("github.api.preloadPullRequest",C.toString());return}}ce.log("[ GHPR] No opened PRs found")}}s(l,"onRepositoriesChanged"),ce.log("[ GHPR] Registration complete");const d=t.repositories;return d.length&&l({added:d,removed:[]}),f.Disposable.from(c,u)}catch(o){return ce.error(o,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}s(n,"registerWithGHPR");const r=n();return f.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}s(ey,"registerGitHub");function ty(t,e){if(!bp())return[];e.publicLog2("codex.enableRichNav",{});const n=new Ph(t);return[n,n.register(new Tl(e)),...Tl.createStatus()]}s(ty,"registerNavigationServiceProviders");function bp(){return f.env.uiKind===f.UIKind.Desktop||mt.get("richNavigation.enabled")===!0}s(bp,"isRichNavEnabled");const Gl=new Map,Ql=new Map;async function Br(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Hr.getProviderId(e)),e&&Ql.has(e)){const o=Ql.get(e);if(!o)return;await Gl.get(o);return}for(const o of f.extensions.all){const a=o.id,{contributes:c}=o.packageJSON;if(!c||!["github.remotehub","ms-vscode.azure-repos"].includes(a.toLowerCase()))continue;const u=Gl.get(a),l=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],d=l.find(g=>g===e)!==void 0,h=l.length&&e===void 0;if(!u&&(h||d)){const g=(i=f.extensions.getExtension(a))==null?void 0:i.activate().then(p=>p.registerVirtualProviderService(t));if(g===void 0)return;Gl.set(a,g);for(const p of l)Ql.set(p,a);if(await g,e!==void 0&&d)return}else u&&await u}}s(Br,"ensureProvidersRegistered")})(),module.exports=Ac})();
